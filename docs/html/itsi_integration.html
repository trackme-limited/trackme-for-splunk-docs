

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Splunk ITSI integration &mdash; TrackMe 1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Cribl LogStream integration" href="cribl_integration.html" />
    <link rel="prev" title="User guide" href="userguide.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> TrackMe
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation and configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="compatibility.html">Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment &amp; Upgrades</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="userguide.html">User guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Splunk ITSI integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#step-1-entity-search-and-creation">Step 1: entity search and creation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#itsi-entities-generation-search-definition">ITSI entities generation search definition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#data-source-entity-gen-search">Data source entity gen search</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-host-entity-gen-search">Data host entity gen search</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metric-host-entity-gen-search-if-on-the-same-search-head-s">Metric host entity gen search if on the same search head(s)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#itsi-entities-import">ITSI entities import</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#step-2-create-the-kpi-base-search-for-metrics">Step 2: create the KPI base search for metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-3-create-the-kpi-base-searches-for-summary-statuses-events">Step 3: create the KPI base searches for summary statuses events</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-4-create-a-service-that-will-be-used-for-the-service-template-definition">Step 4: create a service that will be used for the service template definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-5-create-a-service-template">Step 5: create a service template</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-6-fine-tune-thresholds">Step 6: fine tune thresholds</a></li>
<li class="toctree-l2"><a class="reference internal" href="#final-create-services-business-and-technical-services-using-trackme-kpis">Final: Create services business and technical services using TrackMe KPIs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cribl_integration.html">Cribl LogStream integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitor_forwarders.html">Monitor Splunk instances forwarding</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest_api_reference.html">REST API Reference Manual</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Troubleshoot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versioning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TrackMe</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Splunk ITSI integration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/itsi_integration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="splunk-itsi-integration">
<h1>Splunk ITSI integration<a class="headerlink" href="#splunk-itsi-integration" title="Permalink to this headline">¶</a></h1>
<p><strong>If you are an ITSI customer, you can integrate trackMe concepts in ITSI and use the product capabilities to extend your monitoring.</strong></p>
<p><strong>Key information:</strong></p>
<ul class="simple">
<li><p>TrackMe generates metrics in the metric index which can directly be turned into KPIs in a KPI base search</p></li>
<li><p>Dimensions are indexed within the metrics which describe the entity and provide the by statement keys required to compute the KPIs</p></li>
<li><p>Additionally, if TrackMe is running on the same search header layer than ITSI, search time lookups can be used to enrich the entities</p></li>
<li><p>Every time a tracker runs, TrackMe records the statuses as summary events in the TrackMe summary index, which are used by ITSI to track and detect changes in the entity statuses</p></li>
</ul>
<div class="section" id="step-1-entity-search-and-creation">
<h2>Step 1: entity search and creation<a class="headerlink" href="#step-1-entity-search-and-creation" title="Permalink to this headline">¶</a></h2>
<p><strong>Create entity search(es) to generate entities in ITSI:</strong></p>
<ul class="simple">
<li><p>If ITSI and TrackMe are running on the same search head layer, you can enrich the entities results with information from TrackMe such as the priority or the monitored stated</p></li>
<li><p>You can include any kind of filter required, for example you might want to monitoring within ITSI only data sources, that are monitored and a medium or high priority</p></li>
<li><p>Create a single entity search per TrackMe category to avoid issues such as duplicated ITSI entities</p></li>
<li><p>You do not need a long time range period, the last 15 minutes is enough since all TrackMe entities are available in the summary data for each execution of the trackers</p></li>
</ul>
<div class="section" id="itsi-entities-generation-search-definition">
<h3>ITSI entities generation search definition<a class="headerlink" href="#itsi-entities-generation-search-definition" title="Permalink to this headline">¶</a></h3>
<div class="section" id="data-source-entity-gen-search">
<h4>Data source entity gen search<a class="headerlink" href="#data-source-entity-gen-search" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">index</span><span class="o">=</span><span class="n">trackme_summary</span> <span class="n">source</span><span class="o">=</span><span class="n">current_state_tracking</span><span class="p">:</span><span class="n">data_source</span> <span class="p">(</span><span class="n">data_monitored_state</span><span class="o">=</span><span class="s2">&quot;enabled&quot;</span><span class="p">)</span>
<span class="o">|</span> <span class="nb">eval</span> <span class="n">trackme_monitored_state</span><span class="o">=</span><span class="n">coalesce</span><span class="p">(</span><span class="n">data_monitored_state</span><span class="p">,</span> <span class="n">metric_monitored_state</span><span class="p">),</span> <span class="nb">object</span><span class="o">=</span><span class="n">lower</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
<span class="o">|</span> <span class="n">stats</span> <span class="n">latest</span><span class="p">(</span><span class="n">priority</span><span class="p">)</span> <span class="k">as</span> <span class="n">trackme_priority</span><span class="p">,</span> <span class="n">latest</span><span class="p">(</span><span class="n">trackme_monitored_state</span><span class="p">)</span> <span class="k">as</span> <span class="n">trackme_monitored_state</span> <span class="n">by</span> <span class="n">object_category</span><span class="p">,</span> <span class="nb">object</span>
<span class="o">|</span> <span class="n">fields</span> <span class="n">object_category</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">trackme_monitored_state</span><span class="p">,</span> <span class="n">trackme_priority</span>
<span class="o">|</span> <span class="n">rename</span> <span class="nb">object</span> <span class="k">as</span> <span class="n">trackme_object</span><span class="p">,</span> <span class="n">object_category</span> <span class="k">as</span> <span class="n">trackme_object_category</span>
<span class="o">|</span> <span class="nb">eval</span> <span class="n">itsi_role</span> <span class="o">=</span> <span class="s2">&quot;trackme&quot;</span><span class="p">,</span> <span class="n">itsi_entity</span> <span class="o">=</span> <span class="n">trackme_object</span><span class="p">,</span> <span class="n">itsi_entity_type</span> <span class="o">=</span> <span class="s2">&quot;trackme:&quot;</span> <span class="o">.</span> <span class="n">trackme_object_category</span>
<span class="o">|</span> <span class="n">fields</span> <span class="n">itsi_entity</span><span class="p">,</span> <span class="n">itsi_role</span><span class="p">,</span> <span class="n">itsi_entity_type</span><span class="p">,</span> <span class="n">trackme_</span><span class="o">*</span>
</pre></div>
</div>
</div>
<div class="section" id="data-host-entity-gen-search">
<h4>Data host entity gen search<a class="headerlink" href="#data-host-entity-gen-search" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">index</span><span class="o">=</span><span class="n">trackme_summary</span> <span class="n">source</span><span class="o">=</span><span class="n">current_state_tracking</span><span class="p">:</span><span class="n">data_host</span> <span class="p">(</span><span class="n">data_monitored_state</span><span class="o">=</span><span class="s2">&quot;enabled&quot;</span><span class="p">)</span>
<span class="o">|</span> <span class="nb">eval</span> <span class="n">trackme_monitored_state</span><span class="o">=</span><span class="n">coalesce</span><span class="p">(</span><span class="n">data_monitored_state</span><span class="p">,</span> <span class="n">metric_monitored_state</span><span class="p">),</span> <span class="nb">object</span><span class="o">=</span><span class="n">lower</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
<span class="o">|</span> <span class="n">stats</span> <span class="n">latest</span><span class="p">(</span><span class="n">priority</span><span class="p">)</span> <span class="k">as</span> <span class="n">trackme_priority</span><span class="p">,</span> <span class="n">latest</span><span class="p">(</span><span class="n">trackme_monitored_state</span><span class="p">)</span> <span class="k">as</span> <span class="n">trackme_monitored_state</span> <span class="n">by</span> <span class="n">object_category</span><span class="p">,</span> <span class="nb">object</span>
<span class="o">|</span> <span class="n">fields</span> <span class="n">object_category</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">trackme_monitored_state</span><span class="p">,</span> <span class="n">trackme_priority</span>
<span class="o">|</span> <span class="n">rename</span> <span class="nb">object</span> <span class="k">as</span> <span class="n">trackme_object</span><span class="p">,</span> <span class="n">object_category</span> <span class="k">as</span> <span class="n">trackme_object_category</span>
<span class="o">|</span> <span class="nb">eval</span> <span class="n">itsi_role</span> <span class="o">=</span> <span class="s2">&quot;trackme&quot;</span><span class="p">,</span> <span class="n">itsi_entity</span> <span class="o">=</span> <span class="n">trackme_object</span><span class="p">,</span> <span class="n">itsi_entity_type</span> <span class="o">=</span> <span class="s2">&quot;trackme:&quot;</span> <span class="o">.</span> <span class="n">trackme_object_category</span>
<span class="o">|</span> <span class="n">fields</span> <span class="n">itsi_entity</span><span class="p">,</span> <span class="n">itsi_role</span><span class="p">,</span> <span class="n">itsi_entity_type</span><span class="p">,</span> <span class="n">trackme_</span><span class="o">*</span>
</pre></div>
</div>
</div>
<div class="section" id="metric-host-entity-gen-search-if-on-the-same-search-head-s">
<h4>Metric host entity gen search if on the same search head(s)<a class="headerlink" href="#metric-host-entity-gen-search-if-on-the-same-search-head-s" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">index</span><span class="o">=</span><span class="n">trackme_summary</span> <span class="n">source</span><span class="o">=</span><span class="n">current_state_tracking</span><span class="p">:</span><span class="n">metric_host</span> <span class="p">(</span><span class="n">metric_monitored_state</span><span class="o">=</span><span class="s2">&quot;enabled&quot;</span><span class="p">)</span>
<span class="o">|</span> <span class="nb">eval</span> <span class="n">trackme_monitored_state</span><span class="o">=</span><span class="n">coalesce</span><span class="p">(</span><span class="n">data_monitored_state</span><span class="p">,</span> <span class="n">metric_monitored_state</span><span class="p">),</span> <span class="nb">object</span><span class="o">=</span><span class="n">lower</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
<span class="o">|</span> <span class="n">stats</span> <span class="n">latest</span><span class="p">(</span><span class="n">priority</span><span class="p">)</span> <span class="k">as</span> <span class="n">trackme_priority</span><span class="p">,</span> <span class="n">latest</span><span class="p">(</span><span class="n">trackme_monitored_state</span><span class="p">)</span> <span class="k">as</span> <span class="n">trackme_monitored_state</span> <span class="n">by</span> <span class="n">object_category</span><span class="p">,</span> <span class="nb">object</span>
<span class="o">|</span> <span class="n">fields</span> <span class="n">object_category</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">trackme_monitored_state</span><span class="p">,</span> <span class="n">trackme_priority</span>
<span class="o">|</span> <span class="n">rename</span> <span class="nb">object</span> <span class="k">as</span> <span class="n">trackme_object</span><span class="p">,</span> <span class="n">object_category</span> <span class="k">as</span> <span class="n">trackme_object_category</span>
<span class="o">|</span> <span class="nb">eval</span> <span class="n">itsi_role</span> <span class="o">=</span> <span class="s2">&quot;trackme&quot;</span><span class="p">,</span> <span class="n">itsi_entity</span> <span class="o">=</span> <span class="n">trackme_object</span><span class="p">,</span> <span class="n">itsi_entity_type</span> <span class="o">=</span> <span class="s2">&quot;trackme:&quot;</span> <span class="o">.</span> <span class="n">trackme_object_category</span>
<span class="o">|</span> <span class="n">fields</span> <span class="n">itsi_entity</span><span class="p">,</span> <span class="n">itsi_role</span><span class="p">,</span> <span class="n">itsi_entity_type</span><span class="p">,</span> <span class="n">trackme_</span><span class="o">*</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="itsi-entities-import">
<h3>ITSI entities import<a class="headerlink" href="#itsi-entities-import" title="Permalink to this headline">¶</a></h3>
<p><strong>Go in ITSI / Configuration / Entities then click on the button Create Entity / Inport from Search</strong></p>
<a class="with-border reference internal image-reference" href="_images/entities_import_screen1.png"><img alt="entities_import_screen1.png" class="with-border align-center" src="_images/entities_import_screen1.png" style="width: 900px;" /></a>
<p><strong>Click next and define the entities fields import:</strong></p>
<ul class="simple">
<li><p><strong>itsi_entity:</strong> import as Entity Title</p></li>
<li><p><strong>itsi_role:</strong> import as Entity information field</p></li>
<li><p><strong>itsi_entity_type:</strong> import as Entity Type</p></li>
<li><p><strong>trackme_monitored_state:</strong> import as Entity information field</p></li>
<li><p><strong>trackme_object:</strong> import as Entity Alias</p></li>
<li><p><strong>trackme_object_category:</strong> import as Entity information field</p></li>
<li><p><strong>trackme_priority:</strong> import as Entity information field</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/entities_import_screen2.png"><img alt="entities_import_screen2.png" class="with-border align-center" src="_images/entities_import_screen2.png" style="width: 900px;" /></a>
<p><strong>Click next to generate the entities, and setup a recurrent import job:</strong></p>
<a class="with-border reference internal image-reference" href="_images/itsi_entities3.png"><img alt="itsi_entities3.png" class="with-border align-center" src="_images/itsi_entities3.png" style="width: 1000px;" /></a>
<a class="with-border reference internal image-reference" href="_images/itsi_entities4.png"><img alt="itsi_entities4.png" class="with-border align-center" src="_images/itsi_entities4.png" style="width: 1000px;" /></a>
<p>Any new data source discovered and configured in TrackMe will be created in ITSI, and existing entities will be maintained automatically.</p>
<p>Set up a recurring import, for reference:</p>
<p><a class="reference external" href="https://docs.splunk.com/Documentation/ITSI/latest/Entity/ImportRecurring">https://docs.splunk.com/Documentation/ITSI/latest/Entity/ImportRecurring</a></p>
<p><strong>Once you have setup the recurring import, you can access to the savedsearches:</strong></p>
<p><em>ITSI Import Objects - TrackMe:</em></p>
<a class="with-border reference internal image-reference" href="_images/entities_recurring_import.png"><img alt="entities_recurring_import.png" class="with-border align-center" src="_images/entities_recurring_import.png" style="width: 1000px;" /></a>
</div>
</div>
<div class="section" id="step-2-create-the-kpi-base-search-for-metrics">
<h2>Step 2: create the KPI base search for metrics<a class="headerlink" href="#step-2-create-the-kpi-base-search-for-metrics" title="Permalink to this headline">¶</a></h2>
<p><strong>The next step is to create a KPI base saarch that will turn the metrics into ITSI KPIs, within the KPI base search editor, create a new base search:</strong></p>
<p><em>KPI base search title and description:</em></p>
<ul class="simple">
<li><p>Title: <strong>TrackMe:Metrics</strong></p></li>
<li><p>Description: <strong>This KPI base search handles TrackMe metrics for data sources monitoring</strong></p></li>
</ul>
<p><em>KPI base search</em>:</p>
<ul class="simple">
<li><p>Type: <strong>adhoc</strong></p></li>
<li><p>search:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">index</span><span class="o">=</span><span class="n">trackme_summary</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;current_state_tracking:data_source&quot;</span>
<span class="o">|</span> <span class="n">stats</span> <span class="n">latest</span><span class="p">(</span><span class="n">data_eventcount</span><span class="p">)</span> <span class="k">as</span> <span class="n">trackme</span><span class="o">.</span><span class="n">eventcount_4h</span><span class="p">,</span> <span class="n">latest</span><span class="p">(</span><span class="n">data_last_lag_seen</span><span class="p">)</span> <span class="k">as</span> <span class="n">trackme</span><span class="o">.</span><span class="n">lag_event_sec</span><span class="p">,</span> <span class="n">latest</span><span class="p">(</span><span class="n">data_last_ingestion_lag_seen</span><span class="p">)</span> <span class="k">as</span> <span class="n">trackme</span><span class="o">.</span><span class="n">lag_ingestion_sec</span> <span class="n">by</span> <span class="n">_time</span><span class="p">,</span> <span class="n">object_category</span><span class="p">,</span> <span class="nb">object</span>
<span class="o">|</span> <span class="n">rename</span> <span class="n">object_category</span> <span class="k">as</span> <span class="n">trackme_object_category</span><span class="p">,</span> <span class="nb">object</span> <span class="k">as</span> <span class="n">trackme_object</span>
</pre></div>
</div>
<ul class="simple">
<li><p>KPI Search Schedule: <strong>Every 5 minutes</strong></p></li>
<li><p>Calculation Window: <strong>Last 5 minutes</strong></p></li>
<li><p>Monitoring Lag (in seconds): <strong>30</strong></p></li>
<li><p>Split by Entity: <strong>yes</strong></p></li>
<li><p>Entity Split Field: <strong>trackme_object</strong></p></li>
<li><p>Filter to Entities in Service: <strong>yes</strong></p></li>
<li><p>Entity Filter Field: <strong>trackme_object</strong></p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/kpi_basesearch_metrics1.png"><img alt="kpi_basesearch_metrics1.png" class="with-border align-center" src="_images/kpi_basesearch_metrics1.png" style="width: 1000px;" /></a>
<p><em>Then, create the metrics as follows:</em></p>
<p><strong>Metric: trackme.eventcount_4h</strong></p>
<ul class="simple">
<li><p>Title: <strong>eventcount_4h</strong></p></li>
<li><p>threshold field: <strong>trackme.eventcount_4h</strong></p></li>
<li><p>Unit: <strong>#</strong></p></li>
<li><p>Entity calculation: <strong>Average</strong></p></li>
<li><p>Service / Aggregate calculation: <strong>Sum</strong></p></li>
<li><p>Fill Data Gaps with: <strong>Null values</strong></p></li>
<li><p>Threshold level for Null values: <strong>Unknown</strong></p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/kpi_basesearch_metrics2.png"><img alt="kpi_basesearch_metrics2.png" class="with-border align-center" src="_images/kpi_basesearch_metrics2.png" style="width: 500px;" /></a>
<p><strong>Metric: trackme.lag_event_sec</strong></p>
<ul class="simple">
<li><p>Title: <strong>lag_event_sec</strong></p></li>
<li><p>threshold field: <strong>trackme.lag_event_sec</strong></p></li>
<li><p>Unit: <strong>sec</strong></p></li>
<li><p>Entity calculation: <strong>Average</strong></p></li>
<li><p>Service / Aggregate calculation: <strong>Average</strong></p></li>
<li><p>Fill Data Gaps with: <strong>Null values</strong></p></li>
<li><p>Threshold level for Null values: <strong>Unknown</strong></p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/kpi_basesearch_metrics3.png"><img alt="kpi_basesearch_metrics3.png" class="with-border align-center" src="_images/kpi_basesearch_metrics3.png" style="width: 500px;" /></a>
<p><strong>Metric: trackme.lag_ingestion_sec</strong></p>
<ul class="simple">
<li><p>Title: <strong>lag_ingestion_sec</strong></p></li>
<li><p>threshold field: <strong>trackme.lag_ingestion_sec</strong></p></li>
<li><p>Unit: <strong>sec</strong></p></li>
<li><p>Entity calculation: <strong>Average</strong></p></li>
<li><p>Service / Aggregate calculation: <strong>Average</strong></p></li>
<li><p>Fill Data Gaps with: <strong>Null values</strong></p></li>
<li><p>Threshold level for Null values: <strong>Unknown</strong></p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/kpi_basesearch_metrics4.png"><img alt="kpi_basesearch_metrics4.png" class="with-border align-center" src="_images/kpi_basesearch_metrics4.png" style="width: 500px;" /></a>
</div>
<div class="section" id="step-3-create-the-kpi-base-searches-for-summary-statuses-events">
<h2>Step 3: create the KPI base searches for summary statuses events<a class="headerlink" href="#step-3-create-the-kpi-base-searches-for-summary-statuses-events" title="Permalink to this headline">¶</a></h2>
<p><em>KPI base search title and description:</em></p>
<ul class="simple">
<li><p>Title: <strong>TrackMe:FlappingStatuses</strong></p></li>
<li><p>Description: <strong>This KPI base searches handles TrackMe status flapping events</strong></p></li>
</ul>
<p><em>KPI base search:</em></p>
<ul class="simple">
<li><p>Type: <strong>adhoc</strong></p></li>
<li><p>search:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>`trackme_idx` source=&quot;current_state_tracking:*&quot; priority=*
| eval {priority}_{current_state} = current_state
| rename object_category as trackme_object_category, object as trackme_object
</pre></div>
</div>
<ul class="simple">
<li><p>KPI Search Schedule: <strong>Every 5 minutes</strong></p></li>
<li><p>Calculation Window: <strong>Last 5 minutes</strong></p></li>
<li><p>Monitoring Lag (in seconds): <strong>60</strong></p></li>
<li><p>Split by Entity: <strong>yes</strong></p></li>
<li><p>Entity Split Field: <strong>trackme_object</strong></p></li>
<li><p>Filter to Entities in Service: <strong>yes</strong></p></li>
<li><p>Entity Filter Field: <strong>trackme_object</strong></p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/kpi_basesearch_metrics5.png"><img alt="kpi_basesearch_metrics5.png" class="with-border align-center" src="_images/kpi_basesearch_metrics5.png" style="width: 1000px;" /></a>
<p><em>Then, create the metrics as follows:</em></p>
<p><strong>Metric: high_red</strong></p>
<ul class="simple">
<li><p>Title: <strong>high_red</strong></p></li>
<li><p>threshold field: <strong>high_red</strong></p></li>
<li><p>Unit: <strong>#</strong></p></li>
<li><p>Entity calculation: <strong>Count</strong></p></li>
<li><p>Service / Aggregate calculation: <strong>Sum</strong></p></li>
<li><p>Fill Data Gaps with: <strong>Null values</strong></p></li>
<li><p>Threshold level for Null values: <strong>Normal</strong></p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/kpi_basesearch_metrics6.png"><img alt="kpi_basesearch_metrics6.png" class="with-border align-center" src="_images/kpi_basesearch_metrics6.png" style="width: 500px;" /></a>
<p><strong>Metric: medium_red</strong></p>
<ul class="simple">
<li><p>Title: <strong>medium_red</strong></p></li>
<li><p>threshold field: <strong>medium_red</strong></p></li>
<li><p>Unit: <strong>#</strong></p></li>
<li><p>Entity calculation: <strong>Count</strong></p></li>
<li><p>Service / Aggregate calculation: <strong>Sum</strong></p></li>
<li><p>Fill Data Gaps with: <strong>Null values</strong></p></li>
<li><p>Threshold level for Null values: <strong>Normal</strong></p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/kpi_basesearch_metrics7.png"><img alt="kpi_basesearch_metrics7.png" class="with-border align-center" src="_images/kpi_basesearch_metrics7.png" style="width: 500px;" /></a>
<p><strong>Metric: low_red</strong></p>
<ul class="simple">
<li><p>Title: <strong>low_red</strong></p></li>
<li><p>threshold field: <strong>low_red</strong></p></li>
<li><p>Unit: <strong>#</strong></p></li>
<li><p>Entity calculation: <strong>Count</strong></p></li>
<li><p>Service / Aggregate calculation: <strong>Sum</strong></p></li>
<li><p>Fill Data Gaps with: <strong>Null values</strong></p></li>
<li><p>Threshold level for Null values: <strong>Normal</strong></p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/kpi_basesearch_metrics8.png"><img alt="kpi_basesearch_metrics8.png" class="with-border align-center" src="_images/kpi_basesearch_metrics8.png" style="width: 500px;" /></a>
<p><em>Notes:</em></p>
<ul class="simple">
<li><p>the technique <code class="docutils literal notranslate"><span class="pre">{priority}_{current_state}</span> <span class="pre">=</span> <span class="pre">current_state</span></code> allows you to track different levels of priorities easily without any conditional operations</p></li>
</ul>
</div>
<div class="section" id="step-4-create-a-service-that-will-be-used-for-the-service-template-definition">
<h2>Step 4: create a service that will be used for the service template definition<a class="headerlink" href="#step-4-create-a-service-that-will-be-used-for-the-service-template-definition" title="Permalink to this headline">¶</a></h2>
<p><strong>Go in Services / Create Service:</strong></p>
<ul class="simple">
<li><p>Title: <strong>TrackMe:Template</strong></p></li>
<li><p>Description: <strong>This is the template initial service for TrackMe</strong></p></li>
<li><p>Manually add service content</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/service_template1.png"><img alt="service_template1.png" class="with-border align-center" src="_images/service_template1.png" style="width: 500px;" /></a>
<p><strong>Define the entities rules as follows:</strong></p>
<a class="with-border reference internal image-reference" href="_images/service_template_main.png"><img alt="service_template_main.png" class="with-border align-center" src="_images/service_template_main.png" style="width: 1000px;" /></a>
<ul class="simple">
<li><p>Info: itsi_role matches “trackme”</p></li>
<li><p>Info: trackme_object_category matches “*”</p></li>
<li><p>Entity Tile: does not match “*”</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/service_template2.png"><img alt="service_template2.png" class="with-border align-center" src="_images/service_template2.png" style="width: 1000px;" /></a>
<p><strong>Add the KPIs to the service, as follows:</strong></p>
<p><strong>TrackMe:eventcount_4h</strong></p>
<ul class="simple">
<li><p>Title: TrackMe:eventcount_4h</p></li>
<li><p>Description: TrackMe records the event count per time of 4 hours per entity</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/service_template3.png"><img alt="service_template3.png" class="with-border align-center" src="_images/service_template3.png" style="width: 500px;" /></a>
<a class="with-border reference internal image-reference" href="_images/service_template4.png"><img alt="service_template4.png" class="with-border align-center" src="_images/service_template4.png" style="width: 500px;" /></a>
<p><em>Click next until you can hit the finish button.</em></p>
<p><strong>TrackMe:lag_event_sec</strong></p>
<ul class="simple">
<li><p>Title: TrackMe:lag_event_sec</p></li>
<li><p>Description: TrackMe records the event lagging in seconds per entity</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/service_template5.png"><img alt="service_template5.png" class="with-border align-center" src="_images/service_template5.png" style="width: 500px;" /></a>
<a class="with-border reference internal image-reference" href="_images/service_template6.png"><img alt="service_template6.png" class="with-border align-center" src="_images/service_template6.png" style="width: 500px;" /></a>
<p><em>Click next until you can hit the finish button.</em></p>
<p><strong>TrackMe:lag_ingestion_sec</strong></p>
<ul class="simple">
<li><p>Title: TrackMe:lag_ingestion_sec</p></li>
<li><p>Description: TrackMe records the event latency lagging in seconds per entity</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/service_template7.png"><img alt="service_template7.png" class="with-border align-center" src="_images/service_template7.png" style="width: 500px;" /></a>
<a class="with-border reference internal image-reference" href="_images/service_template8.png"><img alt="service_template8.png" class="with-border align-center" src="_images/service_template8.png" style="width: 500px;" /></a>
<p><em>Click next until you can hit the finish button.</em></p>
<p><strong>TrackMe:medium_red</strong></p>
<ul class="simple">
<li><p>Title: TrackMe:high_red</p></li>
<li><p>Description: TrackMe records flapping statuses events based on the entity priority, this metric handles high priority entities swtiching to a red status</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/service_template9.png"><img alt="service_template7.png" class="with-border align-center" src="_images/service_template9.png" style="width: 500px;" /></a>
<a class="with-border reference internal image-reference" href="_images/service_template10.png"><img alt="service_template10.png" class="with-border align-center" src="_images/service_template10.png" style="width: 500px;" /></a>
<p><em>Click next until you can hit the finish button.</em></p>
<p><strong>TrackMe:high_red</strong></p>
<ul class="simple">
<li><p>Title: TrackMe:medium_red</p></li>
<li><p>Description: TrackMe records flapping statuses events based on the entity priority, this metric handles medium priority entities swtiching to a red status</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/service_template11.png"><img alt="service_template11.png" class="with-border align-center" src="_images/service_template11.png" style="width: 500px;" /></a>
<a class="with-border reference internal image-reference" href="_images/service_template12.png"><img alt="service_template12.png" class="with-border align-center" src="_images/service_template12.png" style="width: 500px;" /></a>
<p><em>Click next until you can hit the finish button.</em></p>
<p><strong>TrackMe:low_red</strong></p>
<ul class="simple">
<li><p>Title: TrackMe:low_red</p></li>
<li><p>Description: TrackMe records flapping statuses events based on the entity priority, this metric handles low priority entities swtiching to a red status</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/service_template13.png"><img alt="service_template13.png" class="with-border align-center" src="_images/service_template13.png" style="width: 500px;" /></a>
<a class="with-border reference internal image-reference" href="_images/service_template14.png"><img alt="service_template14.png" class="with-border align-center" src="_images/service_template14.png" style="width: 500px;" /></a>
<p><em>Click next until you can hit the finish button.</em></p>
<p><em>Note: This pseudo service can optionally be deleted post service template creation, but you can as well keep it to allow future service creation based on this service rather using the service template feature.</em></p>
</div>
<div class="section" id="step-5-create-a-service-template">
<h2>Step 5: create a service template<a class="headerlink" href="#step-5-create-a-service-template" title="Permalink to this headline">¶</a></h2>
<p><strong>Now that we have a pseudo service, we can create a service template based on it, the service template would be used to create and link new services:</strong></p>
<ul class="simple">
<li><p>Click on Configure / Services Templates</p></li>
<li><p>Use the previously created pseudo service to create a new service template</p></li>
<li><p>Any future customization of this service template will be reflected to all linked services (which can be controlled when modifications on the template are made)</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/service_template_create.png"><img alt="service_template_create.png" class="with-border align-center" src="_images/service_template_create.png" style="width: 500px;" /></a>
</div>
<div class="section" id="step-6-fine-tune-thresholds">
<h2>Step 6: fine tune thresholds<a class="headerlink" href="#step-6-fine-tune-thresholds" title="Permalink to this headline">¶</a></h2>
<p>On the service template, you can fine tune some of the thresholds, essentially regarding the status flapping metrics.</p>
<p>The thresholds related to the maximal lagging values and evencount would be fine tuned on a per service basis.</p>
<p><strong>Fine tuning the flapping statuses:</strong></p>
<p>At the minimum, if TrackMe detects an issue with the entity, the ITSI service should reflect the issue on the TrackMe notation, such as:</p>
<a class="with-border reference internal image-reference" href="_images/service_template_thresholds.png"><img alt="service_template_thresholds.png" class="with-border align-center" src="_images/service_template_thresholds.png" style="width: 1000px;" /></a>
<p><strong>Make sure to apply the same thresholds per entity, and reflect the same change on medium_red and low_red metrics. (with potentially different values if necessary)</strong></p>
<p>When business and technical services are created, you potentially can fine tune the other metrics up to the requirements, note that TrackMe settings for that or these entities composing the service are reflected in anyway using the flapping statuses metrics.</p>
</div>
<div class="section" id="final-create-services-business-and-technical-services-using-trackme-kpis">
<h2>Final: Create services business and technical services using TrackMe KPIs<a class="headerlink" href="#final-create-services-business-and-technical-services-using-trackme-kpis" title="Permalink to this headline">¶</a></h2>
<p>Finally, the ITSI integration is ready and you can create new services using the template service or manually cloning the pseudo service we created earlier.</p>
<p><strong>Once you created and activated a new service, ITSI will start to report TrackMe KPIs after a short moment: (metrics are generated every 5 minutes)</strong></p>
<a class="with-border reference internal image-reference" href="_images/itsi_example1.png"><img alt="itsi_example1.png" class="with-border align-center" src="_images/itsi_example1.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/itsi_example2.png"><img alt="itsi_example2.png" class="with-border align-center" src="_images/itsi_example2.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/itsi_customer_example1.png"><img alt="itsi_customer_example1.png" class="with-border align-center" src="_images/itsi_customer_example1.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/itsi_customer_example2.png"><img alt="itsi_customer_example2.png" class="with-border align-center" src="_images/itsi_customer_example2.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/itsi_customer_example3.png"><img alt="itsi_customer_example3.png" class="with-border align-center" src="_images/itsi_customer_example3.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/itsi_customer_example4.png"><img alt="itsi_customer_example4.png" class="with-border align-center" src="_images/itsi_customer_example4.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/itsi_customer_example5.png"><img alt="itsi_customer_example5.png" class="with-border align-center" src="_images/itsi_customer_example5.png" style="width: 1200px;" /></a>
<p><strong>TrackMe acts now transparently as a companion of ITSI, you will continue to manage data sources in TrackMe, create Elastic sources, manage states and max lagging values which are reflected naturally in ITSI.</strong></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="cribl_integration.html" class="btn btn-neutral float-right" title="Cribl LogStream integration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="userguide.html" class="btn btn-neutral float-left" title="User guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018-2021, TrackMe Limited, U.K..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>