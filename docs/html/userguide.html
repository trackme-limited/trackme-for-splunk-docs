

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>User guide &mdash; TrackMe 1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Splunk ITSI integration" href="itsi_integration.html" />
    <link rel="prev" title="Installation" href="configuration.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> TrackMe
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation and configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="compatibility.html">Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment &amp; Upgrades</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">User guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#your-first-steps-with-trackme">Your first steps with TrackMe</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#access-trackme-main-interface">Access TrackMe main interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#main-navigation-tabs">Main navigation tabs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-sources-tracking-and-features">Data Sources tracking and features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#data-source-main-screen">Data Source main screen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-source-screen-tabs">Data source screen tabs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#overview-data-source-tab">Overview data source tab</a></li>
<li class="toctree-l4"><a class="reference internal" href="#outlier-detection-overview">Outlier detection overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#outlier-detection-configuration">Outlier detection configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-sampling">Data sampling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-parsing-quality">Data parsing quality</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lagging-performances">Lagging performances</a></li>
<li class="toctree-l4"><a class="reference internal" href="#status-flipping">Status flipping</a></li>
<li class="toctree-l4"><a class="reference internal" href="#status-message">Status message</a></li>
<li class="toctree-l4"><a class="reference internal" href="#audit-changes">Audit changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#action-buttons">Action buttons</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#data-hosts-tracking-and-features">Data Hosts tracking and features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#data-host-monitoring">Data host monitoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="#particularities-of-data-hosts-monitoring">Particularities of data hosts monitoring</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#metric-hosts-tracking-and-features">Metric Hosts tracking and features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#metric-host-monitoring">Metric host monitoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="#particularities-of-metric-hosts-monitoring">Particularities of metric hosts monitoring</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#entities-main-setting-update-screens">Entities main setting update screens</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-source-main-settings-update">Data source main settings update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-hosts-main-settings-update">Data hosts main settings update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metric-hosts-main-settings-update">Metric hosts main settings update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#main-settings-update-interface-features">Main settings update interface features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#hybrid-trackers">Hybrid trackers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction-to-hybrid-trackers">Introduction to Hybrid Trackers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hybrid-trackers-for-local-data-sets-with-a-custom-key">Hybrid trackers for local data sets with a custom key</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-our-hybrid-local-tracker-with-a-region-custom-key">Creating our hybrid local tracker with a region custom key</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hybrid-trackers-for-remote-splunk-deployment-monitoring">Hybrid trackers for remote Splunk deployment monitoring</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-the-hybrid-remote-tracker">Creating the hybrid remote tracker</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#elastic-sources">Elastic sources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction-to-elastic-sources">Introduction to Elastic sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#accessing-the-elastic-source-creation-ui">Accessing the Elastic source creation UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#elastic-source-example-1-source-metadata">Elastic source example 1: source Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#elastic-source-example-2-custom-indexed-fields">Elastic source example 2: custom indexed fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#elastic-source-example-3-tracking-lookups-update-and-number-of-records">Elastic source example 3: tracking lookups update and number of records</a></li>
<li class="toctree-l3"><a class="reference internal" href="#elastic-source-example-4-remote-searches">Elastic source example 4: remote searches</a></li>
<li class="toctree-l3"><a class="reference internal" href="#elastic-source-example-1-creation">Elastic source example 1: creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#elastic-source-example-2-creation">Elastic source example 2: creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#elastic-source-example-3-creation">Elastic source example 3: creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#elastic-source-example-4-creation">Elastic source example 4: creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#elastic-sources-under-the-hood">Elastic sources under the hood</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#elastic-sources-shared">Elastic sources shared</a></li>
<li class="toctree-l4"><a class="reference internal" href="#elastic-sources-dedicated">Elastic sources dedicated</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#remove-elastic-sources">Remove Elastic Sources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#outliers-detection-and-behaviour-analytic">Outliers detection and behaviour analytic</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#behaviour-analytic-mode">Behaviour Analytic Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-outliers-detection">Using Outliers detection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simulating-and-adjusting-outliers-detection">Simulating and adjusting Outliers detection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#saving-the-configuration">Saving the configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-sampling-and-event-formats-recognition">Data sampling and event formats recognition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-sampling-obfuscation-mode">Data Sampling obfuscation mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#summary-statuses">Summary statuses</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manage-data-sampling">Manage data sampling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#view-latest-sample-events">View latest sample events</a></li>
<li class="toctree-l4"><a class="reference internal" href="#view-builtin-rules">View builtin rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#manage-custom-rules">Manage custom rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-sampling-engine-now">Run sampling engine now</a></li>
<li class="toctree-l4"><a class="reference internal" href="#update-records-sample">Update records/sample</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clear-state-and-run-sampling">Clear state and run sampling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#disable-data-sampling-for-a-given-data-source">Disable Data sampling for a given data source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#data-sampling-audit-dashboard">Data sampling Audit dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-sampling-example-1-monitor-a-specific-format">Data sampling example 1: monitor a specific format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-sampling-example-2-track-pii-data-card-holders">Data sampling example 2: track PII data card holders</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#smart-status">Smart Status</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#smart-status-introduction">Smart Status Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#smart-status-within-the-ui">Smart Status within the UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#smart-status-from-external-third-party">Smart Status from external third party</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#alerts-tracking">Alerts tracking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#alerts-tracking-main-screen">Alerts tracking main screen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alerts-tracking-out-of-the-box-alerts">Alerts tracking: out of the box alerts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alerts-tracking-custom-alerts">Alerts tracking: custom alerts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alerts-tracking-trackme-alert-actions">Alerts tracking: TrackMe alert actions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#alert-action-trackme-auto-acknowledge">Alert action: TrackMe auto acknowledge</a></li>
<li class="toctree-l4"><a class="reference internal" href="#alert-action-trackme-smart-status">Alert action: Trackme Smart Status</a></li>
<li class="toctree-l4"><a class="reference internal" href="#alert-action-trackme-free-style-rest-call">Alert action: TrackMe free style rest call</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#alerts-acknowledgment-within-the-ui">Alerts acknowledgment within the UI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#priority-management">Priority management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#priority-levels">Priority levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="#priority-feature">Priority feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modify-the-priority">Modify the priority</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bulk-update-the-priority">Bulk update the priority</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#monitored-state-enable-disable-buttons">Monitored state (enable / disable buttons)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#week-days-monitoring">Week days monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hours-ranges-monitoring">Hours ranges monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="#monitoring-level">Monitoring level</a></li>
<li class="toctree-l2"><a class="reference internal" href="#maximal-lagging-value">Maximal lagging value</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lagging-classes">Lagging classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lagging-classes-behaviour-for-data-sources">Lagging classes behaviour for data sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lagging-classes-behaviour-for-data-hosts">Lagging classes behaviour for data hosts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lagging-classes-example-based-on-the-priority">Lagging classes example based on the priority</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#allowlisting-blocklisting">Allowlisting &amp; Blocklisting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resetting-collections-to-factory-defaults">Resetting collections to factory defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deletion-of-entities">Deletion of entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#icon-dynamic-messages">Icon dynamic messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logical-groups-clusters">Logical groups (clusters)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#logical-groups-feature">Logical groups feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logical-group-example">Logical group example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-a-new-logical-group">Create a new logical group</a></li>
<li class="toctree-l3"><a class="reference internal" href="#associate-to-an-existing-logical-group">Associate to an existing logical group</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-alerting-is-handled-once-the-logical-group-is-created-with-enough-members">How alerting is handled once the logical group is created with enough members</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#member-of-logical-group-is-red-but-logical-group-is-green">Member of logical group is red but logical group is green</a></li>
<li class="toctree-l4"><a class="reference internal" href="#member-of-logical-group-is-red-and-logical-group-is-red">Member of logical group is red and logical group is red</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#remove-association-from-a-logical-group">Remove association from a logical group</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#alerting-policy-for-data-hosts">Alerting policy for data hosts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tags">Tags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tags-policies">Tags policies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-a-new-tags-policy">Create a new tags policy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tag-policy-multiple-matching">Tag policy multiple matching</a></li>
<li class="toctree-l4"><a class="reference internal" href="#update-and-delete-tags-policies">Update and delete tags policies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#manual-tags">Manual tags</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#adding-new-tags">Adding new tags</a></li>
<li class="toctree-l4"><a class="reference internal" href="#updating-tags">Updating tags</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clearing-tags">Clearing tags</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-identity-card">Data identity card</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-identity-global-identity-card">Data identity: global identity card</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-identity-wildcard-matching">Data identity: wildcard matching</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#step-1-create-the-identity-card-using-the-trackme-spl-command">Step 1: Create the Identity card using the <code class="docutils literal notranslate"><span class="pre">trackme</span></code> SPL command</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-2-associate-the-identity-card-using-the-trackme-spl-command">Step 2: Associate the Identity card using the <code class="docutils literal notranslate"><span class="pre">trackme</span></code> SPL command</a></li>
<li class="toctree-l4"><a class="reference internal" href="#removing-a-wildcard-association-using-the-trackme-spl-command">Removing a wildcard association using the <code class="docutils literal notranslate"><span class="pre">trackme</span></code> SPL command</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#data-identity-workflow">Data identity: workflow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#auditing-changes">Auditing changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#flipping-statuses-auditing">Flipping statuses auditing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ops-queues-center">Ops: Queues center</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ops-parsing-view">Ops: Parsing view</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#splunk-8-magic-props-configuration">Splunk 8 magic props configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#connected-experience-dashboard-for-splunk-mobile-apple-tv">Connected experience dashboard for Splunk Mobile &amp; Apple TV</a></li>
<li class="toctree-l2"><a class="reference internal" href="#team-working-with-trackme-alerts-and-audit-changes-flow-tracker">Team working with trackMe alerts and audit changes flow tracker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#enrichment-tags">Enrichment tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="#maintenance-mode">Maintenance mode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#enabling-or-extending-the-maintenance-mode">Enabling or extending the maintenance mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#disabling-the-maintenance-mode">Disabling the maintenance mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scheduling-a-maintenance-window">Scheduling a maintenance window</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#backup-and-restore">Backup and restore</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#backup-and-restore-dashboard">Backup and Restore dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="#automatic-backup">Automatic backup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#on-demand-backup">On demand backup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list-backup-archives-available">List backup archives available</a></li>
<li class="toctree-l3"><a class="reference internal" href="#purge-older-backup-archive">Purge older backup archive</a></li>
<li class="toctree-l3"><a class="reference internal" href="#restoring-a-backup">Restoring a backup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dry-run-mode">dry_run mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#target-for-restore">target for restore</a></li>
<li class="toctree-l4"><a class="reference internal" href="#restoring-everything">Restoring everything</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="itsi_integration.html">Splunk ITSI integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="cribl_integration.html">Cribl LogStream integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitor_forwarders.html">Monitor Splunk instances forwarding</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest_api_reference.html">REST API Reference Manual</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Troubleshoot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versioning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TrackMe</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>User guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/userguide.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="user-guide">
<h1>User guide<a class="headerlink" href="#user-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="your-first-steps-with-trackme">
<h2>Your first steps with TrackMe<a class="headerlink" href="#your-first-steps-with-trackme" title="Permalink to this headline">¶</a></h2>
<div class="section" id="access-trackme-main-interface">
<h3>Access TrackMe main interface<a class="headerlink" href="#access-trackme-main-interface" title="Permalink to this headline">¶</a></h3>
<p><strong>When you open the application, you access by default to the main TrackMe UI and especially to the data sources tracking tab, if the tracker reports have already been executed at least once, the application will expose the data that was discovered in your environment:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img0011.png"><img alt="img/first_steps/img001" class="with-border align-center" src="_images/img0011.png" style="width: 1200px;" /></a>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>If the UI is empty and no data sources are showing up:</strong></p>
<ul class="simple">
<li><p>You can wait for the short term trackers execution which are scheduled to run every 5 minutes</p></li>
<li><p>Or manually run the data sources tracker by clicking on the button “Run: short term tracker now” (we will come back to the tracker notion later in this guide)</p></li>
</ul>
</div>
</div>
<div class="section" id="main-navigation-tabs">
<h3>Main navigation tabs<a class="headerlink" href="#main-navigation-tabs" title="Permalink to this headline">¶</a></h3>
<p><strong>Now that TrackMe is deployed, and it discovered data available in your environment, let’s review the main tabs provided in the UI:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img001_tabs.png"><img alt="img/first_steps/img001_tabs" class="with-border align-center" src="_images/img001_tabs.png" style="width: 1000px;" /></a>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATA</span> <span class="pre">SOURCES</span> <span class="pre">TRACKING</span></code> shows the tracking of data sources, by default a data source is a breakdown of your data on a per <code class="docutils literal notranslate"><span class="pre">index</span> <span class="pre">+</span> <span class="pre">&quot;:&quot;</span> <span class="pre">+</span> <span class="pre">sourcetype</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATA</span> <span class="pre">HOSTS</span> <span class="pre">TRACKING</span></code> shows data discovered for each <code class="docutils literal notranslate"><span class="pre">host</span> <span class="pre">sending</span> <span class="pre">events</span></code> to Splunk</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">METRIC</span> <span class="pre">HOSTS</span> <span class="pre">TRACKING</span></code> shows metrics discovered for each <code class="docutils literal notranslate"><span class="pre">host</span> <span class="pre">sending</span> <span class="pre">metrics</span></code> to Splunk</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVESTIGATE</span> <span class="pre">STATUS</span> <span class="pre">FLIPPING</span></code> shows the detection of an entity switching from a state, example green, to another state like red</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVESITAGE</span> <span class="pre">AUDIT</span> <span class="pre">CHANGES</span></code> shows all changes performed within the UI for auditing and review purposes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TRACKING</span> <span class="pre">ALERTS</span></code> shows alerts activity, allows managing and creating new custom alerts adapated to TrackMe context</p></li>
</ul>
</div>
<div class="section" id="data-sources-tracking-and-features">
<h3>Data Sources tracking and features<a class="headerlink" href="#data-sources-tracking-and-features" title="Permalink to this headline">¶</a></h3>
<div class="section" id="data-source-main-screen">
<h4>Data Source main screen<a class="headerlink" href="#data-source-main-screen" title="Permalink to this headline">¶</a></h4>
<p><strong>Let’s click on any entry in the table:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img0021.png"><img alt="img/first_steps/img002" class="with-border align-center" src="_images/img0021.png" style="width: 1200px;" /></a>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you do not see the full window (called modal window), review your screen resolution settings, TrackMe requires a minimal high enough resolution when navigating through the app*</p>
</div>
<p>The modal window “open-up” is the user main interaction with TrackMe, depending on the context different information, charts, calculations and options are provided.</p>
<p><strong>In the context of the data sources tracking, let’s have a deeper look at top part of the window:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img003.png"><img alt="img/first_steps/img003" class="with-border align-center" src="_images/img003.png" style="width: 1200px;" /></a>
<p><strong>Let’s review these information:</strong></p>
<p><em>group 1 left screen</em></p>
<img alt="img/first_steps/img004" class="with-border align-center" src="_images/img004.png" />
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data_index</span></code> is the name of the Splunk index where the data resides</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_sourcetype</span></code> is the Splunk sourcetype for this entity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lag</span> <span class="pre">event</span> <span class="pre">/</span> <span class="pre">lag</span> <span class="pre">ingestion:</span> <span class="pre">([D+]HH:MM:SS)</span></code> exposes the two main lagging metrics handled by TrackMe, the lag from the event point of view, and the lag from the ingestion point of view, we will come back to that very soon</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_last_time_seen</span></code> is the last date time TrackMe has detected data available for this data source, from the event time stamp point of view</p></li>
</ul>
<p><em>group 2 middle screen</em></p>
<img alt="img/first_steps/img005" class="with-border align-center" src="_images/img005.png" />
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data_last_ingest</span></code> is the last date time TrackMe has detected data ingested by Splunk for the data source, this can differ from the very last event available in the data source (more after)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_max_lag_allowed</span></code> is the value in seconds that TrackMe will use as the main information to define the status of the data source, by default it is defined to 1 hour (3600 seconds)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_monitored_state</span></code> is a flag which tells TrackMe that this data source should be actively monitored, this is “enabled” by default and be defined within the UI to “disabled” (the red “Disable” button in the entity window)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_monitoring_level</span></code> is a flag which tells TrackMe how to take into account other sourcetypes available in that same index when defining the current status of the entity</p></li>
</ul>
<p><em>group 3 right screen</em></p>
<img alt="img/first_steps/img006" class="with-border align-center" src="_images/img006.png" />
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">latest_flip_time</span></code> is the latest date time a change was detected in the state of the entity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">latest_flip_states</span></code> is the state to which it moved at that time</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">state</span></code> is the current state, there are different states: green / orange / blue / grey / red (more explanations to come)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">priority</span></code> represents the priority of the entity, by default all entities are added as “medium”, priority is used in different parts of the app and alerts, there are 3 level of priority: low / medium / high</p></li>
</ul>
<p><em>group 4 bottom</em></p>
<a class="with-border reference internal image-reference" href="_images/img007.png"><img alt="img/first_steps/img007" class="with-border align-center" src="_images/img007.png" style="width: 1200px;" /></a>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Identity</span> <span class="pre">documentation</span> <span class="pre">card</span></code> is a feature that allows you create an information card (hyperlink and a text note), and link that card to any number of data sources.</p></li>
<li><p>By default, no identity card is defined which is exposed by this message, if an identity card is created and linked to the entity, the message will turn into a link that once clicked exposes in a new window the context of the card</p></li>
<li><p>Use this feature to quickly reference the main information for someone accessing to TrackMe and when there is an issue on the data source, which would provide a link to whatever you want (your Confluence, etc) and a quick help text. (at least a hyperlink or a text note must be defined)</p></li>
</ul>
<p>See <a class="reference internal" href="#data-identity-card"><span class="std std-ref">Data identity card</span></a> for more details about the feature.</p>
</div>
<div class="section" id="data-source-screen-tabs">
<h4>Data source screen tabs<a class="headerlink" href="#data-source-screen-tabs" title="Permalink to this headline">¶</a></h4>
<p><strong>Let’s have a look now at next part of the modal window:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img008.png"><img alt="img/first_steps/img008" class="with-border align-center" src="_images/img008.png" style="width: 1200px;" /></a>
<p><strong>Starting by describing the tabs available in this window:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img009.png"><img alt="img/first_steps/img009" class="with-border align-center" src="_images/img009.png" style="width: 1200px;" /></a>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Overview</span> <span class="pre">data</span> <span class="pre">source</span></code> is the current view that exposes the main information and metrics for this entity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Outlier</span> <span class="pre">detection</span> <span class="pre">overview</span></code> exposes the event outliers detection chart</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Outlier</span> <span class="pre">detection</span> <span class="pre">configuration</span></code> provides different options to configure the outliers detection</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">sampling</span></code> shows the results from the data sampling &amp; event format recognition engine</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">parsing</span> <span class="pre">quality</span></code> exposes indexing time parsing issues such as truncation issues for this sourcetype, if any.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Lagging</span> <span class="pre">performances</span></code> exposes the event lag and ingestion lag recorded metrics in the metric index</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Status</span> <span class="pre">flipping</span></code> exposes all status flipping events that were stored in the summary index</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Status</span> <span class="pre">message</span></code> exposes the current status of the data source in a human friendly manner</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Audit</span> <span class="pre">changes</span></code> exposes all changes recorded in the audit KVstore for that entity</p></li>
</ul>
</div>
<div class="section" id="overview-data-source-tab">
<h4>Overview data source tab<a class="headerlink" href="#overview-data-source-tab" title="Permalink to this headline">¶</a></h4>
<a class="with-border reference internal image-reference" href="_images/img010.png"><img alt="img/first_steps/img010" class="with-border align-center" src="_images/img010.png" style="width: 1200px;" /></a>
<p><strong>This screen exposes several single forms with the following calculations:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PERC95</span> <span class="pre">INGESTION</span> <span class="pre">LAG</span></code> is the percentile 95 of the lag ingestion determined for this entity ( <code class="docutils literal notranslate"><span class="pre">_indextime</span> <span class="pre">-</span> <span class="pre">_time</span></code> )</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AVG</span> <span class="pre">INGESTION</span> <span class="pre">LAG</span></code> is the average lag ingestion for that entity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CURRENT</span> <span class="pre">EVENT</span> <span class="pre">LAG</span></code> is the current event lag calculated for this entity ( <code class="docutils literal notranslate"><span class="pre">now()</span> <span class="pre">-</span> <span class="pre">_time</span></code> ), this basically exposes how late this data source compared between now and the very last event in the entity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SLA</span> <span class="pre">PCT</span></code> is the SLA percentage which basically exposes the percent of time that entity has spent in a not green / blue state</p></li>
</ul>
<p>Finally, a chart over time exposes the event count and the ingestion lag for that entity.</p>
</div>
<div class="section" id="outlier-detection-overview">
<h4>Outlier detection overview<a class="headerlink" href="#outlier-detection-overview" title="Permalink to this headline">¶</a></h4>
<a class="with-border reference internal image-reference" href="_images/img011.png"><img alt="img/first_steps/img011" class="with-border align-center" src="_images/img011.png" style="width: 1200px;" /></a>
<p><strong>This screen exposes the events outliers detection results over time, the purpose of the outliers detection is to provide advanced capabilities to detect when the number of events produced in the scope of an entity goes below or above a certain level, which level gets automatically defined upon the historical behaviour of the data.</strong></p>
<p>For this purpose, every time the short term tracker runs, it records different metrics which includes the number of events on per 4 hours time window. (which matches the time frame scope of the short term tracker)</p>
<p>Then in short, a scheduled report runs every hour to perform lower bound and upper bound calculations depending on different configurable factors.</p>
<p>Assuming the outliers detection is enabled, if the workflow detects a significant gap in the event count, and optionally an increase too, the state of the entity will be affected and potentially turn red.</p>
<p><strong>The table at the bottom of the screen provides additional information:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">enable</span> <span class="pre">outlier</span></code> can be true or false and defines if the outliers detection is taken into account for the state definition of that entity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OutlierTimePeriod</span></code> is a time frame period between a list of restricted values, which defines the time period the backend will be looking at during for the lower bound, upper bound and standard deviation calculation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OutlierSpan</span></code> is used when rendering the outliers over time chart and does not influence the detection (for example if a data source emits data every 30 minutes you will want to apply a more relevant value for a better rendering)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isOutlier</span></code> is the current status, a value of 0 indicates that no outliers are currently active for this entity, a value of 1 indicates TrackMe detected outliers currently</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OutlierMinEventCount</span></code> is an optional static value that can be defined for the lower bound, this is useful if you want to statically specific the minimal per 4 hours event count to be accepted</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lower</span> <span class="pre">multiplier</span></code> is a multiplier that is used for the automatic definition of the lower bound, decreasing or increasing will impact the value of the lower bound definition</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">upper</span> <span class="pre">multiplier</span></code> is a multiplier that is used for the automatic definition of the upper bound, decreasing or increasing will impact the value of the upper bound definition</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alert</span> <span class="pre">on</span> <span class="pre">upper</span></code> defines if upper outliers should be taken into account and affect the state if an abnormal number of events is coming in, default is false</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lowerBound</span></code> is the lower threshold, an event count below this value will be considered as outliers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">upperBound</span></code> is the upper threshold, an event count above this value will be considered as outlier, but will only impact the state if the alert on upper is true</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stdev</span></code> is the standard deviation calculated by the workflow for this entity, and is used as the reference for the lower and upper bound calculation associated with the lower and upper multipliers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">avg</span></code> represents the average 4 hours amount of event count for this entity</p></li>
</ul>
<p>See <a class="reference internal" href="#outliers-detection-and-behaviour-analytic"><span class="std std-ref">Outliers detection and behaviour analytic</span></a> for more details about the feature.</p>
</div>
<div class="section" id="outlier-detection-configuration">
<h4>Outlier detection configuration<a class="headerlink" href="#outlier-detection-configuration" title="Permalink to this headline">¶</a></h4>
<a class="with-border reference internal image-reference" href="_images/img012.png"><img alt="img/first_steps/img012" class="with-border align-center" src="_images/img012.png" style="width: 1200px;" /></a>
<p><strong>This is the screen provided to configure the outliers detection for a given entity, which exposes a simulation of the results over time, allowing you to train your settings before they are applied.</strong></p>
<p><strong>On the top part of the screen you will interact with the settings exposes in the previous section:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Enable</span> <span class="pre">Outlier</span> <span class="pre">Detection:</span></code> you can choose to disable the Outliers detection for a given entity, default is enabled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Enable</span> <span class="pre">alert</span> <span class="pre">on</span> <span class="pre">upper</span> <span class="pre">Outlier:</span></code> you can choose to alert on upper outliers detection, default is false</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OutlierMinEventCount</span> <span class="pre">mode:</span></code> you can choose to let the workflow defining dynamically the lower bound value, or define yourself a static threshold if you need it</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OutlierMinEventCount:</span></code> static lower bound value if static threshold is used</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Lower</span> <span class="pre">threshold</span> <span class="pre">multiplier:</span></code> the multiplier for the lower band calculation, must be a numerical value which will impact the lower bound calculation (the lower the multiplier is, the closer to the actual standard deviation the calculation will be)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Upper</span> <span class="pre">threshold</span> <span class="pre">multiplier:</span></code> the multiplier for the upper band calculation, must be a numerical value which will impact the upper bound calculation (the lower the multiplier is, the closer to the actual standard deviation the calculation will be)</p></li>
</ul>
<p><strong>Finally, there are two time related settings to interact with:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img013.png"><img alt="img/first_steps/img013" class="with-border align-center" src="_images/img013.png" style="width: 1200px;" /></a>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">time</span> <span class="pre">period</span> <span class="pre">for</span> <span class="pre">outliers</span> <span class="pre">detection</span></code> defines the time frame TrackMe will be looking at for the outliers calculations (lower/upper bands etc) which is using the recorded metrics every time the short term trackers ran</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">span</span> <span class="pre">for</span> <span class="pre">outliers</span> <span class="pre">rendering</span></code> is an additional setting which impact the graphical rendering within the outliers screen, but not the results of the outliers detection itself</p></li>
</ul>
<p>See <a class="reference internal" href="#outliers-detection-and-behaviour-analytic"><span class="std std-ref">Outliers detection and behaviour analytic</span></a> for more details about the feature.</p>
</div>
<div class="section" id="data-sampling">
<h4>Data sampling<a class="headerlink" href="#data-sampling" title="Permalink to this headline">¶</a></h4>
<p><strong>The data sampling tab exposes the status of the data sampling and format recognition engine:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling001.png"><img alt="img/first_steps/img_data_sampling001.png" class="with-border align-center" src="_images/img_data_sampling001.png" style="width: 1200px;" /></a>
<p>The data sampling message can be:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">green:</span></code> if no anomalies were detected</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blue:</span></code> if the data sampling did not handle this data source yet</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">orange:</span></code> if conditions do not allow to handle this data source, which can be multi-format detected at discovery, or no identifiable event formats (data sampling will be deactivated automatically)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">red:</span></code> if anomalies were detected by the data engine, anomalies can be due to a change in the event format, or multiple events formats detected post discovery</p></li>
</ul>
<p>The button <strong>Manage data sampling</strong> provides summary information about the data samping status and access to data sampling related features:</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling002.png"><img alt="img/first_steps/img_data_sampling002.png" class="with-border align-center" src="_images/img_data_sampling002.png" style="width: 1200px;" /></a>
<p><strong>Quick button access:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">View</span> <span class="pre">latest</span> <span class="pre">sample</span> <span class="pre">events:</span></code> open in search access to the last sample of raw events that were processed (raw events and identified format)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">View</span> <span class="pre">builtin</span> <span class="pre">rules:</span></code> view the builtin rules (builtin rules are regular expressions rules provided by default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Manage</span> <span class="pre">custom</span> <span class="pre">rules:</span></code> view, create and delete custom rules to handle any format that would not be recognized by the builtin rules</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">sampling</span> <span class="pre">engine</span> <span class="pre">now:</span></code> runs the sampling engine now for this data source</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Clear</span> <span class="pre">state</span> <span class="pre">and</span> <span class="pre">run</span> <span class="pre">sampling:</span></code> clears the previously known states and run the sampling engine as it was the first time the engine handles this data source</p></li>
</ul>
<p>See <a class="reference internal" href="#data-sampling-and-event-formats-recognition"><span class="std std-ref">Data sampling and event formats recognition</span></a> for more details about the feature.</p>
</div>
<div class="section" id="data-parsing-quality">
<h4>Data parsing quality<a class="headerlink" href="#data-parsing-quality" title="Permalink to this headline">¶</a></h4>
<p><strong>The data parsing quality screen exposes if there are any indexing time parsing issues found for this sourcetype:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img014.png"><img alt="img/first_steps/img014" class="with-border align-center" src="_images/img014.png" style="width: 1200px;" /></a>
<p><em>Note: for data sources, the scope of indexing time parsing issues happens on the sourcetype level from a Splunk point of view, this means that if there are any parsing issues found for this sourcetype, this can be linked to this data source but as well with any other data source that looks at the same sourcetype.</em></p>
<p><strong>Under normal conditions, this screen should not show any parsing errors, if there are any, these should be fixed.</strong></p>
</div>
<div class="section" id="lagging-performances">
<h4>Lagging performances<a class="headerlink" href="#lagging-performances" title="Permalink to this headline">¶</a></h4>
<p><strong>This screen exposes the event and ingestion lagging metrics that have been recorded each time the short trackers ran, these metrics are stored via a call to the mcollect command and stored into a metric store index:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img015.png"><img alt="img/first_steps/img015" class="with-border align-center" src="_images/img015.png" style="width: 1200px;" /></a>
<p><strong>The following mcatalog search can be used to expose the metrics stored in the metric store and the dimensions:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">mcatalog</span> <span class="n">values</span><span class="p">(</span><span class="n">metric_name</span><span class="p">)</span> <span class="n">values</span><span class="p">(</span><span class="n">_dims</span><span class="p">)</span> <span class="n">where</span> <span class="n">index</span><span class="o">=*</span> <span class="n">metric_name</span><span class="o">=</span><span class="n">trackme</span><span class="o">.*</span>
</pre></div>
</div>
<p><strong>The main dimensions are:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">object_category</span></code> which represents the type of entities, being data_source or data_host</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">object</span></code> which is the entity unique identifier, data_name for data sources, data_host for data hosts</p></li>
</ul>
</div>
<div class="section" id="status-flipping">
<h4>Status flipping<a class="headerlink" href="#status-flipping" title="Permalink to this headline">¶</a></h4>
<p><strong>This screen exposes all the flipping status events that were recorded for that entity during the time period that is selected:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img017.png"><img alt="img/first_steps/img017" class="with-border align-center" src="_images/img017.png" style="width: 1200px;" /></a>
<p><strong>Key information:</strong></p>
<ul class="simple">
<li><p>Anytime an entity changes from a state to another, a record is generated and indexed in the summary index</p></li>
<li><p>When an entity is first added to the collection during its discovery, the origin state will be discovered</p></li>
<li><p>The target state is the state (green / red and so forth) that the entity has switched to</p></li>
</ul>
</div>
<div class="section" id="status-message">
<h4>Status message<a class="headerlink" href="#status-message" title="Permalink to this headline">¶</a></h4>
<p><strong>This screen exposes a human friendly message describing the current state of the entity, depending on the conditions the message will appear as green, red, orange or blue:</strong></p>
<p><em>example of a green state:</em></p>
<a class="with-border reference internal image-reference" href="_images/img018.png"><img alt="img/first_steps/img018" class="with-border align-center" src="_images/img018.png" style="width: 1200px;" /></a>
<p><em>example of a red state due to lagging conditions not met:</em></p>
<a class="with-border reference internal image-reference" href="_images/img019.png"><img alt="img/first_steps/img019" class="with-border align-center" src="_images/img019.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="audit-changes">
<h4>Audit changes<a class="headerlink" href="#audit-changes" title="Permalink to this headline">¶</a></h4>
<p><strong>This final screen exposes all changes that were applied within the UI to that entity which are systematically recorded in the audit KVstore:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img021.png"><img alt="img/first_steps/img021" class="with-border align-center" src="_images/img021.png" style="width: 1200px;" /></a>
<p>See <a class="reference internal" href="#auditing-changes"><span class="std std-ref">Auditing changes</span></a> for more details about the feature.</p>
</div>
<div class="section" id="action-buttons">
<h4>Action buttons<a class="headerlink" href="#action-buttons" title="Permalink to this headline">¶</a></h4>
<p><strong>Finally, the bottom part of the screen provides different buttons which lead to different actions:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img022.png"><img alt="img/first_steps/img022" class="with-border align-center" src="_images/img022.png" style="width: 1200px;" /></a>
<p><strong>Actions:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Refresh</span></code> will refresh all values related to this entity, it will actually run a specific version of the tracker and update the KVstore record of this data source. Charts and other calculations are refreshed as well.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Smart</span> <span class="pre">Status</span></code> is a powerful TrackMe REST API endpoint that does automated analysis and conditional correlations to provide an advanced status of the entity, and fast the investigaton of an issue root cause.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Acknowledge</span> <span class="pre">alert</span></code> can only be clicked if the data source is effectively in a red state, acknowledging an alert prevent the out of the box alerts from triggering a new alert for this entity until the acknowledgment expires.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Enable</span></code> can only be clicked if the monitoring state is disabled, if clicked and confirmed, the value of the field <code class="docutils literal notranslate"><span class="pre">data_monitored_state</span></code> will switch from disabled to enabled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Disable</span></code> opposite of the previous</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Modify</span></code> provides access to the unified modification window which allows interacting with different settings related to this entity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Search</span></code> opens a search window in a new tab for that entity</p></li>
</ul>
<p>See <a class="reference internal" href="#alerts-tracking"><span class="std std-ref">Alerts tracking</span></a> for more details about the acknowledgment feature and alert related configurations</p>
<p>See <a class="reference internal" href="#data-source-main-settings-update"><span class="std std-ref">Data source main settings update</span></a> for more details about the unified update UI for data sources</p>
</div>
</div>
<div class="section" id="data-hosts-tracking-and-features">
<h3>Data Hosts tracking and features<a class="headerlink" href="#data-hosts-tracking-and-features" title="Permalink to this headline">¶</a></h3>
<p>Rather than duplicating all the previous explanations, let’s expose the differences between the data sources and data hosts tracking.</p>
<div class="section" id="data-host-monitoring">
<h4>Data host monitoring<a class="headerlink" href="#data-host-monitoring" title="Permalink to this headline">¶</a></h4>
<p>Data hosts monitoring does data discovery on a per host basis, relying on the <code class="docutils literal notranslate"><span class="pre">Splunk</span> <span class="pre">host</span> <span class="pre">Metadata</span></code>.</p>
<p>To achieve this, TrackMe uses tstats based queries to retrieve and record valuable Metadata information, in a simplistic form this is very similar to the following query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">tstats</span> <span class="n">count</span><span class="p">,</span> <span class="n">values</span><span class="p">(</span><span class="n">sourcetype</span><span class="p">)</span> <span class="n">where</span> <span class="n">index</span><span class="o">=*</span> <span class="n">by</span> <span class="n">host</span>
</pre></div>
</div>
</div>
<div class="section" id="particularities-of-data-hosts-monitoring">
<h4>Particularities of data hosts monitoring<a class="headerlink" href="#particularities-of-data-hosts-monitoring" title="Permalink to this headline">¶</a></h4>
<p><strong>The features are almost equivalents between data sources and data hosts, with a few exceptions:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">state</span> <span class="pre">condition:</span></code> the data host entity state depends on the global data host alerting policy (which is defined globally and can be overriden on a per host basis)</p></li>
<li><p>Depending on the policy, he host state will turn red if either no more sourcetypes are generating data (track per host policy), or any of the sourcetypes monitored for the host has turned red (track per sourcetype policy)</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">allowlists</span> <span class="pre">and</span> <span class="pre">blocklists</span></code> provide additional granularity to define what data has to be included or is excluded during the searches</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Outliers</span> <span class="pre">detection</span></code> is available for data hosts too and would help detecting significant changes such as a major sourcetype that is not ingested anymore</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logical</span> <span class="pre">group</span></code>: a data host can be part of a logical group, this feature is useful for example to handle a couple of active / passive entities (example with firewalls) where the passive entity will not be generating any data actively</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">object</span> <span class="pre">tags</span></code>: this is an additional feature to data hosts and metric hosts that allows looking against a third party lookup, such as your CMDB data stored in Splunk, or the Splunk Enterprise Security assets knowledge, to provide an active link and access quickly these enrichment information</p></li>
</ul>
<p>See <a class="reference internal" href="#logical-groups-clusters"><span class="std std-ref">Logical groups (clusters)</span></a> for more details on this feature</p>
<p>See <a class="reference internal" href="#enrichment-tags"><span class="std std-ref">Enrichment tags</span></a> for more details om this feature</p>
<p><strong>Additionally, if there has been indexes migrations, or if one or more sourcetypes have been decomissioned, this will affect the state of a given host if the alert policy is defined to track per sourcetype, you can reset the knowledge of indexes and sourcetypes on a per host basis via the reset button:</strong></p>
<a class="with-border reference internal image-reference" href="_images/data_host_reset.png"><img alt="img/first_steps/data_host_reset" class="with-border align-center" src="_images/data_host_reset.png" style="width: 1200px;" /></a>
</div>
</div>
<div class="section" id="metric-hosts-tracking-and-features">
<h3>Metric Hosts tracking and features<a class="headerlink" href="#metric-hosts-tracking-and-features" title="Permalink to this headline">¶</a></h3>
<p>Metric hosts tracking is the third main notion in TrackMe, and deals with tracking hosts sending metrics to the Splunk metric store, let’s expose the feature particularities.</p>
<div class="section" id="metric-host-monitoring">
<h4>Metric host monitoring<a class="headerlink" href="#metric-host-monitoring" title="Permalink to this headline">¶</a></h4>
<p>The metric hosts feature tracks all metrics send to the Splunk metric store on a per host basis.</p>
<p>In a very simplistic form, the notion is similar to performing a search looking at all metrics with mstats on a per host basis and within a short time frame:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">mstats</span> <span class="n">latest</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span> <span class="k">as</span> <span class="n">value</span> <span class="n">where</span> <span class="n">index</span><span class="o">=*</span> <span class="n">metric_name</span><span class="o">=</span><span class="s2">&quot;*&quot;</span> <span class="n">by</span> <span class="n">metric_name</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">host</span> <span class="n">span</span><span class="o">=</span><span class="mi">1</span><span class="n">s</span>
</pre></div>
</div>
<p>Then, the application groups all metrics on per metric metric category (the first metric name segment) and a per host basis.</p>
</div>
<div class="section" id="particularities-of-metric-hosts-monitoring">
<h4>Particularities of metric hosts monitoring<a class="headerlink" href="#particularities-of-metric-hosts-monitoring" title="Permalink to this headline">¶</a></h4>
<p><strong>Compared to data sources and data hosts tracking, metric hosts tracking provides a similar level of features, with a few exceptions:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">state</span> <span class="pre">condition:</span></code> the metric host state is conditioned by the availability of each metric category that was discovered for that entity</p></li>
<li><p>Shall a metric category stop from being emitted, the state will be affected accordingly</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">allowlists</span> <span class="pre">and</span> <span class="pre">blocklists</span></code> provide additional granularity to define the include and exclude conditions of the metric discovery</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Outliers</span> <span class="pre">detection</span></code> is not available for metrics hosts</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logical</span> <span class="pre">group</span></code>: a metric host can be part of a logical group, this feature is useful for example to handle a couple of active / passive entities (example with firewalls) where the passive entity will not be generating any metrics actively</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">object</span> <span class="pre">tags</span></code>: this is an additional feature to data hosts and metric hosts that allows looking against a third party lookup, such as your CMDB data stored in Splunk, or the Splunk Enterprise Security assets knowledge, to provide an active link and access quickly these enrichment information</p></li>
<li><p>Metric hosts tracking relies on the <code class="docutils literal notranslate"><span class="pre">default</span> <span class="pre">max</span> <span class="pre">lag</span> <span class="pre">allowed</span></code> per <code class="docutils literal notranslate"><span class="pre">metric</span> <span class="pre">category</span></code> which is defined by default to 5 minutes (300 seconds) and can be managed by creating <code class="docutils literal notranslate"><span class="pre">metric</span> <span class="pre">SLA</span> <span class="pre">policies</span></code></p></li>
<li><p>The entity screen provides some metric specific search options to provide insights against these specific entities and their metrics</p></li>
</ul>
<p><strong>Additionally, if a metric category stops being emitted this affects the global status of the entity, if these metrics are decomissioned you can reset the host metrics knowledge:</strong></p>
<a class="with-border reference internal image-reference" href="_images/metric_host_reset.png"><img alt="img/first_steps/metric_host_reset" class="with-border align-center" src="_images/metric_host_reset.png" style="width: 1200px;" /></a>
<p>Triggering this action will remove the current knowledge of metric categories for this entity only and trigger a fresh discovery without losing additional settings like the priority.</p>
<p>See <a class="reference internal" href="#logical-groups-clusters"><span class="std std-ref">Logical groups (clusters)</span></a> for more details on this feature</p>
<p>See <a class="reference internal" href="#enrichment-tags"><span class="std std-ref">Enrichment tags</span></a> for more details om this feature</p>
</div>
</div>
</div>
<div class="section" id="entities-main-setting-update-screens">
<h2>Entities main setting update screens<a class="headerlink" href="#entities-main-setting-update-screens" title="Permalink to this headline">¶</a></h2>
<p><strong>For each type of entities, a main settings screen update is available by clicking on the modify button when looking at a specific entity:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img023.png"><img alt="img/first_steps/img023" class="with-border align-center" src="_images/img023.png" style="width: 800px;" /></a>
<p>These interfaces are called unified as their main purpose is to provide a central place in the UI where the modification of the main key parameters would be achieved.</p>
<p>In this screens, you will define the priority level assignment, modify the lagging policy, manage logical groups, etc.</p>
<div class="section" id="data-source-main-settings-update">
<h3>Data source main settings update<a class="headerlink" href="#data-source-main-settings-update" title="Permalink to this headline">¶</a></h3>
<a class="with-border reference internal image-reference" href="_images/img024.png"><img alt="img/first_steps/img024" class="with-border align-center" src="_images/img024.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="data-hosts-main-settings-update">
<h3>Data hosts main settings update<a class="headerlink" href="#data-hosts-main-settings-update" title="Permalink to this headline">¶</a></h3>
<a class="with-border reference internal image-reference" href="_images/img025.png"><img alt="img/first_steps/img025" class="with-border align-center" src="_images/img025.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="metric-hosts-main-settings-update">
<h3>Metric hosts main settings update<a class="headerlink" href="#metric-hosts-main-settings-update" title="Permalink to this headline">¶</a></h3>
<a class="with-border reference internal image-reference" href="_images/img026.png"><img alt="img/first_steps/img026" class="with-border align-center" src="_images/img026.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="main-settings-update-interface-features">
<h3>Main settings update interface features<a class="headerlink" href="#main-settings-update-interface-features" title="Permalink to this headline">¶</a></h3>
<p><strong>Lag monitoring policy:</strong></p>
<p>In this part of the screen you will define:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">max</span> <span class="pre">lag</span> <span class="pre">allowed</span></code> value that conditions the state definition of the entity depending on the circumstances</p></li>
<li><p>This value is in <code class="docutils literal notranslate"><span class="pre">seconds</span></code> and will be taken into account by the trackers to determine the colour of the state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Override</span> <span class="pre">lagging</span> <span class="pre">classes</span></code> allows bypassing any lagging class that would have defined and could be matching the conditions (index, sourcetype) of this entity</p></li>
<li><p>You can choose which <code class="docutils literal notranslate"><span class="pre">KPIs</span></code> will be taken into account to determine the state regarding the <code class="docutils literal notranslate"><span class="pre">max</span> <span class="pre">lag</span> <span class="pre">allowed</span></code> and the two main lagging performance indicators</p></li>
<li><p>For data hosts, the <code class="docutils literal notranslate"><span class="pre">alerting</span> <span class="pre">policy</span></code> allows controlling how to consider the green/red state assignment in regards with the state of each sourcetype indexed by the host</p></li>
</ul>
<p>See <a class="reference internal" href="#lagging-classes"><span class="std std-ref">Lagging classes</span></a> for more details about the lagging classes feature.</p>
<p>See <a class="reference internal" href="#alerting-policy-for-data-hosts"><span class="std std-ref">Alerting policy for data hosts</span></a> for more details about the alerting policy feature.</p>
<p><strong>Priority:</strong></p>
<p>This is where you can define the priority of this entity.
The priority is by default set to medium can by any of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">low</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">medium</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">high</span></code></p></li>
</ul>
<p>Using the priority allows granular alerting and improves the global situation visibility of the environment within the main screens.</p>
<p>See <a class="reference internal" href="#priority-management"><span class="std std-ref">Priority management</span></a> for more details about this feature</p>
<p><strong>Week days monitoring:</strong></p>
<p>Week days monitoring allows using specific rules for data sources and data hosts regarding the day of the week, by default monitoring rules are always applied, therefore using week days rules allow influencing the <code class="docutils literal notranslate"><span class="pre">red</span></code> state depending on the current day of the week. (which would switch to <code class="docutils literal notranslate"><span class="pre">orange</span></code> accordingly)</p>
<p><strong>Hours ranges monitoring:</strong></p>
<p>Similarly to the week days monitoring, you can specify for each entity the hours ranges of the day when the monitoring condition apply.</p>
<p>In a nutshell, this means that you can specify which periods of the day a given entity can switch to red, and therefore be included in your alerting workflow.</p>
<p>If the current hour range is not included in the monitoring rules, the entity would turn orange rather than red.</p>
<p>See <a class="reference internal" href="#hours-ranges-monitoring"><span class="std std-ref">Hours ranges monitoring</span></a> for more details about this feature</p>
<p><strong>Monitoring level:</strong></p>
<p>This option allows you to ask TrackMe to consider the very last events available at the index level rather than the specific sourcetype related to the entity.</p>
<p>This influences the state definition:</p>
<ul class="simple">
<li><p>If a data source or host is set to <code class="docutils literal notranslate"><span class="pre">sourcetype</span></code>, what conditions the state is meeting the monitoring rules for that sourcetype only (default behaviour)</p></li>
<li><p>If it is set to <code class="docutils literal notranslate"><span class="pre">index</span></code>, instead of defining a red state because the monitoring conditions are not met, we will consider if there are events available at the index level according to the monitoring rules</p></li>
<li><p>The purpose of this feature is to allow interacting with this data source (in that context let’s talk about sourcetypes) without generating an alert as long as data is actively sent to that index</p></li>
</ul>
<p><strong>Associate to a logical group:</strong></p>
<p>This option allows grouping data hosts and metric hosts into logical groups which are taken in consideration by groups rather than per entity.</p>
<p>See <a class="reference internal" href="#logical-groups-clusters"><span class="std std-ref">Logical groups (clusters)</span></a> for more details about this feature.</p>
<p><strong>Alerting policy: (data hosts only)</strong></p>
<p>This option allows controlling on a per host basis the behaviour regarding the sourcetypes monitoring per host.</p>
<p>See <a class="reference internal" href="#alerting-policy-for-data-hosts"><span class="std std-ref">Alerting policy for data hosts</span></a> for more details about this feature.</p>
<p><strong>Host distinct count threshold: (data sources only)</strong></p>
<p>In some cases, you may want to be alerted when the number of distinct count hosts underneath a data source goes below a certain threshold.</p>
<p><em>Expected values are:</em></p>
<ul class="simple">
<li><p>“any” (default) which disables any verification against the hosts distinct count number</p></li>
<li><p>A positive integer representing the minimal threshold for the dcount of hosts, if the current dcount goes below this value, the data source turns red</p></li>
</ul>
</div>
</div>
<div class="section" id="hybrid-trackers">
<h2>Hybrid trackers<a class="headerlink" href="#hybrid-trackers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introduction-to-hybrid-trackers">
<h3>Introduction to Hybrid Trackers<a class="headerlink" href="#introduction-to-hybrid-trackers" title="Permalink to this headline">¶</a></h3>
<div class="admonition-what-are-hybrid-trackers-for admonition">
<p class="admonition-title">What are hybrid trackers for?</p>
<ul class="simple">
<li><p>The purpose of Hybrid trackers is to address two essential needs, <strong>custom key special entities split</strong>, and <strong>remote Splunk deployment monitoring</strong></p></li>
<li><p><strong>custom key special entities</strong> is to be used when you have special requirements in addition with the default index/sourcetype data source concept, then you can rely on any additional key field (indexed or search time extracted) and create hybrid trackers without affecting the general data sources behaviour</p></li>
<li><p>For instance, you could create an hybrid tracker to automatically create entities for your Cloud provider data using a <strong>subscription_id</strong> field, and get a single entity per index / sourcetype / Cloud tenant (represented by its subscription_id)</p></li>
<li><p>Another example, you could create an hybrid tracker to create entities based on a <strong>company</strong> fields which describes subsidiaries in your data sets, generating entities per index / sourcetype / company</p></li>
<li><p>Finally, <strong>remote Splunk deployment monitoring</strong> is a magic feature of TrackMe which allows to do all of these, index/sourcetype entities or with a custom key, but with any remote Splunk deployment configured as an account and using a bearer token for the authentication</p></li>
<li><p>In short, you can transparently and easily monitor data from remote Splunk deployments, just as if these were local data sets, with all trackMe features and massive scalability and efficiently!</p></li>
</ul>
</div>
</div>
<div class="section" id="hybrid-trackers-for-local-data-sets-with-a-custom-key">
<h3>Hybrid trackers for local data sets with a custom key<a class="headerlink" href="#hybrid-trackers-for-local-data-sets-with-a-custom-key" title="Permalink to this headline">¶</a></h3>
<p><strong>Let’s take the followin simple example:</strong></p>
<ul class="simple">
<li><p>On the local Splunk deployment (meaning data that TrackMe can transparenly access to), we have two indexes <strong>firewall and network</strong> which contains data for multiple company: <strong>amer, apac and emea</strong></p></li>
<li><p>By default, TrackMe generates two entities (assuming we have one sourcetype per index): <strong>firewall:pan:traffic</strong> and <strong>network:pan:traffic</strong></p></li>
<li><p>However, this does not allow us to track each region independently, as all regions are covered in each of the entities</p></li>
<li><p>Before the hybrid trackers, we could have covered the requirements in two ways: updating the global discovery scheme, or creating an Elastic Source for each couple of index/sourcetype/region</p></li>
<li><p>Both approaches have inconvenients, in the first case we modify the discovery for all entities which is likely problematic, in the second the approach is not very efficient and requires many manual actions, and is potentially expensive in term of compute</p></li>
</ul>
<p><strong>By creating an hybrid tracker to address our needs, we get:</strong></p>
<ul class="simple">
<li><p>Entities created and maintained automatically, respecting our custom key transparenly</p></li>
<li><p>A single schedule report which acts efficiently and saves computing costs in a scalabable way</p></li>
<li><p>We do not affect the standard entities discovery at any point in time</p></li>
<li><p>We can create as many hybrid trackers as we need to address our requirements</p></li>
</ul>
<p><strong>Requirements:</strong></p>
<ul class="simple">
<li><p>The custom key can be either an indexed field, or a search time extracted field</p></li>
<li><p>Ideally, using an indexed field is more efficient and uses less computes, as it allows TrackMe to use a tstats based hybrid tracker, however, both are supported</p></li>
<li><p>The custom key needs to be searcheable in TrackMe transparently, using <code class="docutils literal notranslate"><span class="pre">field=&quot;value&quot;</span></code></p></li>
</ul>
<div class="section" id="creating-our-hybrid-local-tracker-with-a-region-custom-key">
<h4>Creating our hybrid local tracker with a region custom key<a class="headerlink" href="#creating-our-hybrid-local-tracker-with-a-region-custom-key" title="Permalink to this headline">¶</a></h4>
<p><strong>From the TrackMe main UI, click on the “manage hybrid trackers” button:</strong></p>
<a class="with-border reference internal image-reference" href="_images/local1.png"><img alt="img/hybrid_trackers/local1.png" class="with-border align-center" src="_images/local1.png" style="width: 1200px;" /></a>
<p><strong>Click on the “Create a new hybrid local tracker” button from this screen:</strong></p>
<a class="with-border reference internal image-reference" href="_images/local2.png"><img alt="img/hybrid_trackers/local2.png" class="with-border align-center" src="_images/local2.png" style="width: 1200px;" /></a>
<p><strong>Fill in the required information, and click on simulate to review the results before creating the tracker:</strong></p>
<a class="with-border reference internal image-reference" href="_images/local3.png"><img alt="img/hybrid_trackers/local3.png" class="with-border align-center" src="_images/local3.png" style="width: 1200px;" /></a>
<p><em>About:</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">unique</span> <span class="pre">identifier</span></code>: A custom identifier of your choice, defines the name of the tracker report automatically</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">search</span> <span class="pre">mode</span></code>: Defines if the tracker relies on a tstats based searches and uses a custom key based on an indexed field, or a standard raw search whichs allows both indexed and search time extracted fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">root</span> <span class="pre">search</span> <span class="pre">constraint</span></code>: The Splunk root search constraint, depending on the type of search (tstats versus raw), fields need to be available at the indexed time using tstats, search time using a standard raw search</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">break</span> <span class="pre">by</span> <span class="pre">field</span></code>: The custom key field</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">earliest</span></code>: The earliest time quantifier, restricts the search time earliest scope</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">latest</span></code>: The latest time quantifier, restricts the search time latest scope</p></li>
</ul>
<p><em>Simulation results:</em></p>
<ul class="simple">
<li><p>The simulation results shows an overview of the entities discovered at the time of the simulation run</p></li>
<li><p>It shows the total number of discovered entities, and a sample of the first 10 entities discovered</p></li>
</ul>
<p><strong>Finally, click on “Create a new hybrid tracker” to perform the tracker creation effectively:</strong></p>
<a class="with-border reference internal image-reference" href="_images/local4.png"><img alt="img/hybrid_trackers/local4.png" class="with-border align-center" src="_images/local4.png" style="width: 1200px;" /></a>
<p><strong>You can run the tracker immediately:</strong></p>
<a class="with-border reference internal image-reference" href="_images/local5.png"><img alt="img/hybrid_trackers/local5.png" class="with-border align-center" src="_images/local5.png" style="width: 1200px;" /></a>
<p><strong>Right after the tracker run, our new entities are visible:</strong></p>
<a class="with-border reference internal image-reference" href="_images/local6.png"><img alt="img/hybrid_trackers/local6.png" class="with-border align-center" src="_images/local6.png" style="width: 1200px;" /></a>
<p><em>depending on the search mode, tstats versus raw:</em></p>
<ul class="simple">
<li><p>in tstats mode, the new entity is named as <code class="docutils literal notranslate"><span class="pre">&lt;index&gt;:&lt;sourcetype&gt;:|key:&lt;custom_key_fieldname&gt;:&lt;custom_key_fieldvalue&gt;</span></code></p></li>
<li><p>in raw mode, the new entity is named as <code class="docutils literal notranslate"><span class="pre">&lt;index&gt;:&lt;sourcetype&gt;:|rawkey:&lt;custom_key_fieldname&gt;:&lt;custom_key_fieldvalue&gt;</span></code></p></li>
</ul>
<p><em>When opening the entity, TrackMe automatically identities the custom key context, extracts the field name and value to construct all the needed searches:*</em></p>
<a class="with-border reference internal image-reference" href="_images/local7.png"><img alt="img/hybrid_trackers/local7.png" class="with-border align-center" src="_images/local7.png" style="width: 1200px;" /></a>
<p><strong>The new scheduled report is a standard report which can be reviewed in Splunk core:</strong></p>
<a class="with-border reference internal image-reference" href="_images/local8.png"><img alt="img/hybrid_trackers/local8.png" class="with-border align-center" src="_images/local8.png" style="width: 1200px;" /></a>
<p><strong>What about the out of the box entities?</strong></p>
<p>The easiest and fastest is to disable the original entities within the UI, these entities will not be visible and considered any longer.</p>
</div>
</div>
<div class="section" id="hybrid-trackers-for-remote-splunk-deployment-monitoring">
<h3>Hybrid trackers for remote Splunk deployment monitoring<a class="headerlink" href="#hybrid-trackers-for-remote-splunk-deployment-monitoring" title="Permalink to this headline">¶</a></h3>
<p><strong>In addition with the data available in our local environment, where TrackMe is hosted, you can monitor one or more remote Splunk deployment using hybrid remote trackers:</strong></p>
<ul class="simple">
<li><p>An <strong>account</strong> gets configured in the configuration UI, which represents the Splunk remote deployment to be monitored</p></li>
<li><p>This account consists in an identifier for the account, the URL and port of the Splunk API and the bearer token value used for the authentication</p></li>
<li><p>Finally, am hybrid remote tracker is configured and created, Trackme automatically relies in a custom command named <code class="docutils literal notranslate"><span class="pre">splunkremotesearch</span></code> to handle remote data sources transparently</p></li>
<li><p>When the hybrid tracker runs, a single search is operated to the remote system via the Splunk API, allowing scalabable and efficient searches at the lowest computing costs</p></li>
</ul>
<p><strong>Requirements:</strong></p>
<ul class="simple">
<li><p>The Splunk API on the remote system can be reached, this is compatible with Splunk Enterprise on-premise deployments and as well Splunk Cloud (the API access needs to be requested to Cloud Ops)</p></li>
<li><p>A bearer token needs to be created on the remote system, the token needs to be linked to a Splunk user account that can access to the data sets effectively</p></li>
</ul>
<div class="section" id="creating-the-hybrid-remote-tracker">
<h4>Creating the hybrid remote tracker<a class="headerlink" href="#creating-the-hybrid-remote-tracker" title="Permalink to this headline">¶</a></h4>
<p><strong>First, we need to setup the Splunk remote deployment account, from the main UI:</strong></p>
<a class="with-border reference internal image-reference" href="_images/remote1.png"><img alt="img/hybrid_trackers/remote1.png" class="with-border align-center" src="_images/remote1.png" style="width: 1200px;" /></a>
<p><strong>In the Splunk remote deployment account, create a new account, example:</strong></p>
<a class="with-border reference internal image-reference" href="_images/remote2.png"><img alt="img/hybrid_trackers/remote2.png" class="with-border align-center" src="_images/remote2.png" style="width: 1200px;" /></a>
<p><strong>Account creation nodes:</strong></p>
<ul class="simple">
<li><p>The account name is important as it will be part of the name of each entity to be created for the remote deployment, in the format: <code class="docutils literal notranslate"><span class="pre">remote:|account=&lt;name&gt;|index:sourcetype</span></code></p></li>
<li><p>The URl is https enforced, and should include the port number of the Splunk API, traditionally your URL would look like: <code class="docutils literal notranslate"><span class="pre">https://mysplunk.mydomain.com:8089</span></code></p></li>
<li><p>The URL can either be an IP address or ideally a FQDN, if you are running a Search Head Cluster, then the URL would ideally refer to the VIP or load balancer FQDN</p></li>
<li><p>The bearer token is to be configured on the remote Splunk Search Head(s), and should be linked to a Splunk user account with enough privileges to access the indexes you need</p></li>
<li><p>The application namespace is search and reporting by default, however you can choose a different application context if needed</p></li>
</ul>
<p><strong>Click on the “Create a new hybrid local tracker” button from this screen:</strong></p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<ul class="simple">
<li><p>Hybrid remote trackers can be based on the standard break by field scheme (index/sourcetype), or you can use a custom key to rely on a additional field (index/sourcetype/custom key)</p></li>
<li><p>A search constraint is optional, and can be used to scope and restrict easily the data sets on the remote Splunk deployment</p></li>
</ul>
</div>
<a class="with-border reference internal image-reference" href="_images/remote3.png"><img alt="img/hybrid_trackers/remote3.png" class="with-border align-center" src="_images/remote3.png" style="width: 1200px;" /></a>
<p><strong>Fill in the required information, and click on simulate to review the results before creating the tracker:</strong></p>
<p><em>Example with a constraint restricting indexes, and a standard break by based on index/sourcetype:</em></p>
<a class="with-border reference internal image-reference" href="_images/remote4.png"><img alt="img/hybrid_trackers/remote4.png" class="with-border align-center" src="_images/remote4.png" style="width: 1200px;" /></a>
<p><em>About:</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">unique</span> <span class="pre">identifier</span></code>: A custom identifier of your choice, defines the name of the tracker report automatically</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aacount</span></code>: Select the Splunk remote deployment account in the dropdown selector</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">search</span> <span class="pre">mode</span></code>: Defines if the tracker relies on a tstats based searches, or a standard raw search whichs allows both indexed and search time extracted fields</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">root</span> <span class="pre">search</span> <span class="pre">constraint</span></code>: Optional, the Splunk root search constraint, depending on the type of search (tstats versus raw), fields need to be available at the indexed time using tstats, search time using a standard raw search</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">break</span> <span class="pre">by</span> <span class="pre">field</span></code>: Optional, break with an additional custom key field</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">earliest</span></code>: The earliest time quantifier, restricts the search time earliest scope</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">latest</span></code>: The latest time quantifier, restricts the search time latest scope</p></li>
</ul>
<p><em>Simulation results:</em></p>
<ul class="simple">
<li><p>The simulation results shows an overview of the entities discovered at the time of the simulation run</p></li>
<li><p>It shows the total number of discovered entities, and a sample of the first 10 entities discovered</p></li>
</ul>
<p><em>remote entities naming conventions:</em></p>
<ul class="simple">
<li><p>Every remote entity uses a naming convention as follows: <code class="docutils literal notranslate"><span class="pre">remote:|account=&lt;name&gt;|index:sourcetype</span></code> for tstats based tracker, <code class="docutils literal notranslate"><span class="pre">remoteraw:|account=&lt;name&gt;|index:sourcetype</span></code> for raw based tracker</p></li>
<li><p>If you a tstats based custom key: <code class="docutils literal notranslate"><span class="pre">remote:|account=&lt;name&gt;|index:sourcetype|key:&lt;custom_key_fieldname&gt;|&lt;custom_key_fieldvalue&gt;</span></code></p></li>
<li><p>If you a raw based custom key: <code class="docutils literal notranslate"><span class="pre">remoteraw:|account=&lt;name&gt;|index:sourcetype|rawkey:&lt;custom_key_fieldname&gt;|&lt;custom_key_fieldvalue&gt;</span></code></p></li>
</ul>
<p><strong>Finally, click on “Create a new hybrid tracker” to perform the tracker creation effectively:</strong></p>
<a class="with-border reference internal image-reference" href="_images/remote5.png"><img alt="img/hybrid_trackers/remote5.png" class="with-border align-center" src="_images/remote5.png" style="width: 1200px;" /></a>
<p><strong>You can run the tracker immediately:</strong></p>
<a class="with-border reference internal image-reference" href="_images/remote6.png"><img alt="img/hybrid_trackers/remote6.png" class="with-border align-center" src="_images/remote6.png" style="width: 1200px;" /></a>
<p><strong>When opening an entity, TrackMe automatically detects the fact that this entity is a remote entity, and constructs the searches using the splunkremotesearch custom command:</strong></p>
<a class="with-border reference internal image-reference" href="_images/remote7.png"><img alt="img/hybrid_trackers/remote7.png" class="with-border align-center" src="_images/remote7.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/remote8.png"><img alt="img/hybrid_trackers/remote8.png" class="with-border align-center" src="_images/remote8.png" style="width: 1200px;" /></a>
<p><em>Any failure encountered by the splunkremotesearch command will be logged in the _internal:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">index</span><span class="o">=</span><span class="n">_internal</span> <span class="n">sourcetype</span><span class="o">=</span><span class="n">trackme</span><span class="p">:</span><span class="n">custom_commands</span><span class="p">:</span><span class="n">splunkremotesearch</span>
</pre></div>
</div>
<p><strong>Finally!</strong></p>
<a class="with-border reference internal image-reference" href="_images/remote9.png"><img alt="img/hybrid_trackers/remote9.png" class="with-border align-center" src="_images/remote9.png" style="width: 1200px;" /></a>
</div>
</div>
</div>
<div class="section" id="elastic-sources">
<h2>Elastic sources<a class="headerlink" href="#elastic-sources" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introduction-to-elastic-sources">
<h3>Introduction to Elastic sources<a class="headerlink" href="#introduction-to-elastic-sources" title="Permalink to this headline">¶</a></h3>
<div class="admonition-elastic-sources-feature admonition">
<p class="admonition-title">Elastic sources feature</p>
<ul class="simple">
<li><p>The Elastic sources feature provides a builtin workflow to create virtual data sources based on any constraints and any Splunk language</p></li>
<li><p>This extends TrackMe builtin features to allow dealing with any use case that the default data source concept does not cover by design</p></li>
<li><p>Elastic Sources can be based on <code class="docutils literal notranslate"><span class="pre">tstats</span></code>, <code class="docutils literal notranslate"><span class="pre">raw</span></code>, <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">(datamodel</span> <span class="pre">and</span> <span class="pre">lookup)</span></code> and <code class="docutils literal notranslate"><span class="pre">mstats</span></code> searches</p></li>
<li><p>In addition, Elastic Sources can be executed over a remote Splunk deployment using the <code class="docutils literal notranslate"><span class="pre">splunkremotesearch</span></code> command which allows tracking data that the search head(s) hosting TrackMe cannot access otherwise (such as a lookup that is only available to a Search Head Cluster while you run TrackMe on a monitoring utility search head)</p></li>
</ul>
</div>
<p>As we have exposed the main notions of TrackMe data discovery and tracking in <a class="reference internal" href="#main-navigation-tabs"><span class="std std-ref">Main navigation tabs</span></a>, there can be various use cases that these concepts do not address properly, considering some facts:</p>
<ul class="simple">
<li><p>Breaking by index and sourcetype is not enough, for instance your data pipeline can be distinguished in the same sourcetype by breaking on the <code class="docutils literal notranslate"><span class="pre">Splunk</span> <span class="pre">source</span> <span class="pre">Metadata</span></code></p></li>
<li><p>In a similar context, enrichment is performed either at indexing time (ideally indexed fields which allow the usage of tstats) or search time fields (evaluations, lookups, etc), these fields represent the keys you need to break on to address your requirements</p></li>
<li><p>With the default <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">sources</span></code> tracking, this data flow will appear as one main entity and you cannot <code class="docutils literal notranslate"><span class="pre">distinguish</span></code> a specific part of your data covered by the standard data source feature</p></li>
<li><p>Specific <code class="docutils literal notranslate"><span class="pre">custom</span> <span class="pre">indexed</span> <span class="pre">fields</span></code> provide <code class="docutils literal notranslate"><span class="pre">knowledge</span></code> of the data in your context, such as <code class="docutils literal notranslate"><span class="pre">company</span></code>, <code class="docutils literal notranslate"><span class="pre">business</span> <span class="pre">unit</span></code> etc and these pipelines cannot be distinguished by relying on the <code class="docutils literal notranslate"><span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">sourcetype</span></code> only</p></li>
<li><p>You need to address any use case that the default main features do not allow you to</p></li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<ul class="simple">
<li><p>The Elastic source feature allows you to fulfil any type of requirements from the data identification and search perspective, and transparenly integrate these virtual entities in the normal TrackMe workflow with the exact same features.</p></li>
<li><p>Since TrackMe 2.0, you can as well create <strong>hybrid trackers</strong> for the nearly same purposes with advantages over Elastic Sources (hybrid trackers can only address tstats and raw searches)</p></li>
<li><p>Unlike Elastic Sources, Hybrid trackers allow you to perform the discovery of many entities based on a given logic but from a single operation and automatically, saving computes and operations</p></li>
<li><p>If you have many entities to be handled, such as a logic based on a subscription_id for a Cloud provider, use hybrid trackers rather than Elastic Sources</p></li>
<li><p>Consult <a class="reference internal" href="#hybrid-trackers"><span class="std std-ref">Hybrid trackers</span></a> for more information about hybrid trackers</p></li>
</ul>
</div>
<p><strong>The concept of “Elastic Sources” is proper to TrackMe, and is linked to the complete level of flexibility the feature provides you to address any kind of use cases you might need to deal with.</strong></p>
<p><strong>In a nutshell:</strong></p>
<ul class="simple">
<li><p>An Elastic source can be added to the <code class="docutils literal notranslate"><span class="pre">shared</span> <span class="pre">tracker</span></code>, or created as an <code class="docutils literal notranslate"><span class="pre">independent</span> <span class="pre">tracker</span></code></p></li>
<li><p>The search language can be based on <code class="docutils literal notranslate"><span class="pre">|</span> <span class="pre">tstats</span></code>, <code class="docutils literal notranslate"><span class="pre">raw</span></code> searches, <code class="docutils literal notranslate"><span class="pre">|</span> <span class="pre">from</span></code> and <code class="docutils literal notranslate"><span class="pre">|</span> <span class="pre">mstats</span></code> commands</p></li>
<li><p>Additionally, these searches can be run remotely over the Splunk rest API to address use cases where the data is not accessible to the search head(s) hosting TrackMe</p></li>
<li><p>The shared tracker is a specific scheduled report named <code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">-</span> <span class="pre">Elastic</span> <span class="pre">sources</span> <span class="pre">shared</span> <span class="pre">tracker</span></code> that tracks in a single schedule execution all the entities that have been declared as shared Elastic sources via the UI</p></li>
<li><p>Because the <code class="docutils literal notranslate"><span class="pre">shared</span> <span class="pre">tracker</span></code> performs a <code class="docutils literal notranslate"><span class="pre">single</span> <span class="pre">execution</span></code>, there are performance considerations to take into account and the shared tracker should be restricted to very efficient searches in term of run time</p></li>
<li><p>In addition, <code class="docutils literal notranslate"><span class="pre">Elastic</span> <span class="pre">sources</span> <span class="pre">shared</span></code> have time frame restrictions which are the earliest and latest values of the tracker, you can restrict a shared entity time scope below these values but not beyond</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">dedicated</span> <span class="pre">Elastic</span> <span class="pre">source</span></code> is created via the UI which generates a new tracker especially for it</p></li>
<li><p>As the dedicated Elastic source has its <code class="docutils literal notranslate"><span class="pre">own</span> <span class="pre">schedule</span> <span class="pre">report</span></code>, this provides more capabilities to handle fewer performing searches and as well more freedom to address basically any kind of customisation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Dedicated</span> <span class="pre">Elastic</span> <span class="pre">sources</span></code> can be configured to address any time scope you need, and any search that is required including any advanced customisation you would need</p></li>
</ul>
</div>
<div class="section" id="accessing-the-elastic-source-creation-ui">
<h3>Accessing the Elastic source creation UI<a class="headerlink" href="#accessing-the-elastic-source-creation-ui" title="Permalink to this headline">¶</a></h3>
<p>First, let’s expose how to access the Elastic sources interface, from the data sources tab in the main UI, click on the <code class="docutils literal notranslate"><span class="pre">Elastic</span> <span class="pre">Sources</span></code> button:</p>
<a class="with-border reference internal image-reference" href="_images/img027.png"><img alt="img/first_steps/img027" class="with-border align-center" src="_images/img027.png" style="width: 1200px;" /></a>
<p>The following screen appears:</p>
<a class="with-border reference internal image-reference" href="_images/img028.png"><img alt="img/first_steps/img028" class="with-border align-center" src="_images/img028.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="elastic-source-example-1-source-metadata">
<h3>Elastic source example 1: source Metadata<a class="headerlink" href="#elastic-source-example-1-source-metadata" title="Permalink to this headline">¶</a></h3>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<ul class="simple">
<li><p>Since TrackMe 2.0, this use case example is much better covered by hybrid trackers, and left for the purposes of the documentation</p></li>
<li><p>Consult <a class="reference internal" href="#hybrid-trackers"><span class="std std-ref">Hybrid trackers</span></a> for more information about hybrid trackers</p></li>
</ul>
</div>
<p><strong>Let’s take our first example, assuming we are indexing the following events:</strong></p>
<p><em>data flow1 : firewall traffic for the region AMER</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;network&quot;</span> <span class="n">sourcetype</span><span class="o">=</span><span class="s2">&quot;pan:traffic&quot;</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;network:pan:amer&quot;</span>
</pre></div>
</div>
<p><em>data flow2 : firewall traffic for the region APAC</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;network&quot;</span> <span class="n">sourcetype</span><span class="o">=</span><span class="s2">&quot;pan:traffic&quot;</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;network:pan:apac&quot;</span>
</pre></div>
</div>
<p><em>data flow3 : firewall traffic for the region EMEA</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;network&quot;</span> <span class="n">sourcetype</span><span class="o">=</span><span class="s2">&quot;pan:traffic&quot;</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;network:pan:emea&quot;</span>
</pre></div>
</div>
<p>It is easy to understand that the default standard for data source <code class="docutils literal notranslate"><span class="pre">index</span> <span class="pre">+</span> <span class="pre">&quot;:&quot;</span> <span class="pre">+</span> <span class="pre">sourcetype</span></code> does not allow us to distinguish which region is generating events properly, and which region would not:</p>
<a class="with-border reference internal image-reference" href="_images/img029.png"><img alt="img/first_steps/img029" class="with-border align-center" src="_images/img029.png" style="width: 1200px;" /></a>
<p>In TrackMe data sources, this would appear as one entity and this is not filling our requirements for that use case:</p>
<a class="with-border reference internal image-reference" href="_images/img030.png"><img alt="img/first_steps/img030" class="with-border align-center" src="_images/img030.png" style="width: 1200px;" /></a>
<p>What if I want to be monitoring the fact that the EMEA region continues to be indexed properly ? and other regions ?</p>
<p>Elastic Sources is the TrackMe answer which allows you to extend the default features with agility and address easily any kind of requirement transparently in TrackMe.</p>
</div>
<div class="section" id="elastic-source-example-2-custom-indexed-fields">
<h3>Elastic source example 2: custom indexed fields<a class="headerlink" href="#elastic-source-example-2-custom-indexed-fields" title="Permalink to this headline">¶</a></h3>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<ul class="simple">
<li><p>Since TrackMe 2.0, this use case example is much better covered by hybrid trackers, and left for the purposes of the documentation</p></li>
<li><p>Consult <a class="reference internal" href="#hybrid-trackers"><span class="std std-ref">Hybrid trackers</span></a> for more information about hybrid trackers</p></li>
</ul>
</div>
<p><strong>Let’s extend a bit more the first example, and this time in addition with the region we have a company notion.</strong></p>
<p>At indexing time, two custom indexed fields are created representing the “region” and the “company”.</p>
<p>Custon indexed fields can be created in many ways in Splunk, it is a great and powerful feature as long as it is properly implemented and restricted to the right use cases.</p>
<p>This example of excellence allows our virtual customer to work at scale with performing searches against their two major enrichment fields.</p>
<p><strong>Assuming we have 3 regions (AMER / EMEA / APAC) and per region we have two companies (design / retail), to get the data of each region / company I need several searches:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;firewall&quot;</span> <span class="n">sourcetype</span><span class="o">=</span><span class="s2">&quot;pan:traffic&quot;</span> <span class="n">region</span><span class="p">::</span><span class="n">amer</span> <span class="n">company</span><span class="p">::</span><span class="n">design</span>
<span class="n">index</span><span class="o">=</span><span class="s2">&quot;firewall&quot;</span> <span class="n">sourcetype</span><span class="o">=</span><span class="s2">&quot;pan:traffic&quot;</span> <span class="n">region</span><span class="p">::</span><span class="n">amer</span> <span class="n">company</span><span class="p">::</span><span class="n">retail</span>
<span class="n">index</span><span class="o">=</span><span class="s2">&quot;firewall&quot;</span> <span class="n">sourcetype</span><span class="o">=</span><span class="s2">&quot;pan:traffic&quot;</span> <span class="n">region</span><span class="p">::</span><span class="n">apac</span> <span class="n">company</span><span class="p">::</span><span class="n">design</span>
<span class="n">index</span><span class="o">=</span><span class="s2">&quot;firewall&quot;</span> <span class="n">sourcetype</span><span class="o">=</span><span class="s2">&quot;pan:traffic&quot;</span> <span class="n">region</span><span class="p">::</span><span class="n">apac</span> <span class="n">company</span><span class="p">::</span><span class="n">retail</span>
<span class="n">index</span><span class="o">=</span><span class="s2">&quot;firewall&quot;</span> <span class="n">sourcetype</span><span class="o">=</span><span class="s2">&quot;pan:traffic&quot;</span> <span class="n">region</span><span class="p">::</span><span class="n">emea</span> <span class="n">company</span><span class="p">::</span><span class="n">design</span>
<span class="n">index</span><span class="o">=</span><span class="s2">&quot;firewall&quot;</span> <span class="n">sourcetype</span><span class="o">=</span><span class="s2">&quot;pan:traffic&quot;</span> <span class="n">region</span><span class="p">::</span><span class="n">emea</span> <span class="n">company</span><span class="p">::</span><span class="n">retail</span>
</pre></div>
</div>
<p><em>Note the usage of “::” rather than “=” which indicates to Splunk that we are explicitly looking at an indexed field rather a field potentially extracted at search time.</em></p>
<p>Indeed, the default data source feature does fill the requirements we need for this use case:</p>
<a class="with-border reference internal image-reference" href="_images/img032.png"><img alt="img/first_steps/img032" class="with-border align-center" src="_images/img032.png" style="width: 1200px;" /></a>
<p>Rather than one data source that covers the index/sourcetype, the requirement is to have 6 data sources that cover each couple of region/company.</p>
<p>Any failure on the flow level which is represented by these new data sources will be detected.
On the opposite, the default data source breaking on the sourcetype would need a total failure of all pipelines to be detected.</p>
<p><strong>By default, the data source would show up with a unique entity which is not filling our requirements:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img033.png"><img alt="img/first_steps/img033" class="with-border align-center" src="_images/img033.png" style="width: 1200px;" /></a>
<p>The default concept while powerful does not cover my need, but ok there we go and let’s extend it easily with Elastic sources!</p>
</div>
<div class="section" id="elastic-source-example-3-tracking-lookups-update-and-number-of-records">
<h3>Elastic source example 3: tracking lookups update and number of records<a class="headerlink" href="#elastic-source-example-3-tracking-lookups-update-and-number-of-records" title="Permalink to this headline">¶</a></h3>
<p>It is a very common and powerful practice to generate and maintain lookups in Splunk for numbers of purposes, which can be file based lookups (CSV files) or KVstore based lookups.</p>
<p>A common caveheat with lookups is that their update is driven by Splunk searches, there are plenty of reasons why a lookup could stop being populated and maintained, such as scheduling issues, permissions, related knowledge objects updates, lack or changes in the data, and many more.</p>
<p>The purpose of this example is to provide a builtin and efficient way of tracking Splunk lookup updates at scale in the easy way, and get alerted if an update issue is detected in the lookup according to the policies defined in TrackMe.</p>
<p><em>Let’s consider the simplistic following example, the lookup acme_assets_cmdb contains our ACME assets and is updated every day, we record in the field “lastupdate” the date and time of the execution of the Lookup gen report in Splunk. (in epoch time format)</em></p>
<a class="with-border reference internal image-reference" href="_images/img-lookup-tracking1.png"><img alt="img/first_steps/img-lookup-tracking1" class="with-border align-center" src="_images/img-lookup-tracking1.png" style="width: 1200px;" /></a>
<p>The unique requirement for TrackMe to be able to monitor a lookup is to have a time concept which can use to define as the <code class="docutils literal notranslate"><span class="pre">_time</span></code> field which TrackMe will rely on.</p>
<p>Lookups have no such thing of a concept of <code class="docutils literal notranslate"><span class="pre">_indextime</span></code> (time of ingestion in Splunk), therefore TrackMe will by default make the index time equivalent to the latest _time from the lookup, unless the Splunk search that will be set in the Elastic Source defines a value based on information from the lookup.</p>
<p>Monitoring lookups with TrackMe allow you to:</p>
<ul class="simple">
<li><p>Get automatically alerted when the last update of the lookup is older than a given amount of time (which could indicate an issue on the execution side, such as an error introduced in the SPL code maintaining the lookup, a knowledge object that is missing, etc)</p></li>
<li><p>Monitor and track the number of records, the outliers detection will automatically monitor the number of records in the lookup (which outliers settings can be fine tuned up to your needs, you could even gets alerted if the number of records goes beyond a certain limit)</p></li>
</ul>
<p>The following example shows the behaviour with a lookup that is updated every 30 minutes:</p>
<a class="with-border reference internal image-reference" href="_images/img-rest-elastic2.png"><img alt="img/first_steps/img-rest-elastic2" class="with-border align-center" src="_images/img-rest-elastic2.png" style="width: 1200px;" /></a>
<p>A Lookup based Elastic Source acts transparently just as any other data source, so you can setup:</p>
<ul class="simple">
<li><p>delays KPIs: how often shall the lookup be updated, which allows you to monitor that your update process (reports, etc) remains valid and operational</p></li>
<li><p>volume outliers: to automatically be alerted when the number of records is abnormal, and easily detects critical failures in your lookup update process</p></li>
</ul>
</div>
<div class="section" id="elastic-source-example-4-remote-searches">
<h3>Elastic source example 4: remote searches<a class="headerlink" href="#elastic-source-example-4-remote-searches" title="Permalink to this headline">¶</a></h3>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<ul class="simple">
<li><p>Since TrackMe 2.0, hybrid remote trackers can handle remote Splunk deployments monitoring at scale, with much more advantages over Elastic Sources in term of compute and operational costs</p></li>
<li><p>This depends on the use cases, hybrid trackers handle tstats and raw searches only (not datamodels or lookups)</p></li>
<li><p>Consult <a class="reference internal" href="#hybrid-trackers"><span class="std std-ref">Hybrid trackers</span></a> for more information about hybrid trackers</p></li>
</ul>
</div>
<p><strong>In some cases, the Splunk instance that hosts the TrackMe application may not be able to access the data sets you wish to monitor.</strong></p>
<ul class="simple">
<li><p>You have a Splunk Search Head Cluster, hosting for example your premium application for ITSI or Enterprise Security</p></li>
<li><p>In addition, you either use your monitoring console host or a dedicated standalone search head for your Splunk environment monitoring, which is where TrackMe is deployed</p></li>
<li><p>A lookup exists in the SHC which is the object you need to monitor, this lookup is only available to the SHC members and TrackMe cannot access to its content transparently</p></li>
</ul>
<p>TrackMe provides a custom command named <code class="docutils literal notranslate"><span class="pre">splunkremotesearch</span></code> which performs searches to remote Splunk deployments using the Splunk API and an account you configure:</p>
<p><strong>In the Splunk remote deployment account, create a new account, example:</strong></p>
<a class="with-border reference internal image-reference" href="_images/remote2.png"><img alt="img/hybrid_trackers/remote2.png" class="with-border align-center" src="_images/remote2.png" style="width: 1200px;" /></a>
<p><strong>Account creation nodes:</strong></p>
<ul class="simple">
<li><p>The account name is important as it will be part of the name of each entity to be created for the remote deployment, in the format: <code class="docutils literal notranslate"><span class="pre">remote:|account=&lt;name&gt;|index:sourcetype</span></code></p></li>
<li><p>The URl is https enforced, and should include the port number of the Splunk API, traditionally your URL would look like: <code class="docutils literal notranslate"><span class="pre">https://mysplunk.mydomain.com:8089</span></code></p></li>
<li><p>The URL can either be an IP address or ideally a FQDN, if you are running a Search Head Cluster, then the URL would ideally refer to the VIP or load balancer FQDN</p></li>
<li><p>The bearer token is to be configured on the remote Splunk Search Head(s), and should be linked to a Splunk user account with enough privileges to access the indexes you need</p></li>
<li><p>The application namespace is search and reporting by default, however you can choose a different application context if needed</p></li>
</ul>
<p><strong>Examples for each type of search which you will enter within the Elastic Search UI:</strong></p>
<p><em>tstats over rest:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">account</span><span class="o">=</span><span class="s2">&quot;LAB&quot;</span> <span class="o">|</span> <span class="n">index</span><span class="o">=*</span> <span class="n">sourcetype</span><span class="o">=</span><span class="n">pan</span><span class="p">:</span><span class="n">traffic</span>
</pre></div>
</div>
<p><em>raw search over rest:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">account</span><span class="o">=</span><span class="s2">&quot;LAB&quot;</span> <span class="o">|</span> <span class="n">index</span><span class="o">=*</span> <span class="n">sourcetype</span><span class="o">=</span><span class="n">pan</span><span class="p">:</span><span class="n">traffic</span>
</pre></div>
</div>
<p><em>from datamodel over rest:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">account</span><span class="o">=</span><span class="s2">&quot;LAB&quot;</span> <span class="o">|</span> <span class="n">datamodel</span><span class="p">:</span><span class="s2">&quot;Authentication&quot;</span> <span class="n">action</span><span class="o">=*</span>
</pre></div>
</div>
<p><em>from lookup over rest:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">account</span><span class="o">=</span><span class="s2">&quot;LAB&quot;</span> <span class="o">|</span> <span class="kn">from</span> <span class="nn">lookup</span><span class="p">:</span><span class="n">acme_assets_cmdb</span> <span class="o">|</span> <span class="nb">eval</span> <span class="n">_time</span><span class="o">=</span><span class="n">strftime</span><span class="p">(</span><span class="n">lastupdate</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>mstats over rest:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">account</span><span class="o">=</span><span class="s2">&quot;LAB&quot;</span> <span class="o">|</span> <span class="n">index</span><span class="o">=*</span> <span class="n">metric_name</span><span class="o">=</span><span class="n">docker</span><span class="o">*</span>
</pre></div>
</div>
<p>As a conclusion, using the rest based searches features successfully completes the Elastic Sources level of features, such that every single use case can be handled in TrackMe, whenever the Splunk instance cam access or not to the data you need to track!</p>
</div>
<div class="section" id="elastic-source-example-1-creation">
<h3>Elastic source example 1: creation<a class="headerlink" href="#elastic-source-example-1-creation" title="Permalink to this headline">¶</a></h3>
<p><strong>Now, let’s create our first Elastic Source which will meet our requirement to rely on the Splunk source Metadata, click on create a new Elastic source:</strong></p>
<img alt="img/first_steps/img034" class="with-border align-center" src="_images/img034.png" />
<p><strong>Which opens the following screen:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img035.png"><img alt="img/first_steps/img035" class="with-border align-center" src="_images/img035.png" style="width: 1200px;" /></a>
<p><strong>Summary:</strong></p>
<ul class="simple">
<li><p>Define a name for the entity, this name is the value of the field <code class="docutils literal notranslate"><span class="pre">data_name</span></code> and needs to be unique in TrackMe</p></li>
<li><p>Shall that name you provide not be unique, a little red cross and a message will indicate the issue when we run the simulation</p></li>
<li><p>We choose a <code class="docutils literal notranslate"><span class="pre">search</span> <span class="pre">language</span></code>, because the source field is a Metadata, this is an indexed field and we can use the tstats command which is very efficient by looking at the tsdidx files rather than the raw events</p></li>
<li><p>We define our search constraint for the first entity, in our case <code class="docutils literal notranslate"><span class="pre">index=network</span> <span class="pre">sourcetype=pan:traffic</span> <span class="pre">source=network:pan:emea</span></code></p></li>
<li><p>We choose a value for the index, this is having <code class="docutils literal notranslate"><span class="pre">no</span> <span class="pre">influence</span></code> on the search itself and its result but determines how the entity is classified and filtered in the main UI</p></li>
<li><p>Same for the sourcetype, which does <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">influence</span></code> the search results</p></li>
<li><p>Finally, we can optionally decide to define the earliest and latest time range, in our example we can leave that empty and rely on the default behaviour</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/img036.png"><img alt="img/first_steps/img036" class="with-border align-center" src="_images/img036.png" style="width: 1200px;" /></a>
<p>This looks good isn’t it?</p>
<p><strong>Shared tracker versus dedicated tracker:</strong></p>
<p>In this context:</p>
<ul class="simple">
<li><p>Because this is a very efficient search that relies on tstats, creating it as a shared tracker is perfectly fair</p></li>
<li><p>Shall I want to increase the earliest or the latest values beyond the shared tracker default of -4h / +4h, this would be reason to create a dedicated tracker</p></li>
<li><p>While tstats searches are very efficient, a very high volume of events might mean a certain run time for the search, in such a case a dedicated tracker shall be used</p></li>
<li><p>If you have to achieve any additional work, such as third party lookup enrichment, this would be a reason to create a dedicated tracker too</p></li>
</ul>
<p><strong>Fine? Let’s cover both, and let’s click on “Add to the shared tracker” button:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img038.png"><img alt="img/first_steps/img038" class="with-border align-center" src="_images/img038.png" style="width: 500px;" /></a>
<p>Nice! Let’s click on that button and immediately run the shared tracker, upon its execution we can see an all brand new data source entity that matches what we created:</p>
<a class="with-border reference internal image-reference" href="_images/img039.png"><img alt="img/first_steps/img039" class="with-border align-center" src="_images/img039.png" style="width: 1200px;" /></a>
<p>Ok that’s cool!</p>
<p><em>Note: if you disagree with this statement, you are free to leave this site, free to uninstall TrackMe and create all of your own things we are not friends anymore that’s it.</em></p>
<p><strong>repeat the operation, which results in 3 new entities in TrackMe, one for each region:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img040.png"><img alt="img/first_steps/img040" class="with-border align-center" src="_images/img040.png" style="width: 1200px;" /></a>
<p>“What about the original data source that created automatically?”.</p>
<p>We can simply disable the monitoring state via the disable button as it not needed anymore.</p>
</div>
<div class="section" id="elastic-source-example-2-creation">
<h3>Elastic source example 2: creation<a class="headerlink" href="#elastic-source-example-2-creation" title="Permalink to this headline">¶</a></h3>
<p><em>Now that we had so much fun with the example 1, let’s have a look at the second example which relies on custom indexed fields.</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span><span class="o">=</span><span class="s2">&quot;network:pan:[region]:[company]&quot;</span>
</pre></div>
</div>
<p>For the purposes of the demonstration, we will this time create Elastic dedicated sources.</p>
<p><em>Let’s create our first entity:</em></p>
<p><strong>Summary:</strong></p>
<ul class="simple">
<li><p>Define a name for the entity, this name is the value of the field <code class="docutils literal notranslate"><span class="pre">data_name</span></code> and needs to be unique in TrackMe</p></li>
<li><p>Shall that name you provide not be unique, a little red cross and a message will indicate the issue when we run the simulation</p></li>
<li><p>We choose a <code class="docutils literal notranslate"><span class="pre">search</span> <span class="pre">language</span></code>, because the source field is a Metadata, this is an indexed field and we can use the tstats command which is very efficient by looking at the tsdidx files rather than the raw events</p></li>
<li><p>We define our search constraint for the first entity, in our case <code class="docutils literal notranslate"><span class="pre">index=firewall</span> <span class="pre">sourcetype=pan:traffic</span> <span class="pre">region::emea</span> <span class="pre">company::retail</span></code></p></li>
<li><p>We choose a value for the index and the sourcetype, this is having <code class="docutils literal notranslate"><span class="pre">no</span> <span class="pre">impacts</span></code> on the search itself and its result but determines how the entity is classified and filtered in the main UI</p></li>
<li><p>Finally, we can optionally decide to define the earliest and latest time range, in our example we can leave that empty and rely on the default behaviour</p></li>
</ul>
<p><strong>Note about the search syntax:</strong></p>
<ul class="simple">
<li><p>We use <code class="docutils literal notranslate"><span class="pre">&quot;::&quot;</span></code> as the delimiter rather than <code class="docutils literal notranslate"><span class="pre">&quot;=&quot;</span></code> because these are indexed fields, and this indicates Splunk to treat them as such</p></li>
</ul>
<p><strong>Let’s create our first entity:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img042.png"><img alt="img/first_steps/img042" class="with-border align-center" src="_images/img042.png" style="width: 1200px;" /></a>
<p><strong>Once again this is looking perfectly good, this time we will create a dedicated tracker:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img043.png"><img alt="img/first_steps/img043" class="with-border align-center" src="_images/img043.png" style="width: 500px;" /></a>
<p><strong>Nice, let’s click on the run button now, and repeat the operation for all entities!</strong></p>
<p><strong>Once we did and created all the six entities, we can see the following in the data sources tab:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img044.png"><img alt="img/first_steps/img044" class="with-border align-center" src="_images/img044.png" style="width: 1200px;" /></a>
<p>As we did earlier in the example 1, we will simply disable the original data source which is not required anymore.</p>
<p><strong>Finally, because we created dedicated trackers, let’s have a look at the reports:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img045.png"><img alt="img/first_steps/img045" class="with-border align-center" src="_images/img045.png" style="width: 1200px;" /></a>
<p>We can see that TrackMe has created a new scheduled report for each entity we created, it is perfectly possible to edit these reports up to your needs.</p>
<p>Voila, we have now covered two complete examples of how and why creating Elastic Sources, there are many more use cases obviously and each can be very specific to your context, therefore we covered the essential part of the feature.</p>
</div>
<div class="section" id="elastic-source-example-3-creation">
<h3>Elastic source example 3: creation<a class="headerlink" href="#elastic-source-example-3-creation" title="Permalink to this headline">¶</a></h3>
<p><em>Let’s create our lookup based Elastic Source, for this we rely on the Splunk from search command capabilities to handle lookup, and we potentially define additional statements to set the _time and _indextime (if any)</em></p>
<p>Litteraly, we are going to use the following SPL search to achieve our target:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="kn">from</span> <span class="nn">lookup</span><span class="p">:</span><span class="n">acme_assets_cmdb</span> <span class="o">|</span> <span class="nb">eval</span> <span class="n">_time</span><span class="o">=</span><span class="n">strftime</span><span class="p">(</span><span class="n">lastupdate</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If our lastupdate would have been in a human readable format, we could have used the stptime function to convert it into an epoch time, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="kn">from</span> <span class="nn">lookup</span><span class="p">:</span><span class="n">acme_assets_cmdb</span> <span class="o">|</span> <span class="nb">eval</span> <span class="n">_time</span><span class="o">=</span><span class="n">strptime</span><span class="p">(</span><span class="n">lastupdate</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y %H:%M:%S&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Applied to TrackMe in the Elastic Sources UI creation:</em></p>
<a class="with-border reference internal image-reference" href="_images/img-lookup-tracking2.png"><img alt="img/first_steps/img-lookup-tracking2" class="with-border align-center" src="_images/img-lookup-tracking2.png" style="width: 1200px;" /></a>
<p>Notes:</p>
<ul class="simple">
<li><p>The “from ” key word is not required and will be substituted by TrackMe automatically (once you selected from in the dropdown)</p></li>
<li><p>earliest and latest do not matter for a lookup, so you can leave these with their default values</p></li>
<li><p>The index and sourcetype are only used for UI filtering purposes, so you can define the values up to your preference</p></li>
<li><p>Depending on the volume of records in the lookup and the time taken by Splunk to load its content, you may consider using the shared tracker mode, or a dedicated tracker for longer execution run times</p></li>
</ul>
<p><em>Once the Elastic Source has been created, and we ran the tracker:</em></p>
<a class="with-border reference internal image-reference" href="_images/img-rest-elastic2.png"><img alt="img/first_steps/img-rest-elastic2" class="with-border align-center" src="_images/img-rest-elastic2.png" style="width: 1200px;" /></a>
<p>As we can see, the current lagging corresponds to the difference between now and the latest update of the lookup, TrackMe will immediately starts to compute all metrics, the event count corresponds to the number of records (which allows the usage of outliers detection too), etc.</p>
<p>When TrackMe detects that the data source is a based on a lookup, the statistics are returned from the trackme metrics automatically.</p>
</div>
<div class="section" id="elastic-source-example-4-creation">
<h3>Elastic source example 4: creation<a class="headerlink" href="#elastic-source-example-4-creation" title="Permalink to this headline">¶</a></h3>
<p>As explained in the example 4 description, we can run remote searches to monitor any data that is not available to the search head host TrackMe, let’s consider the example a lookup hosted on a different search head.</p>
<p>On the search head that owns the lookup, we can use the following query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="kn">from</span> <span class="nn">lookup</span><span class="p">:</span><span class="n">acme_assets_cmdb</span> <span class="o">|</span> <span class="nb">eval</span> <span class="n">_time</span><span class="o">=</span><span class="n">strftime</span><span class="p">(</span><span class="n">lastupdate</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using the embedded <code class="docutils literal notranslate"><span class="pre">splunkremotesearch</span></code> and a remote Splunk deployment you have configured, we will achieve the same job but this time remotely, the Elastic Source search syntax will be the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">account</span><span class="o">=</span><span class="s2">&quot;name_of_the_account&quot;</span> <span class="o">|</span> <span class="kn">from</span> <span class="nn">lookup</span><span class="p">:</span><span class="n">acme_assets_cmdb</span> <span class="o">|</span> <span class="nb">eval</span> <span class="n">_time</span><span class="o">=</span><span class="n">strftime</span><span class="p">(</span><span class="n">lastupdate</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<a class="with-border reference internal image-reference" href="_images/img-rest-elastic1.png"><img alt="img/first_steps/img-rest-elastic1" class="with-border align-center" src="_images/img-rest-elastic1.png" style="width: 1200px;" /></a>
<p>Underneath, what TrackMe does is a <code class="docutils literal notranslate"><span class="pre">splunkremotesearch</span></code> similar to: (with additional logics automatically generated by TrackMe)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">splunkremotesearch</span> <span class="n">account</span><span class="o">=</span><span class="n">LAB</span> <span class="n">search</span><span class="o">=</span><span class="s2">&quot;| from lookup:acme_cmdb_lookup | eval _time=strftime(lastupdate, </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">)&quot;</span> <span class="n">earliest</span><span class="o">=</span><span class="s2">&quot;-4h&quot;</span> <span class="n">latest</span><span class="o">=</span><span class="s2">&quot;+4h&quot;</span>
</pre></div>
</div>
<a class="with-border reference internal image-reference" href="_images/img-rest-elastic1-bis.png"><img alt="img/first_steps/img-rest-elastic1-bis" class="with-border align-center" src="_images/img-rest-elastic1-bis.png" style="width: 1200px;" /></a>
<p>You can add the new Elastic Source, and immediately run the tracker: (shared or dedicated)</p>
<a class="with-border reference internal image-reference" href="_images/img-rest-elastic1-created.png"><img alt="img/first_steps/img-rest-elastic1-created" class="with-border align-center" src="_images/img-rest-elastic1-created.png" style="width: 1200px;" /></a>
<p>Once created, the new data source appears in the UI automatically, the following example shows the behaviour with a lookup that is updated every 30 minutes:</p>
<a class="with-border reference internal image-reference" href="_images/img-rest-elastic2.png"><img alt="img/first_steps/img-rest-elastic2" class="with-border align-center" src="_images/img-rest-elastic2.png" style="width: 1200px;" /></a>
<p>In the example of a lookup, the Search button would result in the following:</p>
<a class="with-border reference internal image-reference" href="_images/img-rest-elastic3.png"><img alt="img/first_steps/img-rest-elastic3" class="with-border align-center" src="_images/img-rest-elastic3.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="elastic-sources-under-the-hood">
<h3>Elastic sources under the hood<a class="headerlink" href="#elastic-sources-under-the-hood" title="Permalink to this headline">¶</a></h3>
<p><strong>Some additional more technical details:</strong></p>
<div class="section" id="elastic-sources-shared">
<h4>Elastic sources shared<a class="headerlink" href="#elastic-sources-shared" title="Permalink to this headline">¶</a></h4>
<p>Each elastic source definition is stored in the following KVstore based lookup:</p>
<p><code class="docutils literal notranslate"><span class="pre">trackme_elastic_sources</span></code></p>
<p>Specially, we have the following fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data_name</span></code> is the unique identifier</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">search_constraint</span></code> is the search constraint</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">search_mode</span></code> is the search command to be used</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elastic_data_index</span></code> is the value for the index to be shown in the UI</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elastic_data_sourcetype</span></code> is the value for the sourcetype to be show in the UI</p></li>
</ul>
<p>When the Elastic Source shared tracker runs:</p>
<p><code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">-</span> <span class="pre">Elastic</span> <span class="pre">sources</span> <span class="pre">shared</span> <span class="pre">tracker</span></code></p>
<p>TrackMe calls a custom command named <code class="docutils literal notranslate"><span class="pre">trackmeelasticexecutor</span></code>, this custom command loads the SPL logic from the KVstore collection, and runs the searches sequentially using the Splunk Python SDK.</p>
<p>Logs from the execution are available in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">index</span><span class="o">=</span><span class="n">_internal</span> <span class="n">sourcetype</span><span class="o">=</span><span class="n">trackme</span><span class="p">:</span><span class="n">custom_commands</span><span class="p">:</span><span class="n">trackmeelasticexecutor</span>
</pre></div>
</div>
<p>Especially, we can notice for each single Elastic Source that the search is logged as well as its execution run time:</p>
<a class="with-border reference internal image-reference" href="_images/img-elastic-shared-executor1.png"><img alt="img/first_steps/img-elastic-shared-executor1.png" class="with-border align-center" src="_images/img-elastic-shared-executor1.png" style="width: 1200px;" /></a>
<p>At the end of the Elastic Shared execution process, we can a total run time metric including how many Elastic Sources were performed:</p>
<a class="with-border reference internal image-reference" href="_images/img-elastic-shared-executor2.png"><img alt="img/first_steps/img-elastic-shared-executor2.png" class="with-border align-center" src="_images/img-elastic-shared-executor2.png" style="width: 1200px;" /></a>
<p>The tracker loads each record stored in the collection, and uses different evaluations to compose the final SPL search for each record.</p>
<p>Finally, it calls different shared knowledge objects that are commonly used by the trackers:</p>
<ul class="simple">
<li><p>Apply the TrackMe different macros and functions to calculate things like the lagging metrics, etc</p></li>
<li><p>Calls all knowledge objects from TrackMe which insert and update the KVstore lookup, generate flipping status events, generate and records the metrics in the metric store</p></li>
</ul>
<p>Besides the fact that Elastic sources appears in the data sources tab, there are no interactions between the data source trackers and the shared Elastic source trackers, there are independents.</p>
<p>In addition, the collection is used automatically by the main interface if you click on the <code class="docutils literal notranslate"><span class="pre">Search</span></code> button to generate the relevant search to access the events related to that entity.</p>
</div>
<div class="section" id="elastic-sources-dedicated">
<h4>Elastic sources dedicated<a class="headerlink" href="#elastic-sources-dedicated" title="Permalink to this headline">¶</a></h4>
<p>Each elastic source definition is stored in the following KVstore based lookup:</p>
<p><code class="docutils literal notranslate"><span class="pre">trackme_elastic_sources_dedicated</span></code></p>
<p>Specially, we have the following fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data_name</span></code> is the unique identifier</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">search_constraint</span></code> is the search constraint</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">search_mode</span></code> is the search command to be used</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elastic_data_index</span></code> is the value for the index to be shown in the UI</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elastic_data_sourcetype</span></code> is the value for the sourcetype to be show in the UI</p></li>
</ul>
<p>When the dedicated Elastic source tracker runs, the following applies:</p>
<ul class="simple">
<li><p>The report contains the structured search syntax that was automatically built by the UI when it was created</p></li>
<li><p>The report calls different knowledge objects that are common to the trackers to insert and update records in the KVstore, generate flipping status records if any and generate the lagging metrics to be stored into the metric store</p></li>
</ul>
<p>Besides the fact that Elastic sources appears in the data sources tab, there are no interactions between the data source trackers and the dedicated Elastic source trackers, there are independents.</p>
<p>In addition, the collection is used automatically by the main interface if you click on the <code class="docutils literal notranslate"><span class="pre">Search</span></code> button to generate the relevant search to access the events related to that entity.</p>
</div>
</div>
<div class="section" id="remove-elastic-sources">
<h3>Remove Elastic Sources<a class="headerlink" href="#remove-elastic-sources" title="Permalink to this headline">¶</a></h3>
<p><em>You can delete one or more Elastic Sources, shared or dedicated, within the UI main screen:</em></p>
<a class="with-border reference internal image-reference" href="_images/img_delete_elastic_sources.png"><img alt="img/first_steps/img_delete_elastic_sources" class="with-border align-center" src="_images/img_delete_elastic_sources.png" style="width: 1200px;" /></a>
<p><em>Example with dedicated Elastic Sources:</em></p>
<a class="with-border reference internal image-reference" href="_images/img_delete_elastic_sources2.png"><img alt="img/first_steps/img_delete_elastic_sources2" class="with-border align-center" src="_images/img_delete_elastic_sources2.png" style="width: 1200px;" /></a>
<p><em>When deleting Elastic Sources via the UI, the following actions are occurring:</em></p>
<ul class="simple">
<li><p>The UI calls a REST API endpoint via the <a class="reference internal" href="rest_api_reference.html#rest-api-trackme-spl-command"><span class="std std-ref">REST API trackme SPL command</span></a></p></li>
<li><p>API endpoints are <a class="reference internal" href="rest_api_reference.html#elastic-shared-del-delete-a-new-shared-elastic-source"><span class="std std-ref">elastic_shared_del / Delete a new shared Elastic Source</span></a> and <a class="reference internal" href="rest_api_reference.html#elastic-dedicated-del-delete-a-new-shared-elastic-source"><span class="std std-ref">elastic_dedicated_del / Delete a new shared Elastic Source</span></a></p></li>
<li><p>All related objects are suppressed automatically, this includes the Elastic Sources KVstore collections, the entities in the main Data sources collection, and the scheduled reports for dedicated Elastic Sources</p></li>
<li><p>Actions and content are logges in the audit collection before their suppression</p></li>
</ul>
</div>
</div>
<div class="section" id="outliers-detection-and-behaviour-analytic">
<h2>Outliers detection and behaviour analytic<a class="headerlink" href="#outliers-detection-and-behaviour-analytic" title="Permalink to this headline">¶</a></h2>
<div class="admonition-outliers-detection-feature admonition">
<p class="admonition-title">Outliers detection feature</p>
<p>Outliers detection provides a workflow to automatically detect and alert when the volume of events generated by a source goes beyond or over a usual volume determined by analysing the historical behaviour.</p>
</div>
<a class="with-border reference internal image-reference" href="_images/screenshot_outliers1.png"><img alt="screenshot_outliers1.png" class="with-border align-center" src="_images/screenshot_outliers1.png" style="width: 1200px;" /></a>
<p><strong>How things work:</strong></p>
<ul class="simple">
<li><p>Each execution of the data trackers generates summary events which are indexed as summary data in the same time that the KVstore collections are updated</p></li>
<li><p>These events are processed by the Summary Investigator tracker which uses a standard deviation calculation based approach from the Machine Learning toolkit</p></li>
<li><p>We process standard deviation calculations based on a 4 hours event count reported during each execution of the data trackers</p></li>
<li><p>The Summary Investigator maintains a KVstore lookup which content is used as a source of enrichment by the trackers to define essentially an “isOutlier” flag</p></li>
<li><p>Should outliers be detected based on the policy, which is customisable om a per source basis, the source will be reported in alert</p></li>
<li><p>Different options are provided to control the quality of the outliers calculation, as controlling lower and upper threshold multipliers, or even switching to a static lower bond definition</p></li>
<li><p>Built-in views provide the key feature to quickly investigate the source in alert and proceed to further investigations if required</p></li>
</ul>
<div class="section" id="behaviour-analytic-mode">
<h3>Behaviour Analytic Mode<a class="headerlink" href="#behaviour-analytic-mode" title="Permalink to this headline">¶</a></h3>
<p><strong>By default, the application operates in Production mode, which means that an outlier detection occurring over a data source or host will influence its state effectively.</strong></p>
<p><strong>The behaviour analytic mode can be switched to the following status:</strong></p>
<ul class="simple">
<li><p>production: affects objects status to the red state</p></li>
<li><p>training : affects objects status to the orange state</p></li>
<li><p>disabled: does nothing</p></li>
</ul>
<p><strong>The mode can be configured via UI in the “TrackMe manage and configure” link in the navigation bar:</strong></p>
<a class="with-border reference internal image-reference" href="_images/behaviour_analytic_mode.png"><img alt="behaviour_analytic_mode.png" class="with-border align-center" src="_images/behaviour_analytic_mode.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="using-outliers-detection">
<h3>Using Outliers detection<a class="headerlink" href="#using-outliers-detection" title="Permalink to this headline">¶</a></h3>
<p><strong>By default, the outlier detection is automatically activated for each data source and host, use the Outliers Overview tab to visualize the status of the Outliers detection:</strong></p>
<a class="with-border reference internal image-reference" href="_images/outliers_zoom1.png"><img alt="outliers_zoom1.png" class="with-border align-center" src="_images/outliers_zoom1.png" style="width: 1200px;" /></a>
<p><strong>The table exposes the very last result from the analysis:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>field</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>enable outlier</p></td>
<td><p>defines if behaviour analytic should be enabled or disabled for that source (default to true)</p></td>
</tr>
<tr class="row-odd"><td><p>alert on upper</p></td>
<td><p>defines if outliers detection going over the upper calculations (default to false)</p></td>
</tr>
<tr class="row-even"><td><p>data_tracker_runtime</p></td>
<td><p>last run time of the Summary Investigator tracker which defines the statuses of Outliers detection</p></td>
</tr>
<tr class="row-odd"><td><p>isOutlier</p></td>
<td><p>main flag for Outlier detection, 0=no Outliers detected, 1=Outliers detected</p></td>
</tr>
<tr class="row-even"><td><p>OutlierMinEventCount</p></td>
<td><p>static lower bound value used with static mode, in dynamic mode this is not set</p></td>
</tr>
<tr class="row-odd"><td><p>lower multiplier</p></td>
<td><p>default to 4, modifying the value influences the lower bound calculations based on the data</p></td>
</tr>
<tr class="row-even"><td><p>upper multiplier</p></td>
<td><p>default to 4, modifying the value influences the upper bound calculations based on the data</p></td>
</tr>
<tr class="row-odd"><td><p>lowerBound/upperBound</p></td>
<td><p>exposes latest values for the lower and upper bound</p></td>
</tr>
<tr class="row-even"><td><p>stddev</p></td>
<td><p>exposes the latest value for the standard deviation calculated for that source</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="simulating-and-adjusting-outliers-detection">
<h3>Simulating and adjusting Outliers detection<a class="headerlink" href="#simulating-and-adjusting-outliers-detection" title="Permalink to this headline">¶</a></h3>
<p><strong>Use the Outliers detection configuration tab to run simulations and proceed to configuration adjustments:</strong></p>
<a class="with-border reference internal image-reference" href="_images/outliers_config1.png"><img alt="outliers_config1.png" class="with-border align-center" src="_images/outliers_config1.png" style="width: 1200px;" /></a>
<p><strong>For example, you can increase the value of the threshold multiplier to improve the outliers detection in regard with your knowledge of this data, or how its distribution behaves over time:</strong></p>
<a class="with-border reference internal image-reference" href="_images/outliers_config2.png"><img alt="outliers_config2.png" class="with-border align-center" src="_images/outliers_config2.png" style="width: 1200px;" /></a>
<p><strong>As well, in some cases you may wish to use a static lower bound value, if you use the static mode, then the outlier detection for the lower band is not used anymore and replaced by this static value as the minimal number of events:</strong></p>
<a class="with-border reference internal image-reference" href="_images/outliers_config3.png"><img alt="outliers_config3.png" class="with-border align-center" src="_images/outliers_config3.png" style="width: 1200px;" /></a>
<p><strong>Upper bound outliers detection does not affect the alert status by default, however this option can be enabled and the threshold multiplier be customised if you need to detect a large increase in the volume of data generated by this source:</strong></p>
<a class="with-border reference internal image-reference" href="_images/outliers_upper1.png"><img alt="outliers_upper1.png" class="with-border align-center" src="_images/outliers_upper1.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="saving-the-configuration">
<h3>Saving the configuration<a class="headerlink" href="#saving-the-configuration" title="Permalink to this headline">¶</a></h3>
<p><strong>Once you have validated the results from the simulation, click on the save button to immediately record the values to the KVstore collection.</strong></p>
<p>When the save action is executed, you might need to wait a few minutes for it to be reported during the next execution of the Summary Investigator report.</p>
</div>
</div>
<div class="section" id="data-sampling-and-event-formats-recognition">
<h2>Data sampling and event formats recognition<a class="headerlink" href="#data-sampling-and-event-formats-recognition" title="Permalink to this headline">¶</a></h2>
<div class="admonition-data-sampling-and-event-format-recognition admonition">
<p class="admonition-title">Data sampling and event format recognition</p>
<p>The Data sampling and event format recognition feature is a powerful automated workflow that provides the capabilities to monitor the raw events formats to automatically detect anomalies and misbehaviour at scale:</p>
<ul class="simple">
<li><p>TrackMe automatically picks a sample of from every data source on a scheduled basis, and runs regular expression based rules to find “good” and “bad” things</p></li>
<li><p>builtin rules are provided to identify commonly used formats of data, such as syslog, json, xml, and so forth</p></li>
<li><p>custom rules can be created to extend the feature up to your needs</p></li>
<li><p>rules can be created as rules that need to be matched (looking for a format or specific patterns), or as rules that must not be matched (for example looking for PII data)</p></li>
<li><p>rules that must not match (exclusive rules) are always proceeded before rules that must match (inclusive), this guarantes that if any a same data source would match multiple rules, any first rule matching “bad” things will proceed before a rule matching “good” things (as the engine will stop at the first match for a given event)</p></li>
<li><p>The number of events sampled during each execution can be configured per data source, and otherwise defaults to 100 events at the first sampling, and 50 events for each new execution</p></li>
<li><p>checkout custom rule example creation in the present documentation</p></li>
<li><p>since the version 1.2.35, you can choose to obfuscate the sampled events that are normally stored in the collection, this might be required to avoid unwanted data accesses if you have a population of users in TrackMe who need to have limited access</p></li>
</ul>
</div>
<p><strong>You access to the data sample feature on a per data source basis via the data sample tab when looking at a specific data source:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_main_red.png"><img alt="img_data_sampling_main_red.png" class="with-border align-center" src="_images/img_data_sampling_main_red.png" style="width: 1200px;" /></a>
<p><strong>How things work:</strong></p>
<ul class="simple">
<li><p>The scheduled report named <code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">-</span> <span class="pre">Data</span> <span class="pre">sampling</span> <span class="pre">and</span> <span class="pre">format</span> <span class="pre">detection</span> <span class="pre">tracker</span></code> runs by default every 15 minutes</p></li>
<li><p>The report uses a builtin function to determine an ideal number of data sources to be processed according to the total number of data sources to be processed, and the historical performance of the search (generates a rate per second extrapolated to limit the number of sources to be processed)</p></li>
<li><p>For each data source to be processed, a given number of raw events is sampled and stored in a KVstore collection named <code class="docutils literal notranslate"><span class="pre">trackme_data_sampling</span></code></p></li>
<li><p>The number of raw events to be sampled depends on wether the data source is handled for the first time (discovery), or if it is a normal run</p></li>
<li><p>On each sample per data source, the engine processes the events and applies custom rules if any, then builtin rules are processed</p></li>
<li><p>Depending on the conditions, a status and additional informational fields are determined and stored in the lookup collection</p></li>
<li><p>The status stored as the field <code class="docutils literal notranslate"><span class="pre">isAnomaly</span></code> is loaded by the data sources trackers and taken into account for the global data source state analysis</p></li>
</ul>
<img alt="data_sampling_main.png" class="with-border align-center" src="_images/data_sampling_main.png" />
<div class="section" id="data-sampling-obfuscation-mode">
<h3>Data Sampling obfuscation mode<a class="headerlink" href="#data-sampling-obfuscation-mode" title="Permalink to this headline">¶</a></h3>
<p><strong>Access the configuration page from the navigation bar in TrackMe, “TrackMe manage and configure”:</strong></p>
<a class="with-border reference internal image-reference" href="_images/data_sampling_obfuscate.png"><img alt="data_sampling_obfuscate.png" class="with-border align-center" src="_images/data_sampling_obfuscate.png" style="width: 1200px;" /></a>
<ul class="simple">
<li><p>In the default mode, that is <code class="docutils literal notranslate"><span class="pre">Disable</span> <span class="pre">Data</span> <span class="pre">Sampling</span> <span class="pre">obfuscation</span> <span class="pre">mode</span></code>, events that are sampled are stored in the data sampling KVstore collection and can be used to review the results from the latest sampling operation</p></li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">Enable</span> <span class="pre">Data</span> <span class="pre">Sampling</span> <span class="pre">obfuscation</span> <span class="pre">mode</span></code>, events are not stored anymore and replaced by an admin message, the sampling processing still happens the same way but events cannot be reviewed anymore using the latest sample traces</p></li>
<li><p>In such a case, when then obfuscation mode is enabled, users will need to either run the rules manually to locate the messages that were captured to the conditions being met (bad format, PII data, etc) or use the Smart <a class="reference internal" href="#smart-status"><span class="std std-ref">Smart Status</span></a> feature to have TrackMe run this operation on demand</p></li>
</ul>
<p>As a summary, you can enable the obfuscation mode if you have for instance a population of non admin users in TrackMe and you need to prevent them from accessing events they are not supposed to be able to accesss according to your RBAC policies in Splunk.</p>
<p><em>When a user attempts to create a new custom Data Sampling rule, the UI provides event sampling extracts:</em></p>
<a class="with-border reference internal image-reference" href="_images/data_sampling_obfuscate2.png"><img alt="data_sampling_obfuscate2.png" class="with-border align-center" src="_images/data_sampling_obfuscate2.png" style="width: 1200px;" /></a>
<p>These searches are performed on behalf on the user as normal Splunk searches, as such if the user cannot access to these data, there would be no results accessible.</p>
<p><em>When the obfuscation mode is enabled, trying to access to the latest sample events via the UI (or directly via access to the collection) would result in the following content:</em></p>
<a class="with-border reference internal image-reference" href="_images/data_sampling_obfuscate3.png"><img alt="data_sampling_obfuscate3.png" class="with-border align-center" src="_images/data_sampling_obfuscate3.png" style="width: 1200px;" /></a>
<p>As a conclusion, enable the data sampling obfuscation mode if you are concerned about having users able to access to events they are not supposed to, when it is enabled, the collection cannot contain amymore any potentially sensitive information while the main and more valuable features are preserved.</p>
</div>
<div class="section" id="summary-statuses">
<h3>Summary statuses<a class="headerlink" href="#summary-statuses" title="Permalink to this headline">¶</a></h3>
<p><strong>The data sampling message can be:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">green:</span></code> if no anomalies were detected</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blue:</span></code> if the data sampling did not handle this data source yet</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">orange:</span></code> if conditions do not allow to handle this data source, which can be multi-format detected at discovery, or no identifiable event formats (data sampling will be deactivated automatically)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">red:</span></code> if anomalies were detected by the data engine, anomalies can be due to a change in the event format, or multiple events formats detected post discovery</p></li>
</ul>
<p><em>Green state: no anomalies were detected, data sampling ran and is enabled</em></p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_state_green.png"><img alt="img_data_sampling_state_green.png" class="with-border align-center" src="_images/img_data_sampling_state_green.png" style="width: 1200px;" /></a>
<p><em>Blue state: data sampling engine did not inspect this data source yet</em></p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_state_blue.png"><img alt="img_data_sampling_state_blue.png" class="with-border align-center" src="_images/img_data_sampling_state_blue.png" style="width: 1200px;" /></a>
<p><em>Orange state: data sampling was disabled due to events format recognition conditions that would not allow to manage this data properly (multiformat, no event formats identification possible)</em></p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_state_orange1.png"><img alt="img_data_sampling_state_orange1.png" class="with-border align-center" src="_images/img_data_sampling_state_orange1.png" style="width: 1200px;" /></a>
<p><em>Red state: anomalies were detected</em></p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_state_red.png"><img alt="img_data_sampling_state_red.png" class="with-border align-center" src="_images/img_data_sampling_state_red.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="manage-data-sampling">
<h3>Manage data sampling<a class="headerlink" href="#manage-data-sampling" title="Permalink to this headline">¶</a></h3>
<p><strong>The Manage data sampling button provides access to functions to review and configure the feature:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling002.png"><img alt="img_data_sampling002.png" class="with-border align-center" src="_images/img_data_sampling002.png" style="width: 1200px;" /></a>
<p><strong>The summary table shows the main key information:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data_sample_feature:</span></code> is the data sampling feature enabled or disabled for that data source, rendered as an icon</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">current_detected_format:</span></code> the event format that has been detected during the last sampling</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">previous_detected_format:</span></code> the event format that was detected in the previous sampling</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">state:</span></code> the state of the data sampling rendered as an icon</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">anomaly_reason:</span></code> the reason why an anomaly is raised, or “normal” if there are no anomalies</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">multiformat:</span></code> shall more than one format of events be detected (true / false)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mtime:</span></code> the latest time data sampling was processed for this data source</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_sampling_nr:</span></code> the number of events taken per sampling operation, defaults to 100 events at discovery then 50 events for each new sampling (can be configured via the action Update records/sample)</p></li>
</ul>
<div class="section" id="view-latest-sample-events">
<h4>View latest sample events<a class="headerlink" href="#view-latest-sample-events" title="Permalink to this headline">¶</a></h4>
<p>This button opens in the search UI the last sample of raw events that were processed for this data source, the search calls a macro which runs the events format recognitions rules as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>| inputlookup trackme_data_sampling where data_name=&quot;&lt;data_name&gt;&quot; | fields raw_sample | mvexpand raw_sample | `trackme_data_sampling_abstract_detect_events_format`
</pre></div>
</div>
<p>This view can be useful for trouble shooting purposes to determine why an anomaly was raised for a given data source.</p>
</div>
<div class="section" id="view-builtin-rules">
<h4>View builtin rules<a class="headerlink" href="#view-builtin-rules" title="Permalink to this headline">¶</a></h4>
<p>This button opens a new view that exposes the builtin rules used by TrackMe, and the order in which rules are processed:</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_show_builtin.png"><img alt="img_data_sampling_show_builtin.png" class="with-border align-center" src="_images/img_data_sampling_show_builtin.png" style="width: 1200px;" /></a>
<p>Builtin rules should not be modified, instead use custom rules to handle event formats that would not be properly identified by the builtin regular expression rules.</p>
</div>
<div class="section" id="manage-custom-rules">
<h4>Manage custom rules<a class="headerlink" href="#manage-custom-rules" title="Permalink to this headline">¶</a></h4>
<p>Custom rules provides a workflow to handle any custom sourcetypes and event formats that would not be identified by TrackMe, or patterns that must not be matched, by default there are no custom rules and the following screen would appear:</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_show_custom1.png"><img alt="img_data_sampling_show_custom1.png" class="with-border align-center" src="_images/img_data_sampling_show_custom1.png" style="width: 1200px;" /></a>
<p>This view allows you to create a new custom rule (button Create custom rules) or remove any existing custom rules that would not be required anymore. (button Remove selected)</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Each custom rule can be restricted to a given list of explicit sourcetypes, or applied against any sourcetype. (default)</p>
</div>
<p><strong>Create custom rules</strong></p>
<p>This screen alows to test and create a new custom rule based on the current data source:</p>
<p><em>Note: While you create a new custom rule via a specific data source, custom rules are applied to all data sources</em></p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_create_custom1.png"><img alt="img_data_sampling_create_custom1.png" class="with-border align-center" src="_images/img_data_sampling_create_custom1.png" style="width: 1200px;" /></a>
<p>To create a new custom rule:</p>
<ul class="simple">
<li><p>Enter a name for the rule, this value is a string of your choice that will be used to idenfity the match, it needs to be unique for the entire custom source collection and will be converted into an md5 hash automatically</p></li>
<li><p>Choose if the rule is a “rule must match” or “rule must not match” type of rule, this will drive the match behaviour to define the state of the data sampling results</p></li>
<li><p>Enter a valid regular expression that uniquely identifies the events format</p></li>
<li><p>Optionally restrict the scope of application by sourcetype, you can specify one or more sourcetypes under the form of a comma separated list of values</p></li>
<li><p>Click on “Run model simulation” to simulate the exectution of the new models</p></li>
<li><p>Optionnaly click on “Show sample events” to view a mini sample of the events within the screen</p></li>
<li><p>Optionnaly click on “”Open simulation results in search” to open the details of the rules processing per event in the search UI</p></li>
<li><p>Finally if the status of the simulation is valid, click on “Add this new custom rule” to permanently add this new custom rule</p></li>
</ul>
<p><em>Example:</em></p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_create_custom2.png"><img alt="img_data_sampling_create_custom2.png" class="with-border align-center" src="_images/img_data_sampling_create_custom2.png" style="width: 1200px;" /></a>
<p>Once you have created a new custom rule, this rule will be applied automatically to future executions of the data sampling engine:</p>
<ul class="simple">
<li><p>If the format switches from a format idenfitied by the the builtin rules to a format identified by a custom rule, it will not appear in anomaly</p></li>
<li><p>You can optionally clear the state of the data sampling for that data source to clean any previous states and force a new discovery</p></li>
</ul>
<p><strong>Remove custom rules</strong></p>
<p>Once there is at least one custom rule defined, the list of custom rules appears in the table and can be selected for suppression:</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_delete_custom.png"><img alt="img_data_sampling_delete_custom.png" class="with-border align-center" src="_images/img_data_sampling_delete_custom.png" style="width: 1200px;" /></a>
<p>When a custom rule is removed, future executions of the data sampling engine will not consider the rule deleted anymore, optionally you can run the data sampling engine now or clear the state for a data source.</p>
<p>Custom rules are stored in a KVstore collection which can as well be manually edited if you need to update an exising rule, or modify the order in which rules are processed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">trackme_data_sampling_custom_models</span>
</pre></div>
</div>
</div>
<div class="section" id="run-sampling-engine-now">
<h4>Run sampling engine now<a class="headerlink" href="#run-sampling-engine-now" title="Permalink to this headline">¶</a></h4>
<p>Use this function to force running the data sampling engine now against this data source, this will not force a new discovery and will run the data sampling engine normally. (the current status is preserved)</p>
<p><em>When to use the run sampling engine now?</em></p>
<ul class="simple">
<li><p>You can can run this action at anytime and as often as you need, the action runs the data sampling engine for that data source only</p></li>
<li><p>This action will have no effect if an anomaly was raised for the data source already, when an anomaly is detected the status is frozen (see Clear state and run sampling)</p></li>
</ul>
</div>
<div class="section" id="update-records-sample">
<h4>Update records/sample<a class="headerlink" href="#update-records-sample" title="Permalink to this headline">¶</a></h4>
<p>You can define a custom number of events to be taken per sample using this action button within the UI.</p>
<p>By default, the Data sampling proceeds as following:</p>
<ul class="simple">
<li><p>When the first iteration for a given data source is processed, TrackMe picks a sample of 100 events</p></li>
<li><p>During every new iteration, a sample of 50 events is taken</p></li>
</ul>
<p>In addition, these values are defined globally for the application via the following macros:</p>
<ul class="simple">
<li><p>trackme_data_sampling_default_sample_record_at_discovery</p></li>
<li><p>trackme_data_sampling_default_sample_record_at_run</p></li>
</ul>
<p>Use this UI to choose a different value, increasing the number of events per sample improves the sampling process accuracy, at the cost of more processing and more memory and storage costs for the KVstore collection:</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_records_nr.png"><img alt="img_data_sampling_records_nr.png" class="with-border align-center" src="_images/img_data_sampling_records_nr.png" style="width: 500px;" /></a>
</div>
<div class="section" id="clear-state-and-run-sampling">
<h4>Clear state and run sampling<a class="headerlink" href="#clear-state-and-run-sampling" title="Permalink to this headline">¶</a></h4>
<p>Use this function to clear any state previously determined, this forces the data source to be considered as it was the first time it was investigated by the data sampling engine. (a full sampling is processed and there are no prior status taken into account)</p>
<p><em>When to use the clear state and run sampling?</em></p>
<ul class="simple">
<li><p>Use this action to clear any known states for this data source and run the inspection from zero, just as if it was discovered for the first time</p></li>
<li><p>You can use this action to clear an anomaly that was raised, when an alert is raised by the data sampling, the state is frozen until this anomaly is reviewed, once the issue is understood and fixed, run the action to clear the state and restart the inspection workflow for this data source</p></li>
</ul>
</div>
<div class="section" id="disable-data-sampling-for-a-given-data-source">
<h4>Disable Data sampling for a given data source<a class="headerlink" href="#disable-data-sampling-for-a-given-data-source" title="Permalink to this headline">¶</a></h4>
<p>Use this function to disable data sampling for a given data source, there can be cases where you would need to disable this feature if for example there is a lack of quality which cannot be fixed, and some random formats are introduced out of your control.</p>
<p>Disabling the feature means defining the value of the field <strong>data_sample_feature</strong> to <strong>disabled</strong> in the collection trackme_data_sampling, once disabled the UI would show:</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_disable.png"><img alt="img_data_sampling_disable.png" class="with-border align-center" src="_images/img_data_sampling_disable.png" style="width: 1200px;" /></a>
<p>The Data sampling feature can be enabled / disabled at any point in time, as soon as a data source is disabled, TrackMe stops considering it during the sampling operations.</p>
</div>
</div>
<div class="section" id="data-sampling-audit-dashboard">
<h3>Data sampling Audit dashboard<a class="headerlink" href="#data-sampling-audit-dashboard" title="Permalink to this headline">¶</a></h3>
<p>An audit dashboard is provided in the audit navigation menu, this dashboard provides insight related to the data sampling feature and workflow:</p>
<p><em>Menu Audit / TrackMe - Data sampling and events formats recognition audit</em></p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_audit.png"><img alt="img_data_sampling_audit.png" class="with-border align-center" src="_images/img_data_sampling_audit.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="data-sampling-example-1-monitor-a-specific-format">
<h3>Data sampling example 1: monitor a specific format<a class="headerlink" href="#data-sampling-example-1-monitor-a-specific-format" title="Permalink to this headline">¶</a></h3>
<p>Let’s assume the following use case, we are ingesting Palo Alto firewall data and we want to monitor that our data is stricly respecting a specific expected format, any event that would not match this format would most likely be resulting from malformed events or issues in our ingestion pipeline:</p>
<p>Within the custom rules UI, we proceed to the creation of a new custom rule, in short our events look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Dec</span> <span class="mi">26</span> <span class="mi">12</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">01</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2012</span><span class="o">/</span><span class="mi">26</span><span class="o">/</span><span class="mi">20</span> <span class="mi">12</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">01</span><span class="p">,</span><span class="mi">01606001116</span><span class="p">,</span><span class="n">TRAFFIC</span><span class="p">,</span><span class="n">start</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2012</span><span class="o">/</span><span class="mi">26</span><span class="o">/</span><span class="mi">20</span> <span class="mi">12</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">01</span><span class="p">,</span><span class="mf">192.168.0.2</span><span class="p">,</span><span class="mf">204.232.231.46</span><span class="p">,</span><span class="mf">0.0.0.0</span><span class="p">,</span><span class="mf">0.0.0.0</span><span class="p">,</span>
<span class="n">Dec</span> <span class="mi">26</span> <span class="mi">12</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">02</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2012</span><span class="o">/</span><span class="mi">26</span><span class="o">/</span><span class="mi">20</span> <span class="mi">12</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">02</span><span class="p">,</span><span class="mi">01606001116</span><span class="p">,</span><span class="n">THREAT</span><span class="p">,</span><span class="n">url</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2012</span><span class="o">/</span><span class="mi">26</span><span class="o">/</span><span class="mi">20</span> <span class="mi">12</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">02</span><span class="p">,</span><span class="mf">192.168.0.2</span><span class="p">,</span><span class="mf">204.232.231.46</span><span class="p">,</span><span class="mf">0.0.0.0</span><span class="p">,</span><span class="mf">0.0.0.0</span><span class="p">,</span>
</pre></div>
</div>
<p>We could use the following regular expression to stricly match the format, the data sampling is similar to a where match SPL statement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>^\w{3}\s*\d{1,2}\s*\d{1,2}:\d{1,2}:\d{1,2}\s*\d\,\d{4}\/\d{1,2}\/\d{1,2}\s*\d{1,2}:\d{1,2}:\d{1,2}\,\d+\,(?:TRAFFIC|THREAT)\,
</pre></div>
</div>
<p>Note: the regular expression doesn’t have to be complex, it is up to your decide how strict it should be depending on your use case</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The data sampling engine will stop at the first regular expression match, to handle advanced or more complex configuration, use the sourcetype scope to restrict the custom rule to sourcetypes that should be considered</p>
</div>
<p>We create a <code class="docutils literal notranslate"><span class="pre">rule</span> <span class="pre">must</span> <span class="pre">match</span></code> type of rule, which means that in normal circumstances we expect all events to be matched by our custom rule, otherwise this would be considered as an anomaly.</p>
<p>Once the rule has been created:</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_create_custom2.png"><img alt="img_data_sampling_create_custom2.png" class="with-border align-center" src="_images/img_data_sampling_create_custom2.png" style="width: 1200px;" /></a>
<p>The next execution of the data sampling will report the name of the rule for each data source that is matching our conditions:</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_create_custom3.png"><img alt="img_data_sampling_create_custom3.png" class="with-border align-center" src="_images/img_data_sampling_create_custom3.png" style="width: 1200px;" /></a>
<p>Should a change in the events format happen, such as malformed events happening for any reason, the data sampling rule would match these exceptions and render a status error to be reviewed.</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_create_custom4.png"><img alt="img_data_sampling_create_custom4.png" class="with-border align-center" src="_images/img_data_sampling_create_custom4.png" style="width: 1200px;" /></a>
<p>Review of the latest events sample would clearly show the root cause of the issue: (button <strong>View latest sample events</strong>):</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_create_custom5.png"><img alt="img_data_sampling_create_custom5.png" class="with-border align-center" src="_images/img_data_sampling_create_custom5.png" style="width: 1200px;" /></a>
<p>As the data sampling engine stops proceeding a data source as soon as an issue was detected, these events are the exact events that have caused the anomaly exception at the exact time it happened.</p>
<p>Once investigations have been performed, the root cause was identified and ideally fixed, a TrackMe admin would clear the data sampling state to free the current state and allow the workflow to proceed again in further executions.</p>
</div>
<div class="section" id="data-sampling-example-2-track-pii-data-card-holders">
<h3>Data sampling example 2: track PII data card holders<a class="headerlink" href="#data-sampling-example-2-track-pii-data-card-holders" title="Permalink to this headline">¶</a></h3>
<p>Let’s consider the following use case, we ingest retail transaction logs which are not supposed to contain PII data (Personally Identifiable Information) because the events are anonymised during the indexing phase. (this obviously is a simplitic example for the demonstration purposes)</p>
<p>In our example, we will consider credit card references which are replaced by the according number of “X” characters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Thu</span> <span class="mi">24</span> <span class="n">Dec</span> <span class="mi">2020</span> <span class="mi">13</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">12</span> <span class="n">GMT</span><span class="p">,</span> <span class="n">transaction</span> <span class="k">with</span> <span class="n">user</span><span class="o">=</span><span class="s2">&quot;jbar@acme.com&quot;</span><span class="p">,</span> <span class="n">cardref</span><span class="o">=</span><span class="s2">&quot;XXXXXXXXXXXXXX&quot;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="s2">&quot;completed&quot;</span>
<span class="n">Thu</span> <span class="mi">24</span> <span class="n">Dec</span> <span class="mi">2020</span> <span class="mi">13</span><span class="p">:</span><span class="mi">34</span><span class="p">:</span><span class="mi">24</span> <span class="n">GMT</span><span class="p">,</span> <span class="n">transaction</span> <span class="k">with</span> <span class="n">user</span><span class="o">=</span><span class="s2">&quot;jfoo@acme.com&quot;</span><span class="p">,</span> <span class="n">cardref</span><span class="o">=</span><span class="s2">&quot;XXXXXXXXXXXXXX&quot;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="s2">&quot;failed&quot;</span>
<span class="n">Thu</span> <span class="mi">24</span> <span class="n">Dec</span> <span class="mi">2020</span> <span class="mi">13</span><span class="p">:</span><span class="mi">11</span><span class="p">:</span><span class="mi">45</span> <span class="n">GMT</span><span class="p">,</span> <span class="n">transaction</span> <span class="k">with</span> <span class="n">user</span><span class="o">=</span><span class="s2">&quot;robert@acme.com&quot;</span><span class="p">,</span> <span class="n">cardref</span><span class="o">=</span><span class="s2">&quot;XXXXXXXXXXXXXX&quot;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="s2">&quot;completed&quot;</span>
<span class="n">Thu</span> <span class="mi">24</span> <span class="n">Dec</span> <span class="mi">2020</span> <span class="mi">13</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">22</span> <span class="n">GMT</span><span class="p">,</span> <span class="n">transaction</span> <span class="k">with</span> <span class="n">user</span><span class="o">=</span><span class="s2">&quot;padington@acme.com&quot;</span><span class="p">,</span> <span class="n">cardref</span><span class="o">=</span><span class="s2">&quot;XXXXXXXXXXXXXX&quot;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="s2">&quot;failed&quot;</span>
</pre></div>
</div>
<p>To track for an anomaly in the process that normally anonymises the data, we could rely on a regular expression that targets valid credit card numbers:</p>
<p><em>See:</em> <a class="reference external" href="https://www.regextester.com/93608">https://www.regextester.com/93608</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\d{3})\d{11}
</pre></div>
</div>
<p>Should any event be matching this regular expression, we would most likely face a situation where we have indexed a clear text information that is very problematic, let’s create a new custom rule of a <code class="docutils literal notranslate"><span class="pre">rule</span> <span class="pre">must</span> <span class="pre">not</span> <span class="pre">match</span></code> type to track this use case automatically, to avoid false positive detection we will restrict this custom rule to a given list of sourcetypes:</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_create_custom6.png"><img alt="img_data_sampling_create_custom6.png" class="with-border align-center" src="_images/img_data_sampling_create_custom6.png" style="width: 1200px;" /></a>
<p>Our data uses a format that is recognized automatically by builtin rules, and would appears as following in normal circumstances:</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_create_custom7.png"><img alt="img_data_sampling_create_custom7.png" class="with-border align-center" src="_images/img_data_sampling_create_custom7.png" style="width: 1200px;" /></a>
<p>After some time, we introduce events containing real clear text credit card numbers, eventually our custom rule will automatically detect it and state an alert on the data source:</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_create_custom8.png"><img alt="img_data_sampling_create_custom8.png" class="with-border align-center" src="_images/img_data_sampling_create_custom8.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_create_custom9.png"><img alt="img_data_sampling_create_custom9.png" class="with-border align-center" src="_images/img_data_sampling_create_custom9.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_create_custom10.png"><img alt="img_data_sampling_create_custom10.png" class="with-border align-center" src="_images/img_data_sampling_create_custom10.png" style="width: 1200px;" /></a>
<p>We can clearly understand the root cause of the issue reported by TrackMe, shall we investigate further (button <strong>View latest sample events</strong>):</p>
<a class="with-border reference internal image-reference" href="_images/img_data_sampling_create_custom11.png"><img alt="img_data_sampling_create_custom11.png" class="with-border align-center" src="_images/img_data_sampling_create_custom11.png" style="width: 1200px;" /></a>
<p>Thanks to the data sampling feature, we are able to get an automated tracking that is working at any scale, keep in mind that TrackMe will proceed by picking up samples, which means a very rare condition will potentially not be detected.</p>
<p>However, there is statistically a very high level of chance that if this is happening on a regular basis, this will be detected without having to generate very expensive searches that would look at the entire subset of data. (which would be very expensive and potentially not doable at scale)</p>
</div>
</div>
<div class="section" id="smart-status">
<h2>Smart Status<a class="headerlink" href="#smart-status" title="Permalink to this headline">¶</a></h2>
<div class="section" id="smart-status-introduction">
<h3>Smart Status Introduction<a class="headerlink" href="#smart-status-introduction" title="Permalink to this headline">¶</a></h3>
<p>The Smart Status is a powerful feature that runs automated investigations and correlations.</p>
<p>Under the cover, the Smart Status is a Python based backend exposed via a REST API endpoint, it is available in the TrackMe UI via the <a class="reference internal" href="rest_api_reference.html#rest-api-trackme-spl-command"><span class="std std-ref">REST API trackme SPL command</span></a> and any third party integration via the <a class="reference internal" href="rest_api_reference.html#smart-status-endpoints"><span class="std std-ref">Smart Status endpoints</span></a>.</p>
<p>The feature uses the Python SDK for Splunk and Python capabilities to perform various conditional operations depending on the status of the entity, for instance in short for a data source it does:</p>
<ul class="simple">
<li><p>retrieve the current state of the entity</p></li>
<li><p>perform a correlation over the flipping events to determine if the rate of flipping events is abnormal</p></li>
<li><p>if the status is not green, determine the reason for the status and conditionally perform correlations and provide a report highlting the findings</p></li>
<li><p>finally generate a JSON response with a status code depending on the investigations to ease and fast the understanding of the failure root cause</p></li>
</ul>
<p>In short, the purpose of the feature is to quickly and automatically investigate the entity status, and provide a short path for investigations.</p>
</div>
<div class="section" id="smart-status-within-the-ui">
<h3>Smart Status within the UI<a class="headerlink" href="#smart-status-within-the-ui" title="Permalink to this headline">¶</a></h3>
<p>In the UI, access the Smart Status the open-up screen for a given entity, for data sources, hosts and metric hosts:</p>
<a class="with-border reference internal image-reference" href="_images/access_ui.png"><img alt="img/smart_status/access_ui.png" class="with-border align-center" src="_images/access_ui.png" style="width: 1200px;" /></a>
<p><em>Smart Status example: (normal state entity)</em></p>
<a class="with-border reference internal image-reference" href="_images/access_ui2.png"><img alt="img/smart_status/access_ui2.png" class="with-border align-center" src="_images/access_ui2.png" style="width: 1200px;" /></a>
<p><em>Smart Status example: (alert state entity due to outliers)</em></p>
<a class="with-border reference internal image-reference" href="_images/access_ui3.png"><img alt="img/smart_status/access_ui3.png" class="with-border align-center" src="_images/access_ui3.png" style="width: 1200px;" /></a>
<p><em>Smart Status example: (alert state entity due to data sampling exclusive rule matching PII data)</em></p>
<a class="with-border reference internal image-reference" href="_images/access_ui4.png"><img alt="img/smart_status/access_ui4.png" class="with-border align-center" src="_images/access_ui4.png" style="width: 1200px;" /></a>
<p><em>Smart Status example: (alert state entity due to lagging)</em></p>
<a class="with-border reference internal image-reference" href="_images/access_ui5.png"><img alt="img/smart_status/access_ui5.png" class="with-border align-center" src="_images/access_ui5.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="smart-status-from-external-third-party">
<h3>Smart Status from external third party<a class="headerlink" href="#smart-status-from-external-third-party" title="Permalink to this headline">¶</a></h3>
<p>The Smart Status feature is serviced by a REST API endpoint, as such it can be requested via any external system, such as Splunk Phantom or any other automation plateforns:</p>
<p><em>Smart Status example via Postman:</em></p>
<a class="with-border reference internal image-reference" href="_images/access_rest.png"><img alt="img/smart_status/access_rest.png" class="with-border align-center" src="_images/access_rest.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/access_rest2.png"><img alt="img/smart_status/access_rest2.png" class="with-border align-center" src="_images/access_rest2.png" style="width: 1200px;" /></a>
<p>See: <a class="reference internal" href="rest_api_reference.html#smart-status-endpoints"><span class="std std-ref">Smart Status endpoints</span></a></p>
</div>
</div>
<div class="section" id="alerts-tracking">
<h2>Alerts tracking<a class="headerlink" href="#alerts-tracking" title="Permalink to this headline">¶</a></h2>
<div class="admonition-alerts-tracking admonition">
<p class="admonition-title">Alerts tracking</p>
<ul class="simple">
<li><p>TrackMe relies on Splunk alerts to provide automated results based on your preferences and usage</p></li>
<li><p>One template alert is provided per type of entities (data sources / data hosts / metric hosts) which you can decide to enable and start using straight away</p></li>
<li><p>As well, you can create custom alerts via an assistant which templates a TrackMe alert based on your preferences and choices</p></li>
<li><p>Finally, TrackMe provides builtin alert actions that are used to extend the application functionalities</p></li>
</ul>
</div>
<p>The alert topic is as well discussed at the configuration step: <a class="reference internal" href="configuration.html#step-7-enabling-out-of-the-box-alerts-or-create-your-own-custom-alerts"><span class="std std-ref">Step 7: enabling out of the box alerts or create your own custom alerts</span></a></p>
<div class="section" id="alerts-tracking-main-screen">
<h3>Alerts tracking main screen<a class="headerlink" href="#alerts-tracking-main-screen" title="Permalink to this headline">¶</a></h3>
<p><strong>Within the main TrackMe UI, the alerts tracking screen is available as a selectable tab.</strong></p>
<p><strong>The screen shows a 24 hours overview of the alerts activity:</strong></p>
<a class="with-border reference internal image-reference" href="_images/ootb_alerts.png"><img alt="ootb_alerts.png" class="with-border align-center" src="_images/ootb_alerts.png" style="width: 1200px;" /></a>
<p><strong>Clicking on any alert opens an overview window for this alert with shortcut to the Splunk alert editor and other functions:</strong></p>
<a class="with-border reference internal image-reference" href="_images/ootb_alerts3.png"><img alt="ootb_alerts3.png" class="with-border align-center" src="_images/ootb_alerts3.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="alerts-tracking-out-of-the-box-alerts">
<h3>Alerts tracking: out of the box alerts<a class="headerlink" href="#alerts-tracking-out-of-the-box-alerts" title="Permalink to this headline">¶</a></h3>
<p><strong>Alerts are provided out of the box that cover the basic alerting for all TrackMe entities:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">-</span> <span class="pre">Alert</span> <span class="pre">on</span> <span class="pre">data</span> <span class="pre">source</span> <span class="pre">availability</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">-</span> <span class="pre">Alert</span> <span class="pre">on</span> <span class="pre">data</span> <span class="pre">host</span> <span class="pre">availability</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">-</span> <span class="pre">Alert</span> <span class="pre">on</span> <span class="pre">metric</span> <span class="pre">host</span> <span class="pre">availability</span></code></p></li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Out of the box alerts</p>
<ul class="simple">
<li><p>Out of the box alerts are disabled by default, you need to enable alerts to start using them</p></li>
<li><p>Alerts will trigger by default on <code class="docutils literal notranslate"><span class="pre">high</span> <span class="pre">priority</span></code> entities only, this is controlled via the macro definition <code class="docutils literal notranslate"><span class="pre">trackme_alerts_priority</span></code></p></li>
<li><p>Edit the alert to perform your third party integration, for example <code class="docutils literal notranslate"><span class="pre">sending</span> <span class="pre">emails</span></code> or creating <code class="docutils literal notranslate"><span class="pre">JIRA</span> <span class="pre">issues</span></code> based on Splunk alert actions capabilities</p></li>
<li><p>Out of the box alert enable by default two TrackMe alert actions, <code class="docutils literal notranslate"><span class="pre">automatic</span> <span class="pre">acknowledgement</span></code> and the <code class="docutils literal notranslate"><span class="pre">Smart</span> <span class="pre">Status</span></code> alert actions</p></li>
<li><p>The results of the <code class="docutils literal notranslate"><span class="pre">Smart</span> <span class="pre">Status</span></code> alert action are automatically indexed in the TrackMe summary index within the sourcetype <code class="docutils literal notranslate"><span class="pre">trackme_smart_status</span></code> and can be used for investigation purposes</p></li>
</ul>
</div>
</div>
<div class="section" id="alerts-tracking-custom-alerts">
<h3>Alerts tracking: custom alerts<a class="headerlink" href="#alerts-tracking-custom-alerts" title="Permalink to this headline">¶</a></h3>
<p><strong>You can use this interface to a create one or more custom alerts:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img001.png"><img alt="img001.png" class="with-border align-center" src="_images/img001.png" style="width: 1200px;" /></a>
<p><strong>This opens the assistant where you can choose between different builtin options depending on the type of entities to be monitoring:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img002.png"><img alt="img002.png" class="with-border align-center" src="_images/img002.png" style="width: 800px;" /></a>
<p>Once you have created a new alert, it will be immediately visible in the tracking alerts UI, and you can use the Splunk built alert editor to modify the alert to up to your needs such as enabling third party actions, emails actions and so forth.</p>
<blockquote>
<div><div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Custom alert features</p>
<ul class="simple">
<li><p>Creating custom alerts provide several layers of flexibility depending on your choices and preferences</p></li>
<li><p>You may for example have alerts handling lowest level of prority with a specific type of alert action, and have a specific alert for highly critical entities</p></li>
<li><p>Advanced setup can easily be performed such as getting benefits from the tags features and multiple alerts using tag policies to associate data sources and different types of alerts, recipients, actions…</p></li>
<li><p>You may decide if you wish to enable or disable the TrackMe <code class="docutils literal notranslate"><span class="pre">auto</span> <span class="pre">acknowledgement</span></code> and <code class="docutils literal notranslate"><span class="pre">Smart</span> <span class="pre">Status</span></code> alert actions while creating alerts through the assistant</p></li>
</ul>
</div>
</div></blockquote>
</div>
<div class="section" id="alerts-tracking-trackme-alert-actions">
<h3>Alerts tracking: TrackMe alert actions<a class="headerlink" href="#alerts-tracking-trackme-alert-actions" title="Permalink to this headline">¶</a></h3>
<p><strong>TrackMe provides 3 builtin alert actions that help getting even more value from the application by performing easily some levels of automisation:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">auto</span> <span class="pre">acknowledge</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Trackme</span> <span class="pre">Smart</span> <span class="pre">Status</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">free</span> <span class="pre">style</span> <span class="pre">rest</span> <span class="pre">call</span></code></p></li>
</ul>
<div class="section" id="alert-action-trackme-auto-acknowledge">
<h4>Alert action: TrackMe auto acknowledge<a class="headerlink" href="#alert-action-trackme-auto-acknowledge" title="Permalink to this headline">¶</a></h4>
<a class="with-border reference internal image-reference" href="_images/auto_ack1.png"><img alt="auto_ack1.png" class="with-border align-center" src="_images/auto_ack1.png" style="width: 600px;" /></a>
<div class="admonition-auto-acknowledgement admonition">
<p class="admonition-title">Auto acknowledgement</p>
<ul class="simple">
<li><p>This alert action allows automatically performing an acknowledgement of an entity that enters into a non green state.</p></li>
<li><p>When an acknowledgement is enabled, the entity appears with a specific icon in the UI, you can control and extend the acknowledgement at any time.</p></li>
<li><p>As long as an acknowledgement is enabled for a given entity, there will be no more alerts generated for it, which leaves time enough for the investigations, performing fine tuning if required or fixing the root cause of the issue.</p></li>
<li><p>The alert action activity is logged in <code class="docutils literal notranslate"><span class="pre">(index=&quot;_internal&quot;</span> <span class="pre">OR</span> <span class="pre">index=&quot;cim_modactions&quot;)</span> <span class="pre">sourcetype=&quot;modular_alerts:trackme_auto_ack&quot;</span></code></p></li>
<li><p>A quick access report to the alert execution logs is available in the navigation application menu <code class="docutils literal notranslate"><span class="pre">API</span> <span class="pre">&amp;</span> <span class="pre">tooling/TrackMe</span> <span class="pre">alert</span> <span class="pre">actions</span> <span class="pre">-</span> <span class="pre">auto</span> <span class="pre">ack</span></code></p></li>
</ul>
</div>
<p><em>Example of an auto acknowledge processing logs, at the end of the process the API endpoint JSON result is logged:</em></p>
<a class="with-border reference internal image-reference" href="_images/auto_ack2.png"><img alt="auto_ack2.png" class="with-border align-center" src="_images/auto_ack2.png" style="width: 1200px;" /></a>
<p><strong>An audit change event is automatically logged and visible in the UI:</strong></p>
<a class="with-border reference internal image-reference" href="_images/auto_ack3.png"><img alt="auto_ack3.png" class="with-border align-center" src="_images/auto_ack3.png" style="width: 1200px;" /></a>
<p><em>The entity has the acknowledged icon visible in the main UI screen:</em></p>
<a class="with-border reference internal image-reference" href="_images/auto_ack4.png"><img alt="auto_ack4.png" class="with-border align-center" src="_images/auto_ack4.png" style="width: 1200px;" /></a>
<p><em>The result from the Ack endpoint call can be accessed within the UI in the alert actions screen of the alert that generated the call:</em></p>
<a class="with-border reference internal image-reference" href="_images/auto_ack5.png"><img alt="auto_ack5.png" class="with-border align-center" src="_images/auto_ack5.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="alert-action-trackme-smart-status">
<h4>Alert action: Trackme Smart Status<a class="headerlink" href="#alert-action-trackme-smart-status" title="Permalink to this headline">¶</a></h4>
<a class="with-border reference internal image-reference" href="_images/smart_status1.png"><img alt="smart_status1.png" class="with-border align-center" src="_images/smart_status1.png" style="width: 600px;" /></a>
<div class="admonition-smart-status-alert-action admonition">
<p class="admonition-title">Smart Status alert action</p>
<ul class="simple">
<li><p>The Smart Status is a very advanced feature of TrackMe which performs automated investigations conditioned by the context of the entity</p></li>
<li><p>In normal circumstances, you run the Smart Status action by performing a call to the TrackMe Smart Status API endpoint, or using the Smart Status functions builtin in the TrackMe UI, for more details see: <a class="reference internal" href="#smart-status"><span class="std std-ref">Smart Status</span></a></p></li>
<li><p>Using the alert action, the Smart Status action is performed automatically immediately when the entity triggers, and its result is indexed in the TrackMe summary event index defined in the macro <code class="docutils literal notranslate"><span class="pre">trackme_idx</span></code></p></li>
<li><p>The alert action activity is logged in <code class="docutils literal notranslate"><span class="pre">(index=&quot;_internal&quot;</span> <span class="pre">OR</span> <span class="pre">index=&quot;cim_modactions&quot;)</span> <span class="pre">sourcetype=&quot;modular_alerts:trackme_smart_status&quot;</span></code></p></li>
<li><p>the alert action result (the server response) is indexed in <code class="docutils literal notranslate"><span class="pre">`trackme_idx`</span> <span class="pre">sourcetype=trackme_smart_status</span></code></p></li>
<li><p>A quick access report to the alert execution logs is available in the navigation application menu <code class="docutils literal notranslate"><span class="pre">API</span> <span class="pre">&amp;</span> <span class="pre">tooling/TrackMe</span> <span class="pre">alert</span> <span class="pre">actions</span> <span class="pre">-</span> <span class="pre">Smart</span> <span class="pre">Status</span></code></p></li>
<li><p>A quick access report fo the Smart Status results indexes is available in the navigation application menu <code class="docutils literal notranslate"><span class="pre">API</span> <span class="pre">&amp;</span> <span class="pre">tooling/TrackMe</span> <span class="pre">events</span> <span class="pre">-</span> <span class="pre">Alert</span> <span class="pre">actions</span> <span class="pre">results</span></code></p></li>
</ul>
</div>
<p><em>Example: the alert triggers for a data source, the Smart Status action is executed and its result is indexed</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>`trackme_idx` sourcetype=trackme_smart_status
</pre></div>
</div>
<a class="with-border reference internal image-reference" href="_images/smart_status2.png"><img alt="smart_status2.png" class="with-border align-center" src="_images/smart_status2.png" style="width: 1200px;" /></a>
<p><em>The result from the Smart Status endpoint call can be accessed within the UI in the alert actions screen of the alert that generated the call:</em></p>
<a class="with-border reference internal image-reference" href="_images/smart_status3.png"><img alt="smart_status3.png" class="with-border align-center" src="_images/smart_status3.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="alert-action-trackme-free-style-rest-call">
<h4>Alert action: TrackMe free style rest call<a class="headerlink" href="#alert-action-trackme-free-style-rest-call" title="Permalink to this headline">¶</a></h4>
<a class="with-border reference internal image-reference" href="_images/free_style1.png"><img alt="smart_status1.png" class="with-border align-center" src="_images/free_style1.png" style="width: 600px;" /></a>
<div class="admonition-free-style-alert-action admonition">
<p class="admonition-title">Free style alert action</p>
<ul class="simple">
<li><p>The free style alert action allows you to call any of the TrackMe REST API endpoint to perform an automated action when the alert triggers</p></li>
<li><p>The endpoint and its HTTP mode are configured in the alert action, if a body is expected by the endpoint, you can specify it statistically or recycle a field containing its value that you would define in SPL</p></li>
<li><p>This alert action allows you to setup easily a custom workflow when the alert triggers dependending on your preference and context</p></li>
<li><p>The alert action activity is logged in <code class="docutils literal notranslate"><span class="pre">(index=&quot;_internal&quot;</span> <span class="pre">OR</span> <span class="pre">index=&quot;cim_modactions&quot;)</span> <span class="pre">sourcetype=&quot;modular_alerts:trackme_free_style_rest_call&quot;</span></code></p></li>
<li><p>the alert action result (the server response) is indexed in <code class="docutils literal notranslate"><span class="pre">`trackme_idx`</span> <span class="pre">sourcetype=trackme_alert_action</span></code></p></li>
<li><p>A quick access report to the alert execution logs is available in the navigation application menu <code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">alert</span> <span class="pre">actions</span> <span class="pre">-</span> <span class="pre">free</span> <span class="pre">style</span></code></p></li>
<li><p>A quick access report fo the Smart Status results indexes is available in the navigation application menu <code class="docutils literal notranslate"><span class="pre">API</span> <span class="pre">&amp;</span> <span class="pre">tooling/TrackMe</span> <span class="pre">events</span> <span class="pre">-</span> <span class="pre">Alert</span> <span class="pre">actions</span> <span class="pre">results</span></code></p></li>
</ul>
</div>
<p><strong>The following example will generate an event of the full data source record as it is when the alert triggers:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">Endpoint</span> <span class="pre">URL:</span></code> /services/trackme/v1/data_sources/ds_by_name</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">mode:</span></code> get</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">body:</span></code></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;data_name&#39;</span><span class="p">:</span> <span class="s1">&#39;$result.object$&#39;</span><span class="p">}</span>
</pre></div>
</div>
<a class="with-border reference internal image-reference" href="_images/free_style2.png"><img alt="smart_status2.png" class="with-border align-center" src="_images/free_style2.png" style="width: 600px;" /></a>
<p><em>When the alert triggers:</em></p>
<a class="with-border reference internal image-reference" href="_images/free_style3.png"><img alt="free_style3.png" class="with-border align-center" src="_images/free_style3.png" style="width: 1200px;" /></a>
<p><em>The result from the Smart Status endpoint call can be accessed within the UI in the alert actions screen of the alert that generated the call:</em></p>
<a class="with-border reference internal image-reference" href="_images/free_style4.png"><img alt="free_style4.png" class="with-border align-center" src="_images/free_style4.png" style="width: 1200px;" /></a>
</div>
</div>
<div class="section" id="alerts-acknowledgment-within-the-ui">
<h3>Alerts acknowledgment within the UI<a class="headerlink" href="#alerts-acknowledgment-within-the-ui" title="Permalink to this headline">¶</a></h3>
<div class="admonition-acknowledgement admonition">
<p class="admonition-title">Acknowledgement</p>
<p>When using built-in alerts, you can leverage alert acknowledgments within the UI to silent an active alert during a given period.</p>
</div>
<a class="with-border reference internal image-reference" href="_images/ack1.png"><img alt="ack1.png" class="with-border align-center" src="_images/ack1.png" style="width: 1200px;" /></a>
<p><strong>Acknowledgments provides a way to:</strong></p>
<ul class="simple">
<li><p>Via the user interface, acknowledge an active alert</p></li>
<li><p>Once acknowledged, the entity remains visible in the UI and monitored, but no more alerts will be generated during the time of the acknowledge</p></li>
<li><p>An entity (data source, etc) that is in active alert and has been acknowledged will not generate any new alert for the next 24 hours by default, which value can be increased via the input selector</p></li>
<li><p>Therefore, if the entity flips to a state green again, the acknowledge is automatically disabled</p></li>
<li><p>If the entity flips later on to a red state, a new acknowledge should be created</p></li>
</ul>
<p><strong>Acknowledgment workflow:</strong></p>
<ul class="simple">
<li><p>Via the UI, if the entity is in red state, the “Acknowledgment” button becomes active, otherwise it is inactive and cannot be clicked</p></li>
<li><p>If the acknowledge is confirmed by the user, an active entry is created in the KVstore collection named “kv_trackme_alerts_ack”. (lookup definition trackme_alerts_ack)</p></li>
<li><p>The default duration of acknowledges is define by the macro named “trackme_ack_default_duration”</p></li>
<li><p>Every 5 minutes, the tracker scheduled report named “TrackMe - Ack tracker” verifies if an acknowledge has reached its expiration and will update its status if required</p></li>
<li><p>The tracker as well verifies the current state of the entity, if the entity has flipped again to a green state, the acknowledge is disabled</p></li>
<li><p>An acknowledge can be acknowledged again within the UI, which will extend its expiration for another cycle</p></li>
</ul>
<p><strong>Acknowledge for an active alert is inactive:</strong></p>
<a class="with-border reference internal image-reference" href="_images/ack2.png"><img alt="ack2.png" class="with-border align-center" src="_images/ack2.png" style="width: 1200px;" /></a>
<p><strong>Acknowledge for an active alert is active:</strong></p>
<a class="with-border reference internal image-reference" href="_images/ack3.png"><img alt="ack3.png" class="with-border align-center" src="_images/ack3.png" style="width: 1200px;" /></a>
<p><strong>Once active, an acknowledge can be disabled on demand by clicking on the Ack table:</strong></p>
<a class="with-border reference internal image-reference" href="_images/ack4.png"><img alt="ack4.png" class="with-border align-center" src="_images/ack4.png" style="width: 500px;" /></a>
<p><strong>All acknowledgement related actions are recorded in the audit collection and report.</strong></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When an acknowledgment is active, a specific icon replaces the red state icon which easily indicates that an acknowledgement is currently active for that object.</p>
</div>
<a class="with-border reference internal image-reference" href="_images/ack5.png"><img alt="ack5.png" class="with-border align-center" src="_images/ack5.png" style="width: 1200px;" /></a>
</div>
</div>
<div class="section" id="priority-management">
<h2>Priority management<a class="headerlink" href="#priority-management" title="Permalink to this headline">¶</a></h2>
<div class="section" id="priority-levels">
<h3>Priority levels<a class="headerlink" href="#priority-levels" title="Permalink to this headline">¶</a></h3>
<div class="admonition-priority admonition">
<p class="admonition-title">Priority</p>
<p>TrackMe has a notion of priority for each entity, you can view the priority value in any of the tables from the main interface, in the header when you click on a given entity, and you can modify it via the unified modification UI.</p>
</div>
<p>There 3 level of priorities that can be applied:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">low</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">medium</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">high</span></code></p></li>
</ul>
</div>
<div class="section" id="priority-feature">
<h3>Priority feature<a class="headerlink" href="#priority-feature" title="Permalink to this headline">¶</a></h3>
<p>The purpose of the priority is to provide more granularity in the way you can manage entities.</p>
<p>First, the UI exposes the current status depending on the priority of the entities:</p>
<a class="with-border reference internal image-reference" href="_images/img0012.png"><img alt="img001.png" class="with-border align-center" src="_images/img0012.png" style="width: 1200px;" /></a>
<p>As well, the priority can be easily filtered:</p>
<a class="with-border reference internal image-reference" href="_images/img0022.png"><img alt="img002.png" class="with-border align-center" src="_images/img0022.png" style="width: 1200px;" /></a>
<p>The priority is visible in the table too:</p>
<a class="with-border reference internal image-reference" href="_images/img0031.png"><img alt="img003.png" class="with-border align-center" src="_images/img0031.png" style="width: 1200px;" /></a>
<p>When clicking on an entity, the priority is shown on top with a blue colour scheme that starts from light blue for low, blue for medium and darker blue for high:</p>
<a class="with-border reference internal image-reference" href="_images/img0041.png"><img alt="img004.png" class="with-border align-center" src="_images/img0041.png" style="width: 1200px;" /></a>
<p>The default priority assigned is “medium” and managed by the following macro:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trackme_default_priority</span></code></p></li>
</ul>
<p>Out of the box alerts filter automatically on certain types of priorities, by default <code class="docutils literal notranslate"><span class="pre">medium</span></code> and <code class="docutils literal notranslate"><span class="pre">high</span></code>, which is managed by the following macro:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trackme_alerts_priority</span></code></p></li>
</ul>
</div>
<div class="section" id="modify-the-priority">
<h3>Modify the priority<a class="headerlink" href="#modify-the-priority" title="Permalink to this headline">¶</a></h3>
<p><strong>The priority of an entity can be modified in the UI via the unified modification window:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img0041.png"><img alt="img004.png" class="with-border align-center" src="_images/img0041.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="bulk-update-the-priority">
<h3>Bulk update the priority<a class="headerlink" href="#bulk-update-the-priority" title="Permalink to this headline">¶</a></h3>
<p>If you wish or need to bulk update or maintain the priority of entities such as the data hosts against a third party lookup, such a thing could be easily performed in a single search.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">inputlookup</span> <span class="n">trackme_host_monitoring</span> <span class="o">|</span> <span class="nb">eval</span> <span class="n">key</span><span class="o">=</span><span class="n">_key</span>
<span class="o">|</span> <span class="n">lookup</span> <span class="o">&lt;</span><span class="n">the</span> <span class="n">third</span> <span class="n">party</span> <span class="n">lookup</span><span class="o">&gt;</span> <span class="n">data_host</span> <span class="k">as</span> <span class="n">host</span> <span class="n">OUTPUT</span> <span class="n">priority</span> <span class="k">as</span> <span class="n">new_priority</span> <span class="o">|</span> <span class="nb">eval</span> <span class="n">priority</span><span class="o">=</span><span class="k">if</span><span class="p">(</span><span class="n">isnotnull</span><span class="p">(</span><span class="n">new_priority</span><span class="p">),</span> <span class="n">new_priority</span><span class="p">,</span> <span class="n">priority</span><span class="p">)</span>
<span class="o">|</span> <span class="n">outputlookup</span> <span class="n">trackme_host_monitoring</span> <span class="n">append</span><span class="o">=</span><span class="n">t</span> <span class="n">key_field</span><span class="o">=</span><span class="n">key</span>
</pre></div>
</div>
<p>This search above for instance would bulk update all matched entities.</p>
</div>
</div>
<div class="section" id="monitored-state-enable-disable-buttons">
<h2>Monitored state (enable / disable buttons)<a class="headerlink" href="#monitored-state-enable-disable-buttons" title="Permalink to this headline">¶</a></h2>
<div class="admonition-monitored-state admonition">
<p class="admonition-title">Monitored state</p>
<ul class="simple">
<li><p>Entities have a so called “monitored state”, which can be <code class="docutils literal notranslate"><span class="pre">enabled</span></code> or <code class="docutils literal notranslate"><span class="pre">disabled</span></code>.</p></li>
<li><p>When disabled, an entity disappears from TrackMe UI, will stop being considered for any alert or data generation purposes.</p></li>
</ul>
</div>
<a class="with-border reference internal image-reference" href="_images/enable_disable.png"><img alt="enable_disable.png" class="with-border align-center" src="_images/enable_disable.png" style="width: 1200px;" /></a>
<p>If an entity is set to <code class="docutils literal notranslate"><span class="pre">disabled</span></code>, it will not appear anymore in the main screens, will not be part of any alert results, and no more metrics will be collected for it.</p>
<p>The purpose of this flag is to allow disabling an entity that is discovered automatically because the scope of the data discovery (allowlist / blocklist) allow it.</p>
</div>
<div class="section" id="week-days-monitoring">
<h2>Week days monitoring<a class="headerlink" href="#week-days-monitoring" title="Permalink to this headline">¶</a></h2>
<div class="admonition-week-days-monitoring admonition">
<p class="admonition-title">Week days monitoring</p>
<p>You can modify the rules for days of week monitoring, which means specifying for which days of the week an entity will be monitored actively.</p>
</div>
<p><em>Week days monitoring rules apply to event data only (data sources and hosts)</em></p>
<img alt="week_days1.png" class="with-border align-center" src="_images/week_days1.png" />
<p><strong>Several built-in rules are available:</strong></p>
<ul class="simple">
<li><p>manual:all_days</p></li>
<li><p>manual:monday-to-friday</p></li>
<li><p>manual:monday-to-saturday</p></li>
</ul>
<p><strong>Or you can select explicitly which days of the week:</strong></p>
<a class="with-border reference internal image-reference" href="_images/week_days2.png"><img alt="week_days2.png" class="with-border align-center" src="_images/week_days2.png" style="width: 500px;" /></a>
<p>An entity that would have normally triggered a red state would turn orange instead if the current day is not included in the week days monitoring, allowing to easily exclude it from your alerting logic.</p>
</div>
<div class="section" id="hours-ranges-monitoring">
<h2>Hours ranges monitoring<a class="headerlink" href="#hours-ranges-monitoring" title="Permalink to this headline">¶</a></h2>
<div class="admonition-hours-days-monitoring admonition">
<p class="admonition-title">Hours days monitoring</p>
<p>In addition with the week days monitoring, you can explicitly choose which hours ranges of the days the monitoring rules should apply.</p>
</div>
<img alt="hours_ranges1.png" class="with-border align-center" src="_images/hours_ranges1.png" />
<p><strong>Several built-in rules are available:</strong></p>
<ul class="simple">
<li><p>manual:all_ranges</p></li>
<li><p>manual:08h-to-20h</p></li>
</ul>
<p><strong>Or you can select explicitly which days of the week:</strong></p>
<a class="with-border reference internal image-reference" href="_images/hours_ranges2.png"><img alt="hours_ranges2.png" class="with-border align-center" src="_images/hours_ranges2.png" style="width: 500px;" /></a>
</div>
<div class="section" id="monitoring-level">
<h2>Monitoring level<a class="headerlink" href="#monitoring-level" title="Permalink to this headline">¶</a></h2>
<p><strong>For data sources, you can define if the monitoring applies on the sourcetype level (default) or the index level:</strong></p>
<div class="admonition-monitoring-level admonition">
<p class="admonition-title">Monitoring level</p>
<ul class="simple">
<li><p>The monitoring level can be defined for a data source to either the <code class="docutils literal notranslate"><span class="pre">sourcetype</span></code> level (default) or <code class="docutils literal notranslate"><span class="pre">index</span></code> level.</p></li>
<li><p>When defined against the index, the data source will be considered live until no more data sources generate data in the enitre index hosting the data source.</p></li>
</ul>
</div>
<a class="with-border reference internal image-reference" href="_images/monitoring_level.png"><img alt="monitoring_level.png" class="with-border align-center" src="_images/monitoring_level.png" style="width: 1200px;" /></a>
<p>Feature behaviour:</p>
<ul class="simple">
<li><p>When the monitoring of the data source applies on the sourcetype level, if that combination of index / sourcetype data does not respect the monitoring rule, it will trigger.</p></li>
<li><p>When the monitoring of the data source applies on the index level, we take in consideration what the latest data available is in this index, no matter what the sourcetype is.</p></li>
</ul>
<p>This option is useful for instance if you have multiple sourcetypes in a single index, however some of these sourcetypes are not critical enough to justify raising any alert on their own but these need to remain visible in Trackme for context and troubleshooting purposes.</p>
<p>For example:</p>
<ul class="simple">
<li><p>An index contains the sourcetype “mybusiness:critical” and the sourcetype “mybusiness:informational”</p></li>
<li><p>“mybusiness:critical” is set to sourcetype level</p></li>
<li><p>“mybusiness:informational” is set to index level</p></li>
<li><p>“mybusiness:critical” will generate an alert if lagging conditions are not met for that data source</p></li>
<li><p>“mybusiness:informational” will generate an alert <strong>only</strong> if “mybusiness:critical” monitoring conditions are not met either</p></li>
<li><p>The fact the informational data is not available in the same time than “mybusiness:critical” is a useful information that lets the engineer know that the problem is global for that specific data flow</p></li>
<li><p>Using the index monitoring level for “mybusiness:informational” allows it to be visible in TrackMe without generating alerts on its own as long as “mybusiness:critical” meets the monitoring conditions</p></li>
</ul>
</div>
<div class="section" id="maximal-lagging-value">
<h2>Maximal lagging value<a class="headerlink" href="#maximal-lagging-value" title="Permalink to this headline">¶</a></h2>
<div class="admonition-lagging-value admonition">
<p class="admonition-title">Lagging value</p>
<p>The maximal lagging value defines the threshold to be used for alerting when a given entity goes beyond a certain value in seconds, against both lagging KPIs, or since the version 1.2.19 you can choose between different options.</p>
</div>
<a class="with-border reference internal image-reference" href="_images/max_lagging.png"><img alt=".. image:: img/max_lagging.png" class="with-border align-center" src="_images/max_lagging.png" style="width: 1200px;" /></a>
<p>This topic is covered in details in first steps guide <a class="reference internal" href="#main-navigation-tabs"><span class="std std-ref">Main navigation tabs</span></a> and <a class="reference internal" href="#entities-main-setting-update-screens"><span class="std std-ref">Entities main setting update screens</span></a>.</p>
</div>
<div class="section" id="lagging-classes">
<h2>Lagging classes<a class="headerlink" href="#lagging-classes" title="Permalink to this headline">¶</a></h2>
<div class="admonition-lagging-classes admonition">
<p class="admonition-title">Lagging classes</p>
<ul class="simple">
<li><p>The Lagging classes feature provides capabilities to manage and configure the maximal lagging values allowed in a centralised and automated fashion, based on different factors.</p></li>
<li><p>A lagging class can be configured based on index names, sourcetype values and the entities priority level.</p></li>
<li><p>Lagging classes apply on data sources and hosts, and classes can be created matching either both types of object, data sources or data hosts only.</p></li>
</ul>
</div>
<p><strong>Lagging classes are configurable in the main TrackMe UI:</strong></p>
<a class="with-border reference internal image-reference" href="_images/lagging_class_access.png"><img alt="lagging_class_access.png" class="with-border align-center" src="_images/lagging_class_access.png" style="width: 1200px;" /></a>
<p><strong>Which lets you access to the following UI:</strong></p>
<a class="with-border reference internal image-reference" href="_images/lagging_class_main.png"><img alt="lagging_class_main.png" class="with-border align-center" src="_images/lagging_class_main.png" style="width: 1200px;" /></a>
<p><strong>Lagging classes are controlled by the following main rules:</strong></p>
<ul class="simple">
<li><p>For data sources: lagging classes are applied in the following order: index, sourcetype, priority (first match takes precedence)</p></li>
<li><p>For data hosts: The highest lagging value takes precedence, if multiple sourcetypes, the host global max lag cannot be lower than the highest value between all sourcetypes</p></li>
</ul>
<div class="admonition-lagging-classes-override admonition">
<p class="admonition-title">Lagging classes override</p>
<p>When a lagging class is defined and is matched for a data source or a data host, you can as well override this policy based lagging value by defining a lagging value on the object within the UI and enabling the override option.</p>
</div>
<div class="section" id="lagging-classes-behaviour-for-data-sources">
<h3>Lagging classes behaviour for data sources<a class="headerlink" href="#lagging-classes-behaviour-for-data-sources" title="Permalink to this headline">¶</a></h3>
<p>When a lagging class is configured and defined to apply on data sources (or all), the tracker reports retrieve the lagging class information via enrichment (lookup) and proceed to different conditional operations.</p>
<p>These operations in the case of data sources are proceeded in a specific order as follows:</p>
<ul class="simple">
<li><ol class="arabic simple">
<li><p>index</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="2">
<li><p>sourcetype</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="3">
<li><p>priority</p></li>
</ol>
</li>
</ul>
<p>The first operation that matches a value takes precedence over any other value.</p>
<p>For instance, if a lagging class matches the index “network”, every data source linked to this index will retrieve the maximal lagging value from the lagging class no matters if any other lagging classes would have matched. (priority for example)</p>
<p>As well, it is possible to override this behaviour and manually control the maximal lagging value for a given data source independently from any lagging class matching, this is configurable by modifying the data source configuration: (Modify button)</p>
<a class="with-border reference internal image-reference" href="_images/lagging_class_override.png"><img alt="lagging_class_override.png" class="with-border align-center" src="_images/lagging_class_override.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="lagging-classes-behaviour-for-data-hosts">
<h3>Lagging classes behaviour for data hosts<a class="headerlink" href="#lagging-classes-behaviour-for-data-hosts" title="Permalink to this headline">¶</a></h3>
<p>By definition, the data hosts monitoring is a more complex task which involves for a given entity (host) the monitoring of potentially numbers of sub-entities (sourcetypes).</p>
<p><strong>Main rules for data hosts lagging classes:</strong></p>
<ul class="simple">
<li><p>At first, TrackMe attempts to perform lagging class matching per host and per sourcetype</p></li>
<li><p>For a given sourcetype, the higest lagging value between index based policies and sourcetype based policies is recorded per sourcetype</p></li>
<li><p>Finally, the highest lagging value between all sourcetypes for the host is saved as the general maximal lagging value for the host</p></li>
</ul>
<p><strong>Let’s take the following example:</strong></p>
<ul class="simple">
<li><p>host: winsrv1.acme.com</p></li>
<li><p>3 sourcetypes indexed: XmlWinEventLog, Script:ListeningPorts, WinHostMon</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/lagging_class_override_data_hosts_ex1.png"><img alt="lagging_class_override_data_hosts_ex1.png" class="with-border align-center" src="_images/lagging_class_override_data_hosts_ex1.png" style="width: 1200px;" /></a>
<p>➡️ by default, TrackMe applies a 3600 max lagging value per sourcetype and for the overall host</p>
<ul class="simple">
<li><p>A new lagging class is created to match the sourcetype <code class="docutils literal notranslate"><span class="pre">WinHostMon</span></code> to define a max lagging value of 86400 seconds</p></li>
</ul>
<p>➡️ Once the tracker report has been executed, the sourcetype maximal laggging value is defined accordingly, and the overall max lagging value of the host is set to the highest value between all sourcetypes monitored:</p>
<a class="with-border reference internal image-reference" href="_images/lagging_class_override_data_hosts_ex2.png"><img alt="lagging_class_override_data_hosts_ex2.png" class="with-border align-center" src="_images/lagging_class_override_data_hosts_ex2.png" style="width: 1200px;" /></a>
<ul class="simple">
<li><p>Now let’s create a new lagging class matching the sourcetype <code class="docutils literal notranslate"><span class="pre">Script:ListeningPorts</span></code> with a short max lagging class of 300 seconds</p></li>
<li><p>The provider is stopped for the demonstration purposes</p></li>
<li><p>After 5 minutes, the sourcetype appears in anomaly</p></li>
<li><p>If the data hosts alerting policy is defined to track per sourcetype, the host turns red</p></li>
<li><p>If the data hosts alerting policy is defined to track per host, the host remains green until none of the sourcetype have been indexing for at least the overall max lag of the host</p></li>
</ul>
<p><strong>Alerting policy track per sourcetype:</strong></p>
<a class="with-border reference internal image-reference" href="_images/lagging_class_override_data_hosts_ex3.png"><img alt="lagging_class_override_data_hosts_ex3.png" class="with-border align-center" src="_images/lagging_class_override_data_hosts_ex3.png" style="width: 1200px;" /></a>
<p><strong>Alerting policy track per host:</strong></p>
<a class="with-border reference internal image-reference" href="_images/lagging_class_override_data_hosts_ex4.png"><img alt="lagging_class_override_data_hosts_ex4.png" class="with-border align-center" src="_images/lagging_class_override_data_hosts_ex4.png" style="width: 1200px;" /></a>
<div class="admonition-lagging-classes-override admonition">
<p class="admonition-title">Lagging classes override</p>
<ul class="simple">
<li><p>TrackMe will use the higher value between all sourcetypes to define the max overall lagging value of the host</p></li>
<li><p>This value can as well be overriden on a per host basis in the host modification screen, but should ideally be controlled by automated policies based on indexes or sourcetypes</p></li>
</ul>
</div>
</div>
<div class="section" id="lagging-classes-example-based-on-the-priority">
<h3>Lagging classes example based on the priority<a class="headerlink" href="#lagging-classes-example-based-on-the-priority" title="Permalink to this headline">¶</a></h3>
<p><strong>A common use case, especially for data hosts, is to define lagging values based on the priority.</strong></p>
<p>Let’s assume the following use case:</p>
<ul class="simple">
<li><p>if the priority is <code class="docutils literal notranslate"><span class="pre">low</span></code>, assign a lagging value of <code class="docutils literal notranslate"><span class="pre">432000</span></code> seconds (5 days)</p></li>
<li><p>if the priority is <code class="docutils literal notranslate"><span class="pre">medium</span></code>, assign a lagging value of <code class="docutils literal notranslate"><span class="pre">86400</span></code> seconds (1 day)</p></li>
<li><p>if the priority is <code class="docutils literal notranslate"><span class="pre">high</span></code>, assign a lagging value of <code class="docutils literal notranslate"><span class="pre">14400</span></code> seconds (4 hours)</p></li>
</ul>
<div class="admonition-updating-priority-from-third-party-sources admonition">
<p class="admonition-title">Updating priority from third party sources</p>
<ul class="simple">
<li><p>In KVstore context, it is easy enough to update and maintain specific information such as the priority using third party sources such as any CMDB data that is available to Splunk</p></li>
<li><p>To achieve this, you can simply create your own custom scheduled report that loads the TrackMe collection, enriches with the third party source, and finally updates the values in the TrackMe collection</p></li>
<li><p>The priority value is preserved automatically when the tracker run, as soon as the value has been updated between low / medium / high, it will be preserved</p></li>
</ul>
</div>
<p><em>example: assuming your CMDB data is available in the lookup acme_assets_cmdb:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">inputlookup</span> <span class="n">trackme_host_monitoring</span> <span class="o">|</span> <span class="nb">eval</span> <span class="n">key</span><span class="o">=</span><span class="n">_key</span>
<span class="o">|</span> <span class="n">lookup</span> <span class="n">acme_assets_cmdb</span><span class="o">.</span><span class="n">csv</span> <span class="n">nt_host</span> <span class="k">as</span> <span class="n">data_host</span> <span class="n">OUTPUTNEW</span> <span class="n">priority</span> <span class="k">as</span> <span class="n">cmdb_priority</span>
<span class="o">|</span> <span class="nb">eval</span> <span class="n">priority</span><span class="o">=</span><span class="k">if</span><span class="p">(</span><span class="n">isnotnull</span><span class="p">(</span><span class="n">cmdb_priority</span><span class="p">),</span> <span class="n">cmdb_priority</span><span class="p">,</span> <span class="n">priority</span><span class="p">)</span>
<span class="o">|</span> <span class="n">outputlookup</span> <span class="n">append</span><span class="o">=</span><span class="n">t</span> <span class="n">key_field</span><span class="o">=</span><span class="n">key</span> <span class="n">trackme_host_monitoring</span>
</pre></div>
</div>
<p><em>This report would be scheduled, daily for instance, any existing host having a match in the CMDB lookup will get the priority from the CMDB, newly discovered hosts would get the priority updated as soon as the job runs.</em></p>
<p><strong>Before we apply any lagging classes, our assignment uses the default values:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img_lagging_classes_example_priority1.png"><img alt="img_lagging_classes_example_priority1.png" class="with-border align-center" src="_images/img_lagging_classes_example_priority1.png" style="width: 1200px;" /></a>
<p><strong>Let’s create our 3 lagging classes via the UI, in our example we will want to apply these policies to data hosts only:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img_lagging_classes_example_priority2.png"><img alt="img_lagging_classes_example_priority2.png" class="with-border align-center" src="_images/img_lagging_classes_example_priority2.png" style="width: 1200px;" /></a>
<p><strong>Once the policies have been created, we can run the Data hosts trackers manually or wait for the next automatic execution, policies are applied successfully:</strong></p>
<a class="with-border reference internal image-reference" href="_images/img_lagging_classes_example_priority3.png"><img alt="img_lagging_classes_example_priority3.png" class="with-border align-center" src="_images/img_lagging_classes_example_priority3.png" style="width: 1200px;" /></a>
<p><em>Note: The lagging value that will be inherited from the policy cannot be lower than the highest lagging value between the sourcetypes of a given host, shall this be the case, TrackMe will automatically use the highest lagging value between all sourcetypes linked to that host.</em></p>
</div>
</div>
<div class="section" id="allowlisting-blocklisting">
<h2>Allowlisting &amp; Blocklisting<a class="headerlink" href="#allowlisting-blocklisting" title="Permalink to this headline">¶</a></h2>
<div class="admonition-allowlisting-blocklisting admonition">
<p class="admonition-title">Allowlisting &amp; Blocklisting</p>
<ul class="simple">
<li><p>TrackMe supports allowlisting and blocklisting to configure the scope of the data discovery.</p></li>
<li><p>Allowlisting provides a framework to easily restrict the entire scope of TracKme to an explicit list of allowed indexes.</p></li>
<li><p>Blocklisting provides the opposite feature on a per index / sourcetype / host / data_name basis.</p></li>
</ul>
</div>
<a class="with-border reference internal image-reference" href="_images/allowlist_and_blocklist.png"><img alt="allowlist_and_blocklist.png" class="with-border align-center" src="_images/allowlist_and_blocklist.png" style="width: 800px;" /></a>
<p><strong>The default behaviour of TrackMe is to track data available in all indexes, which changes if allowlisting has been defined:</strong></p>
<a class="with-border reference internal image-reference" href="_images/allowlisting.png"><img alt=".png" class="with-border align-center" src="_images/allowlisting.png" style="width: 800px;" /></a>
<p>Different level of blocklisting features are provided out of the box, which features can be used to avoid taking in consideration indexes, sourcetypes, hosts and data sources based on the data_name generated by TrackMe.</p>
<p><em>The following type of blocklisting entries are supported:*</em></p>
<ul class="simple">
<li><p>explicit names, example: <code class="docutils literal notranslate"><span class="pre">dev001</span></code></p></li>
<li><p>wildcards, example: <code class="docutils literal notranslate"><span class="pre">dev-*</span></code></p></li>
<li><p>regular expressions, example: <code class="docutils literal notranslate"><span class="pre">(?i)dev-.*</span></code></p></li>
</ul>
<p><em>regular expressions are supported starting version 1.1.6.</em></p>
<p><em>metric_category blocklisting for metric hosts supports explicit blacklist only.</em></p>
<p><strong>Adding or removing a blocklist item if performed entirely and easily within the UI:</strong></p>
<a class="with-border reference internal image-reference" href="_images/blocklist_example.png"><img alt="blocklist_example.png" class="with-border align-center" src="_images/blocklist_example.png" style="width: 800px;" /></a>
</div>
<div class="section" id="resetting-collections-to-factory-defaults">
<h2>Resetting collections to factory defaults<a class="headerlink" href="#resetting-collections-to-factory-defaults" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Resetting the collections will entirely flush the content of the data sources / hosts / metric hosts collections, which includes any custom setting that will be have been configured as such as the maximal lagging value.</p>
</div>
<p><strong>The TrackMe Manage and Configure UI provides way to reset the full content of the collections:</strong></p>
<a class="with-border reference internal image-reference" href="_images/reset_btn.png"><img alt="reset_btn.png" class="with-border align-center" src="_images/reset_btn.png" style="width: 1200px;" /></a>
<p><strong>If you validate the operation, all configuration changes will be lost (like week days monitoring rules changes, etc) and the long term tracker will be run automatically:</strong></p>
<img alt="reset1.png" class="with-border align-center" src="_images/reset1.png" />
<p>Once the collection has been cleared, you can simply wait for the trackers next executions, or manually perform a run of the short term and/or long term trackers.</p>
</div>
<div class="section" id="deletion-of-entities">
<h2>Deletion of entities<a class="headerlink" href="#deletion-of-entities" title="Permalink to this headline">¶</a></h2>
<p><strong>You can delete a data source or a data host that was discovered automatically by using the built-in delete function:</strong></p>
<a class="with-border reference internal image-reference" href="_images/delete1.png"><img alt="delete1.png" class="with-border align-center" src="_images/delete1.png" style="width: 1200px;" /></a>
<p><strong>Two options are available:</strong></p>
<a class="with-border reference internal image-reference" href="_images/delete2.png"><img alt="delete2.png" class="with-border align-center" src="_images/delete2.png" style="width: 800px;" /></a>
<ul class="simple">
<li><p>When the data source or host is temporary removed, it will be automatically re-created if it has been active during the time range scope of the trackers.</p></li>
<li><p>When the data source or host is permanently removed, a record of the operation is stored in the audit changes KVstore collection, which we automatically use to prevent the source from being re-created effectively.</p></li>
</ul>
<img alt="delete3.png" class="with-border align-center" src="_images/delete3.png" />
<p>When an entity is deleted via the UI, the audit record exposes the full content of the entity as it was at the time of the deletion:</p>
<a class="with-border reference internal image-reference" href="_images/delete4.png"><img alt="delete4.png" class="with-border align-center" src="_images/delete4.png" style="width: 1200px;" /></a>
<p>It is not possible at the moment to <code class="docutils literal notranslate"><span class="pre">restore</span></code> an entity that was previously deleted, however an active entity can be recreated automatically depending on the scope of the data discovery (the data must be available to TrackMe), and with the help of the audit record you could easily re-apply any settings that would be required.</p>
<p>If an entity was <code class="docutils literal notranslate"><span class="pre">deleted</span> <span class="pre">permanently</span></code> and you wish to get it recreated, the entity must first be actively sending data, TrackMe must be able to see the data (<code class="docutils literal notranslate"><span class="pre">allowlist</span></code> and <code class="docutils literal notranslate"><span class="pre">blocklist</span></code>) and you would need to remove the audit record in the following collection:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trackme_audit_changes</span></code></p></li>
</ul>
<p>Once the record has been deleted, the entity will be recreated automatically during the execution of the trackers.</p>
</div>
<div class="section" id="icon-dynamic-messages">
<h2>Icon dynamic messages<a class="headerlink" href="#icon-dynamic-messages" title="Permalink to this headline">¶</a></h2>
<p><strong>For each type object (data sources / data hosts / metric hosts) the UI shows a status icon which describes the reason for the status with dynamic information:</strong></p>
<img alt="icon_message1.png" class="with-border align-center" src="_images/icon_message1.png" />
<img alt="icon_message2.png" class="with-border align-center" src="_images/icon_message2.png" />
<img alt="icon_message3.png" class="with-border align-center" src="_images/icon_message3.png" />
<p>To access to the dynamic message, simply focus over the icon in the relevant table cell, and the Web browser will automatically display the message for that entity.</p>
</div>
<div class="section" id="logical-groups-clusters">
<h2>Logical groups (clusters)<a class="headerlink" href="#logical-groups-clusters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="logical-groups-feature">
<h3>Logical groups feature<a class="headerlink" href="#logical-groups-feature" title="Permalink to this headline">¶</a></h3>
<div class="admonition-logical-groups admonition">
<p class="admonition-title">Logical groups</p>
<p>Logical groups are groups of entities that will be considered as an ensemble for monitoring purposes.</p>
</div>
<p>A typical use case is a couple of active / passive appliances, where only the active member generates data.</p>
<p>When associated in a Logical group, the entity status relies on the minimal green percentage configured during the group creation versus the current green percentage of the group. (percentages of members green)</p>
<p><em>Notes: Logical groups are available to data hosts and metric hosts monitoring objects.</em></p>
</div>
<div class="section" id="logical-group-example">
<h3>Logical group example<a class="headerlink" href="#logical-group-example" title="Permalink to this headline">¶</a></h3>
<p><strong>Let’s have a look at a simple example of an active / passive firewall, we have two entities which form together a cluster.</strong></p>
<p>Because the passive node might not generate data, we only want to alert if both the active and the passive are not actively sending data.</p>
<a class="with-border reference internal image-reference" href="_images/logical_groups_example1.png"><img alt="logical_groups_example1.png" class="with-border align-center" src="_images/logical_groups_example1.png" style="width: 1200px;" /></a>
<p>In our example, we have two hosts:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FIREWALL.PAN.AMER.NODE1</span></code> which is the active node, and green in TrackMe</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIREWALL.PAN.AMER.NODE2</span></code> which is the passive node, and hasn’t sent data recently enough in TrackMe to be considered as green</p></li>
</ul>
<p><strong>Let’s create a logical group:</strong></p>
<p>For this, we click on the first host, then Modify and finally we click on the Logical groups button:</p>
<a class="with-border reference internal image-reference" href="_images/logical_groups_example2.png"><img alt="logical_groups_example2.png" class="with-border align-center" src="_images/logical_groups_example2.png" style="width: 800px;" /></a>
<p>Since we don’t have yet a group, let’s create a new group:</p>
<a class="with-border reference internal image-reference" href="_images/logical_groups_example3.png"><img alt="logical_groups_example3.png" class="with-border align-center" src="_images/logical_groups_example3.png" style="width: 800px;" /></a>
<p>Once the group is created, the first node is automatically associated with the group, let’s click on the second node and associate it with our new group:</p>
<a class="with-border reference internal image-reference" href="_images/logical_groups_example4.png"><img alt="logical_groups_example4.png" class="with-border align-center" src="_images/logical_groups_example4.png" style="width: 1200px;" /></a>
<p>We clicked on the group which we want to associate the entity with, which performs the association automatically, finally we can see the state of the second host has changed from <code class="docutils literal notranslate"><span class="pre">red</span></code> to <code class="docutils literal notranslate"><span class="pre">blue</span></code>:</p>
<a class="with-border reference internal image-reference" href="_images/logical_groups_example5.png"><img alt="logical_groups_example5.png" class="with-border align-center" src="_images/logical_groups_example5.png" style="width: 1200px;" /></a>
<p>If we click on the entity and check the status message tab, we can observe a clear message indicating the reason of the state including the name of the logical group this entity is part of:</p>
<a class="with-border reference internal image-reference" href="_images/logical_groups_example6.png"><img alt="logical_groups_example6.png" class="with-border align-center" src="_images/logical_groups_example6.png" style="width: 1200px;" /></a>
<p>Shall later on the situation be inversed, the active node became passive and the passive became passive, the states will be reversed, since the logical group monitoring rules (50% active) are respected there will not be any alert generated:</p>
<a class="with-border reference internal image-reference" href="_images/logical_groups_example7.png"><img alt="logical_groups_example7.png" class="with-border align-center" src="_images/logical_groups_example7.png" style="width: 1200px;" /></a>
<p>Finally, shall both entities be inactive, their status will be <code class="docutils literal notranslate"><span class="pre">red</span></code> and alerts will be emitted as none of these are meeting the logical group monitoring rules:</p>
<a class="with-border reference internal image-reference" href="_images/logical_groups_example8.png"><img alt="logical_groups_example8.png" class="with-border align-center" src="_images/logical_groups_example8.png" style="width: 1200px;" /></a>
<p>The status message tab would expose clearly the reason of the <code class="docutils literal notranslate"><span class="pre">red</span></code> status:</p>
<a class="with-border reference internal image-reference" href="_images/logical_groups_example9.png"><img alt="logical_groups_example9.png" class="with-border align-center" src="_images/logical_groups_example9.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="create-a-new-logical-group">
<h3>Create a new logical group<a class="headerlink" href="#create-a-new-logical-group" title="Permalink to this headline">¶</a></h3>
<p>To create a new logical group and associate a first member, enter the unified modification window (click on an entity and modify button), then click on the “Manage in a Logical group” button:</p>
<a class="with-border reference internal image-reference" href="_images/logical_group1.png"><img alt="logical_group1.png" class="with-border align-center" src="_images/logical_group1.png" style="width: 800px;" /></a>
<p>If the entity is not yet associated with a logical group (an entity cannot be associated with more than one group), the following message is displayed:</p>
<a class="with-border reference internal image-reference" href="_images/logical_group3.png"><img alt="logical_group3.png" class="with-border align-center" src="_images/logical_group3.png" style="width: 800px;" /></a>
<p>Click on the button “Create a new group” which opens the following configuration window:</p>
<a class="with-border reference internal image-reference" href="_images/logical_group4.png"><img alt="logical_group4.png" class="with-border align-center" src="_images/logical_group4.png" style="width: 800px;" /></a>
<ul class="simple">
<li><p>Enter a name for the logical group (names do not need to be unique and can accept any ascii characters)</p></li>
<li><p>Choose a minimal green percentage for the group, this defines the alerting factor for that group, for example when using 50% (default), a minimal 50% or more of the members need to be green for the logical group status to be green</p></li>
</ul>
</div>
<div class="section" id="associate-to-an-existing-logical-group">
<h3>Associate to an existing logical group<a class="headerlink" href="#associate-to-an-existing-logical-group" title="Permalink to this headline">¶</a></h3>
<p>If a logical group already exists and you wish to associate this entity to this group, following the same path (Modify entity) and select the button “Add to an existing group”:</p>
<a class="with-border reference internal image-reference" href="_images/logical_group5.png"><img alt="logical_group5.png" class="with-border align-center" src="_images/logical_group5.png" style="width: 1200px;" /></a>
<ul class="simple">
<li><p>Optionally use the filter input box to search for a logical group</p></li>
<li><p>Click on then logical group entity table, and confirm association to automatically the entity in this logical group</p></li>
</ul>
</div>
<div class="section" id="how-alerting-is-handled-once-the-logical-group-is-created-with-enough-members">
<h3>How alerting is handled once the logical group is created with enough members<a class="headerlink" href="#how-alerting-is-handled-once-the-logical-group-is-created-with-enough-members" title="Permalink to this headline">¶</a></h3>
<div class="section" id="member-of-logical-group-is-red-but-logical-group-is-green">
<h4>Member of logical group is red but logical group is green<a class="headerlink" href="#member-of-logical-group-is-red-but-logical-group-is-green" title="Permalink to this headline">¶</a></h4>
<p>When an entity is associated to a logical group and if this entity is in red status, but the logical group complies with the monitoring rules, the UI will show a blue icon message which dynamically provides logical group information:</p>
<img alt="logical_group6.png" class="with-border align-center" src="_images/logical_group6.png" />
<p>In addition, the entity will not be eligible to trigger any alert as long as the logical group honours the monitoring rules.(minimal green percentage of the logical group)</p>
</div>
<div class="section" id="member-of-logical-group-is-red-and-logical-group-is-red">
<h4>Member of logical group is red and logical group is red<a class="headerlink" href="#member-of-logical-group-is-red-and-logical-group-is-red" title="Permalink to this headline">¶</a></h4>
<p>When an entity associated to a logical group is red, and the logical group is red as well (for example in a logical group of 2 nodes where both nodes are down), the UI shows the following:</p>
<img alt="logical_group7.png" class="with-border align-center" src="_images/logical_group7.png" />
<p>Alerts will be generated for any entities part of the logical groups which are in red status, and where the monitoring state is enabled.</p>
</div>
</div>
<div class="section" id="remove-association-from-a-logical-group">
<h3>Remove association from a logical group<a class="headerlink" href="#remove-association-from-a-logical-group" title="Permalink to this headline">¶</a></h3>
<p>To remove an association from a logical group, click on the entry table in the initial logical group screen for that entity:</p>
<a class="with-border reference internal image-reference" href="_images/logical_group8.png"><img alt="logical_group8.png" class="with-border align-center" src="_images/logical_group8.png" style="width: 1200px;" /></a>
<p>Once the action is confirmed, the association is immediately removed and the entity acts as any other independent entities.</p>
</div>
</div>
<div class="section" id="alerting-policy-for-data-hosts">
<h2>Alerting policy for data hosts<a class="headerlink" href="#alerting-policy-for-data-hosts" title="Permalink to this headline">¶</a></h2>
<div class="admonition-data-hosts-alerting-policy-management admonition">
<p class="admonition-title">Data hosts alerting policy management</p>
<ul class="simple">
<li><p>The alerting policy controls how the state of a data host gets defined depending on the sourcetypes that are emitting data</p></li>
<li><p>The global default mode named “track per host” instructs TrackMe to turn an host to red only if no sourcetypes are being indexed and respecting monitoring rules</p></li>
<li><p>The global alternative mode named “track per sourcetype” instructs TrackMe to consider sourcetypes and their monitoring rules individually on a per host basis, to finally define the overall state of the host</p></li>
<li><p>This global mode can optionally be overriden on a per host basis via the configuration screen of the data host</p></li>
</ul>
</div>
<p>See <a class="reference internal" href="configuration.html#trackme-data-hosts-define-what-works-for-you"><span class="std std-ref">Data Hosts alerting policy</span></a> to control the global policy settings.</p>
<p><strong>An host emitting multiple sourcetypes will appear in the UI with a multi value summary field describing the state and main information of sourcetypes:</strong></p>
<a class="with-border reference internal image-reference" href="_images/data_hosts_alerting_policy1.png"><img alt="data_hosts_alerting_policy1.png" class="with-border align-center" src="_images/data_hosts_alerting_policy1.png" style="width: 1200px;" /></a>
<p><strong>Zooming on the summary sourcetype field:</strong></p>
<a class="with-border reference internal image-reference" href="_images/data_hosts_alerting_policy2.png"><img alt="data_hosts_alerting_policy2.png" class="with-border align-center" src="_images/data_hosts_alerting_policy2.png" style="width: 1000px;" /></a>
<p><strong>The field provides visibility against each sourcetype known to the host, a main state (red / green) represented by an ASCII emoji and the KPI main information about the sourcetypes:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">max_allowed</span></code>: the maximal laggging value allowed for this sourcetype according to the monitoring rules (lagging classes, default lagging)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">last_time</span></code>: A human readable format of the latest events available for that host from the event timestamp point of view (_time)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">last_event_lag</span></code>: The current event lag value in seconds (difference between now and the latest _time available for this host/sourcetype)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">last_ingest_lag</span></code>: The current indexing lag value in seconds (difference between the event timestamp and the indexing time)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">state</span></code>: for readability purposes, the state green/red is represented as an ASCII emoji</p></li>
</ul>
<p><strong>Should any sourcetype not being indexed or not respecting the monitoring rules, the state icon will turn red:</strong></p>
<a class="with-border reference internal image-reference" href="_images/data_hosts_alerting_policy3.png"><img alt="data_hosts_alerting_policy3.png" class="with-border align-center" src="_images/data_hosts_alerting_policy3.png" style="width: 1000px;" /></a>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>If a sourcetypes turns <code class="docutils literal notranslate"><span class="pre">red</span></code>, this will NOT impact the state of the host unless the global policy is set to <code class="docutils literal notranslate"><span class="pre">track</span> <span class="pre">per</span> <span class="pre">sourcetype</span></code>, or the host policy is defined for that host especially</p>
</div>
<p><strong>To configure sourcetypes to be taken into account individually, you can either:</strong></p>
<ul class="simple">
<li><p>Define the global policy accordingly (note: this applies by default to all hosts), See <a class="reference internal" href="configuration.html#trackme-data-hosts-define-what-works-for-you"><span class="std std-ref">Data Hosts alerting policy</span></a></p></li>
<li><p>Define the alerting policy for that host especially in the data host configuration screen</p></li>
</ul>
<p><strong>Defining a policy per host:</strong></p>
<p><em>In the data host UI, click on the modify button to access to the alerting policy dropdown:</em></p>
<a class="with-border reference internal image-reference" href="_images/data_hosts_alerting_policy4.png"><img alt="data_hosts_alerting_policy4.png" class="with-border align-center" src="_images/data_hosts_alerting_policy4.png" style="width: 1200px;" /></a>
<p><strong>Three options are available:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">global</span> <span class="pre">policy</span></code>: instructs the data host settings to rely on the global alerting policy</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">red</span> <span class="pre">if</span> <span class="pre">at</span> <span class="pre">least</span> <span class="pre">one</span> <span class="pre">sourcetype</span> <span class="pre">is</span> <span class="pre">red</span></code>: instructs TrackMe to turn the host red if at least one sourcetype is in a red state (track per sourcetype)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">red</span> <span class="pre">only</span> <span class="pre">if</span> <span class="pre">all</span> <span class="pre">sourcetypes</span> <span class="pre">are</span> <span class="pre">red</span></code>: instructs TrackMe to turn the host red only if none of the sourcetypes are respecting monitoring rules (track per host)</p></li>
</ul>
<p><em>When a mode is defined for a given host that is not equal to the global policy, then the global alerting policy is ignored and replaced by the setting defined for that host.</em></p>
<p><strong>Behaviour examples:</strong></p>
<p><em>Alerting policy track per sourcetype:</em></p>
<a class="with-border reference internal image-reference" href="_images/lagging_class_override_data_hosts_ex3.png"><img alt="lagging_class_override_data_hosts_ex3.png" class="with-border align-center" src="_images/lagging_class_override_data_hosts_ex3.png" style="width: 1200px;" /></a>
<p><em>Alerting policy track per host:</em></p>
<a class="with-border reference internal image-reference" href="_images/lagging_class_override_data_hosts_ex4.png"><img alt="lagging_class_override_data_hosts_ex4.png" class="with-border align-center" src="_images/lagging_class_override_data_hosts_ex4.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="tags">
<h2>Tags<a class="headerlink" href="#tags" title="Permalink to this headline">¶</a></h2>
<div class="admonition-tags-feature admonition">
<p class="admonition-title">Tags feature</p>
<ul class="simple">
<li><p>Tags are keywords that can be defined per data source, this feature provides additional filtering options to group multiple data sources based on any custom criterias.</p></li>
<li><p>Tags are available for data sources monitoring only.</p></li>
</ul>
</div>
<p><strong>Tags can be defined using:</strong></p>
<ul class="simple">
<li><p>Tags policies, which are regular expressions rules that you can define to automatically apply tags conditionally</p></li>
<li><p>Manual tags, which you can define manually via the Tags UI on a per data source basis</p></li>
</ul>
<p><strong>Tags feature purpose:</strong></p>
<p><em>For instance, you may want to tag data sources containing PII data, such that data sources matching this criteria can be filtered on easily in the main TrackMe UI:</em></p>
<a class="with-border reference internal image-reference" href="_images/tags_filter.png"><img alt="tags_filter.png" class="with-border align-center" src="_images/tags_filter.png" style="width: 1200px;" /></a>
<div class="section" id="tags-policies">
<h3>Tags policies<a class="headerlink" href="#tags-policies" title="Permalink to this headline">¶</a></h3>
<p><strong>The tags policies editor can be opened via the data sources main screen tab, and the button Tags policies:</strong></p>
<a class="with-border reference internal image-reference" href="_images/tags_policies_img001.png"><img alt="tags_policies_img001.png" class="with-border align-center" src="_images/tags_policies_img001.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/tags_policies_img002.png"><img alt="tags_policies_img002.png" class="with-border align-center" src="_images/tags_policies_img002.png" style="width: 1200px;" /></a>
<div class="section" id="create-a-new-tags-policy">
<h4>Create a new tags policy<a class="headerlink" href="#create-a-new-tags-policy" title="Permalink to this headline">¶</a></h4>
<p><strong>To create a new tags policy, click on the Create policy button:</strong></p>
<a class="with-border reference internal image-reference" href="_images/tags_policies_img003.png"><img alt="tags_policies_img003.png" class="with-border align-center" src="_images/tags_policies_img003.png" style="width: 1200px;" /></a>
<p><strong>Fill the UI with the required information:</strong></p>
<ul class="simple">
<li><p><strong>Enter a unique name for this policy:</strong> this id will be used and stored as the value for the field tags_policy_id in the KVstore collection</p></li>
<li><p><strong>Regular expression rule:</strong> this is the regular expression that will be used to conditionally apply the tags against the data_name field for every data source</p></li>
<li><p><strong>List of tags:</strong> the tags to be applied when the regular expression matches, multiple tags can be specified in a comma separated fashion</p></li>
</ul>
<p>Tags policies are applied sequentially in the order the entries are stored in the KVstore collection, should a regular expression match, the execution for this specific data source stops at the first match.</p>
<p><em>Example:</em></p>
<ul class="simple">
<li><p>Assuming you have a naming convention for indexes, where all indexes starting by “linux_” contain OS logs of Linux based OS</p></li>
<li><p>Automatically, the following tags will be defined for every data source that matches the regular expression rule, “OS,Linux,Non-PII”</p></li>
</ul>
<p><em>The following policy would be defined:</em></p>
<a class="with-border reference internal image-reference" href="_images/tags_policies_img004.png"><img alt="tags_policies_img004.png" class="with-border align-center" src="_images/tags_policies_img004.png" style="width: 1200px;" /></a>
<p><em>Once the simulation was executed, click on the red button “Add this new policy”:</em></p>
<a class="with-border reference internal image-reference" href="_images/tags_policies_img005.png"><img alt="tags_policies_img005.png" class="with-border align-center" src="_images/tags_policies_img005.png" style="width: 1200px;" /></a>
<p><em>Tags policies are applied automatically by the data source trackers, you can wait for scheduled executions or manually run the tracker (short term or long term, or both) to immediately assign the tags:</em></p>
<a class="with-border reference internal image-reference" href="_images/tags_policies_img006.png"><img alt="tags_policies_img006.png" class="with-border align-center" src="_images/tags_policies_img006.png" style="width: 800px;" /></a>
</div>
<div class="section" id="tag-policy-multiple-matching">
<h4>Tag policy multiple matching<a class="headerlink" href="#tag-policy-multiple-matching" title="Permalink to this headline">¶</a></h4>
<p><strong>Tag policies are based on regular expressions, you can match multiple cases in a single policy relying on regex capabilities.</strong></p>
<p><strong>Say you want to match entities:</strong></p>
<ul class="simple">
<li><p>containing “network” at the beginning of the data source name</p></li>
<li><p>containing “firewall” at the beginning of the data source name</p></li>
<li><p>containing “proxy” at the beginning of the data source name</p></li>
</ul>
<p>A very simple regular expression could be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>^(network|firewall?proxy).*
</pre></div>
</div>
<p>Which you can complete with as many conditions as needed.</p>
<p><strong>You can obvisouly be even more specific, say we want to match:</strong></p>
<ul class="simple">
<li><p>entities that are starting by “linux_” as the index prefix</p></li>
<li><p>in these entities, only those matching either “amer”, “emea” or “apac”</p></li>
<li><p>terminate properly the entities naming convention, such that there can be no risk of unexpectly matching other entities</p></li>
</ul>
<p>Our entities look like: (note that in this example we use the merging mode, therefore all entities are suffixed by “:all”)</p>
<ul class="simple">
<li><p>“linux_amer:all”</p></li>
<li><p>“linux_emea:all”</p></li>
<li><p>“linux_apac:all”</p></li>
</ul>
<p>Our strict matching tag policy regular expression could be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>^linux_(amer|apac|emea):all$
</pre></div>
</div>
</div>
<div class="section" id="update-and-delete-tags-policies">
<h4>Update and delete tags policies<a class="headerlink" href="#update-and-delete-tags-policies" title="Permalink to this headline">¶</a></h4>
<p><strong>You cannot update tags policies via the UI, if you need to change a tags policy, you have to delete and re-create the policy using the UI:</strong></p>
<a class="with-border reference internal image-reference" href="_images/tags_policies_img007.png"><img alt="tags_policies_img007.png" class="with-border align-center" src="_images/tags_policies_img007.png" style="width: 1200px;" /></a>
</div>
</div>
<div class="section" id="manual-tags">
<h3>Manual tags<a class="headerlink" href="#manual-tags" title="Permalink to this headline">¶</a></h3>
<p><strong>Manual tags are available per data source, and allows manually defining a list of tags via the UI:</strong></p>
<a class="with-border reference internal image-reference" href="_images/tags_img001.png"><img alt="tags_img001.png" class="with-border align-center" src="_images/tags_img001.png" style="width: 1200px;" /></a>
<p><strong>When no tags have been defined yet for a data source, the following screen would appear:</strong></p>
<a class="with-border reference internal image-reference" href="_images/tags_img002.png"><img alt="tags_img002.png" class="with-border align-center" src="_images/tags_img002.png" style="width: 800px;" /></a>
<p><strong>When tags have been defined for a data source, the following screen would appear:</strong></p>
<a class="with-border reference internal image-reference" href="_images/tags_img002bis.png"><img alt="tags_img002bis.png" class="with-border align-center" src="_images/tags_img002bis.png" style="width: 800px;" /></a>
<p><strong>You can click on the “Manage: manual tags” button to define one or more tags for a given data source:</strong></p>
<a class="with-border reference internal image-reference" href="_images/tags_img003.png"><img alt="tags_img003.png" class="with-border align-center" src="_images/tags_img003.png" style="width: 800px;" /></a>
<p><em>Tags are stored in the data sources KVstore collection in a field called “tags”, when multiple tags are defined, the list of tags is defined as a comma separated list of values.</em></p>
<div class="section" id="adding-new-tags">
<h4>Adding new tags<a class="headerlink" href="#adding-new-tags" title="Permalink to this headline">¶</a></h4>
<p><strong>You can add a new tag by using the Add tag input and button, the tag format is free, can contain spaces or special characters, however for reliability purposes you should keep things clear and simple.</strong></p>
<a class="with-border reference internal image-reference" href="_images/tags_img004.png"><img alt="tags_img004.png" class="with-border align-center" src="_images/tags_img004.png" style="width: 800px;" /></a>
<p>Once a new tag is added, it is made available automatically in the tag filter from the main Trackme data source screen.</p>
</div>
<div class="section" id="updating-tags">
<h4>Updating tags<a class="headerlink" href="#updating-tags" title="Permalink to this headline">¶</a></h4>
<p><strong>Note: Tags that have been defined by a tags policies will be defined again as long as the policy applies, to update tags applied by policies, the policy has to be updated</strong></p>
<p><strong>You can update tags using the multi-select dropdown input, by update we mean that you can clear one or more tags that are currently affected to a given data source, which updates immediately the list of tags in the main screen tags filter form.</strong></p>
<a class="with-border reference internal image-reference" href="_images/tags_img005.png"><img alt="tags_img005.png" class="with-border align-center" src="_images/tags_img005.png" style="width: 800px;" /></a>
</div>
<div class="section" id="clearing-tags">
<h4>Clearing tags<a class="headerlink" href="#clearing-tags" title="Permalink to this headline">¶</a></h4>
<p><strong>Note: Tags that have been defined by a tags policies will be defined again as long as the policy applies, to update tags applied by policies, the policy has to be updated</strong></p>
<p><strong>You can clear all tags that are currently affected to a data source, by clicking on the Clear tags button, you remove all tags for this data source.</strong></p>
<a class="with-border reference internal image-reference" href="_images/tags_img006.png"><img alt="tags_img006.png" class="with-border align-center" src="_images/tags_img006.png" style="width: 800px;" /></a>
</div>
</div>
</div>
<div class="section" id="data-identity-card">
<h2>Data identity card<a class="headerlink" href="#data-identity-card" title="Permalink to this headline">¶</a></h2>
<div class="admonition-data-identity-card admonition">
<p class="admonition-title">Data identity card</p>
<ul class="simple">
<li><p>Data identity cards allow you to define a Web link and a documentation note that will be stored in a KVstore collection, and made available automatically via the UI and the out of the box alert.</p></li>
<li><p>Data identity cards are managed via the UI, when no card has been defined yet for a data source, a message indicating it is shown.</p></li>
<li><p>Data identity cards are available for data sources monitoring only.</p></li>
<li><p>You can define a global idendity card that will be used by default to provide a link and a note, and you can still create specific identity cards and associations.</p></li>
<li><p>You can define wildcard matching identity cards using the API endpoint and the trackme SPL command.</p></li>
</ul>
</div>
<a class="with-border reference internal image-reference" href="_images/identity_card4.png"><img alt="identity_card4.png" class="with-border align-center" src="_images/identity_card4.png" style="width: 800px;" /></a>
<div class="section" id="data-identity-global-identity-card">
<h3>Data identity: global identity card<a class="headerlink" href="#data-identity-global-identity-card" title="Permalink to this headline">¶</a></h3>
<p>As a TrackMe administrator, define a value for the global URL and the global note macros, you can quickly access these macros in the <strong>TrackMe Manage and configure</strong> UI:</p>
<a class="with-border reference internal image-reference" href="_images/identity_card_global.png"><img alt="identity_card_global.png" class="with-border align-center" src="_images/identity_card_global.png" style="width: 1200px;" /></a>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The global identity card is enabled only if a value was defined for <strong>both</strong> the URL and the note</p>
</div>
<p><em>Once defined, the global identity card shows an active link:</em></p>
<a class="with-border reference internal image-reference" href="_images/identity_card_defined.png"><img alt="identity_card_defined.png" class="with-border align-center" src="_images/identity_card_defined.png" style="width: 500px;" /></a>
<p><em>Following the link opens the identity card UI:</em></p>
<a class="with-border reference internal image-reference" href="_images/identity_card_global2.png"><img alt="identity_card_global2.png" class="with-border align-center" src="_images/identity_card_global2.png" style="width: 800px;" /></a>
<p><em>Given that this is a global identity card, the “Delete card” is disabled automatically, however it is still possible to create a new identity card to be associated with this data source which will replace the global card automatically.</em></p>
<p><em>Note: if you create a global card while existing cards have defined already, there will be no impacs for existing cards, custom cards take precedence over the default card if any.</em></p>
</div>
<div class="section" id="data-identity-wildcard-matching">
<h3>Data identity: wildcard matching<a class="headerlink" href="#data-identity-wildcard-matching" title="Permalink to this headline">¶</a></h3>
<p><strong>In some cases, you will want to have a few ID cards that cover the whole picture relying on your naming convention, you can use wildcard matching for this purpose without having to manually associate each entity with an ID card:</strong></p>
<p><strong>Assume the following example:</strong></p>
<ul class="simple">
<li><p>All data sources related to linux_secure are stored in indexes that uses a naming convention starting by <code class="docutils literal notranslate"><span class="pre">linux_</span></code></p></li>
<li><p>We want to create one ID card wich provides a quick informational note, and the link to our documentation</p></li>
<li><p>We can to create a an ID card and use wildcard matching to automatically associate any <code class="docutils literal notranslate"><span class="pre">linux_</span></code> entity with it</p></li>
<li><p>In addition, we add an additional wildcard matching for anything that starts by <code class="docutils literal notranslate"><span class="pre">windows_</span></code></p></li>
</ul>
<div class="section" id="step-1-create-the-identity-card-using-the-trackme-spl-command">
<h4>Step 1: Create the Identity card using the <code class="docutils literal notranslate"><span class="pre">trackme</span></code> SPL command<a class="headerlink" href="#step-1-create-the-identity-card-using-the-trackme-spl-command" title="Permalink to this headline">¶</a></h4>
<p>Run the following <code class="docutils literal notranslate"><span class="pre">trackme</span></code> SPL command to create a new ID card:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=</span><span class="s2">&quot;/services/trackme/v1/identity_cards/identity_cards_add_card&quot;</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;post&quot;</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">doc_link</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">https://www.acme.com/splunkadmin</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">doc_note</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">Read the docs.</span><span class="se">\&quot;</span><span class="s2">}&quot;</span>
</pre></div>
</div>
<p>At this stage, the ID card is not yet associated with any entities, if the card exists already for the same documentation link, it would be updated with these information.</p>
<p>This command returns the ID card as a JSON object, note the <code class="docutils literal notranslate"><span class="pre">key</span></code> value which you need for the steps 2:</p>
<a class="with-border reference internal image-reference" href="_images/wildcard_matching_create1.png"><img alt="wildcard_matching_create1.png" class="with-border align-center" src="_images/wildcard_matching_create1.png" style="width: 1000px;" /></a>
</div>
<div class="section" id="step-2-associate-the-identity-card-using-the-trackme-spl-command">
<h4>Step 2: Associate the Identity card using the <code class="docutils literal notranslate"><span class="pre">trackme</span></code> SPL command<a class="headerlink" href="#step-2-associate-the-identity-card-using-the-trackme-spl-command" title="Permalink to this headline">¶</a></h4>
<p>Run the following <code class="docutils literal notranslate"><span class="pre">trackme</span></code> SPL command to create the wildcard matching association, say for <code class="docutils literal notranslate"><span class="pre">linux_*</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=</span><span class="s2">&quot;/services/trackme/v1/identity_cards/identity_cards_associate_card&quot;</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;post&quot;</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">key</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">60327fd8af39041f28403191</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">object</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">linux_*</span><span class="se">\&quot;</span><span class="s2">}&quot;</span>
</pre></div>
</div>
<p>This command returns the ID card as a JSON object, develop the object JSON key to observe the new association:</p>
<a class="with-border reference internal image-reference" href="_images/wildcard_matching_create2.png"><img alt="wildcard_matching_create2.png" class="with-border align-center" src="_images/wildcard_matching_create2.png" style="width: 1000px;" /></a>
<p>Any entity matching this wildcard criteria will now be associated with this ID card, shall you want to associate the same card with another matching wildcard, say <code class="docutils literal notranslate"><span class="pre">windows_*</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=</span><span class="s2">&quot;/services/trackme/v1/identity_cards/identity_cards_associate_card&quot;</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;post&quot;</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">key</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">60327fd8af39041f28403191</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">object</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">windows_*</span><span class="se">\&quot;</span><span class="s2">}&quot;</span>
</pre></div>
</div>
<a class="with-border reference internal image-reference" href="_images/wildcard_matching_create3.png"><img alt="wildcard_matching_create3.png" class="with-border align-center" src="_images/wildcard_matching_create3.png" style="width: 1000px;" /></a>
<p><strong>Make sure to reload the TrackMe UI</strong>, the following ID card will be associated automatically with any entity that matches your criterias:</p>
<a class="with-border reference internal image-reference" href="_images/wildcard_matching_example.png"><img alt="wildcard_matching_example.png" class="with-border align-center" src="_images/wildcard_matching_example.png" style="width: 800px;" /></a>
<p>And so forth for any additional wildcard matching you may need.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>A message appears at the end of the ID card screen indicating that this is a wildcard matching card that cannot be managed via the UI but with the trackme SPL command and the relevant API endpoints</p>
</div>
</div>
<div class="section" id="removing-a-wildcard-association-using-the-trackme-spl-command">
<h4>Removing a wildcard association using the <code class="docutils literal notranslate"><span class="pre">trackme</span></code> SPL command<a class="headerlink" href="#removing-a-wildcard-association-using-the-trackme-spl-command" title="Permalink to this headline">¶</a></h4>
<p>An association can be removed easily, the following <code class="docutils literal notranslate"><span class="pre">trackme</span></code> SPL command removes the association with the <code class="docutils literal notranslate"><span class="pre">windows_*</span></code> wildcard match:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=</span><span class="s2">&quot;/services/trackme/v1/identity_cards/identity_cards_unassociate&quot;</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;post&quot;</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">object</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">windows_*</span><span class="se">\&quot;</span><span class="s2">}&quot;</span>
</pre></div>
</div>
<a class="with-border reference internal image-reference" href="_images/wildcard_matching_remove1.png"><img alt="wildcard_matching_remove1.png" class="with-border align-center" src="_images/wildcard_matching_remove1.png" style="width: 1000px;" /></a>
<p>For additional options or more details, consult the <a class="reference internal" href="rest_api_reference.html#identity-cards-endpoints"><span class="std std-ref">Identity Cards endpoints</span></a> documentation.</p>
</div>
</div>
<div class="section" id="data-identity-workflow">
<h3>Data identity: workflow<a class="headerlink" href="#data-identity-workflow" title="Permalink to this headline">¶</a></h3>
<p><strong>If the data source has not been associated to a card yet (or no global card was defined), the UI shows a link to define the a documentation reference:</strong></p>
<a class="with-border reference internal image-reference" href="_images/identity_card_notdefined.png"><img alt="identity_card_notdefined.png" class="with-border align-center" src="_images/identity_card_notdefined.png" style="width: 800px;" /></a>
<p><strong>You can click on the link to create a new identity card:</strong></p>
<a class="with-border reference internal image-reference" href="_images/identity_card2.png"><img alt="identity_card2.png" class="with-border align-center" src="_images/identity_card2.png" style="width: 1200px;" /></a>
<p><strong>Once the identity card has been created, the following message link is shown:</strong></p>
<a class="with-border reference internal image-reference" href="_images/identity_card3.png"><img alt="identity_card3.png" class="with-border align-center" src="_images/identity_card3.png" style="width: 1200px;" /></a>
<p><strong>Which automatically provides a view with the identity card content:</strong></p>
<a class="with-border reference internal image-reference" href="_images/identity_card4.png"><img alt="identity_card4.png" class="with-border align-center" src="_images/identity_card4.png" style="width: 800px;" /></a>
<p>In addition, the fields “doc_link” and “doc_note” are part of the default output of the default alert, which can be recycled eventually to enrich a ticketing system incident.</p>
<p><strong>Finally, multiple entities can share the same identity record via the identity card association feature and button:</strong></p>
<a class="with-border reference internal image-reference" href="_images/identity_card5.png"><img alt="identity_card5.png" class="with-border align-center" src="_images/identity_card5.png" style="width: 800px;" /></a>
<a class="with-border reference internal image-reference" href="_images/identity_card6.png"><img alt="identity_card6.png" class="with-border align-center" src="_images/identity_card6.png" style="width: 800px;" /></a>
</div>
</div>
<div class="section" id="auditing-changes">
<h2>Auditing changes<a class="headerlink" href="#auditing-changes" title="Permalink to this headline">¶</a></h2>
<div class="admonition-auditing admonition">
<p class="admonition-title">Auditing</p>
<p>Every action that involves a modification of an object via the UI is stored in a KVstore collection to be used for auditing and investigation purposes.</p>
</div>
<a class="with-border reference internal image-reference" href="_images/auditing1.png"><img alt="auditing1.png" class="with-border align-center" src="_images/auditing1.png" style="width: 1200px;" /></a>
<p>Different information related to the change performed are stored in the collection, such as the user that performed the change, the type of object, the existing state before the change is performed, and so forth.</p>
<p><strong>In addition, each audit change record has a time stamp information stored, which we use to purge old records automatically, via the scheduled report:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">-</span> <span class="pre">Audit</span> <span class="pre">changes</span> <span class="pre">night</span> <span class="pre">purge</span></code></p></li>
</ul>
<p>The purge is performed in a daily fashion executed during the night, by default every record older than 90 days will be purged.</p>
<p><strong>You can customize this value using the following macro definition:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trackme_audit_changes_retention</span></code></p></li>
</ul>
<p>Finally, the auditing change collection is automatically used by the trackers reports when a permanent deletion of an object has been requested.</p>
</div>
<div class="section" id="flipping-statuses-auditing">
<h2>Flipping statuses auditing<a class="headerlink" href="#flipping-statuses-auditing" title="Permalink to this headline">¶</a></h2>
<div class="admonition-flipping-statuses admonition">
<p class="admonition-title">Flipping statuses</p>
<p>Every time an entity status changes, for example from green to red, a record of that event is stored as a summary flipping status event.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">`trackme_idx`</span> <span class="pre">source=&quot;flip_state_change_tracking&quot;`</span></code></p>
<p>Using the UI, you can easily monitor and investigate the historical changes of a given a data source or host over time:</p>
<a class="with-border reference internal image-reference" href="_images/audit_flipping.png"><img alt="audit_flipping.png" class="with-border align-center" src="_images/audit_flipping.png" style="width: 1200px;" /></a>
<p>These events are automatically generated by the tracker reports, and are as well used for SLA calculation purposes.</p>
</div>
<div class="section" id="ops-queues-center">
<h2>Ops: Queues center<a class="headerlink" href="#ops-queues-center" title="Permalink to this headline">¶</a></h2>
<div class="admonition-splunk-queues-usage admonition">
<p class="admonition-title">Splunk queues usage</p>
<p>The Queue center provides quick access to the main Splunk queues statistics.</p>
</div>
<p><strong>The Ops view for Splunk indexing queues is accessible from the “Ops: Queues center” button in the main Trackme screen:</strong></p>
<a class="with-border reference internal image-reference" href="_images/ops_queues_001.png"><img alt="ops_queues_001.png" class="with-border align-center" src="_images/ops_queues_001.png" style="width: 1200px;" /></a>
<p><strong>This view shows Splunk pipeline queues usage in your environment, using the filtering results from the macro trackme_idx_filter, make sure this macro is configured to filter on indexers and heavy forwarders:</strong></p>
<a class="with-border reference internal image-reference" href="_images/ops_queues_002.png"><img alt="ops_queues_001.png" class="with-border align-center" src="_images/ops_queues_002.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/ops_queues_003.png"><img alt="ops_queues_001.png" class="with-border align-center" src="_images/ops_queues_003.png" style="width: 1200px;" /></a>
<p><strong>Options in the view:</strong></p>
<ul class="simple">
<li><p>You can use the multiselect form to choose instances to be considered</p></li>
<li><p>You can select a time range between the provided options</p></li>
<li><p>Scroll down within the window, and choose different break down options in the detailed queue usage treillis charts dependending on your needs</p></li>
</ul>
</div>
<div class="section" id="ops-parsing-view">
<h2>Ops: Parsing view<a class="headerlink" href="#ops-parsing-view" title="Permalink to this headline">¶</a></h2>
<div class="admonition-splunk-parsing-errors admonition">
<p class="admonition-title">Splunk parsing errors</p>
<ul class="simple">
<li><p>The Ops view for Splunk indexing time parsing failures and warnings is available from the TrackMe main screen via the “Ops: Parsing view” button.</p></li>
<li><p>This UI shows the different types of parsing error happening in Splunk at the ingestion time.</p></li>
</ul>
</div>
<a class="with-border reference internal image-reference" href="_images/ops_parsing_001.png"><img alt="ops_parsing_001.png" class="with-border align-center" src="_images/ops_parsing_001.png" style="width: 1200px;" /></a>
<p><strong>This view shows parsing errors happening in your environment, using the filtering results from the macro trackme_idx_filter, make sure this macro is configured to filter on indexers and heavy forwarders:</strong></p>
<a class="with-border reference internal image-reference" href="_images/ops_parsing_002.png"><img alt="ops_parsing_002.png" class="with-border align-center" src="_images/ops_parsing_002.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/ops_parsing_003.png"><img alt="ops_parsing_003.png" class="with-border align-center" src="_images/ops_parsing_003.png" style="width: 1200px;" /></a>
<p><strong>Options in the view:</strong></p>
<ul class="simple">
<li><p>You can use the multiselect form to choose instances to be considered</p></li>
<li><p>You can select a time range between the provided options</p></li>
<li><p>Scroll down within the window to review the top root causes of the parsing issues</p></li>
</ul>
<div class="section" id="splunk-8-magic-props-configuration">
<h3>Splunk 8 magic props configuration<a class="headerlink" href="#splunk-8-magic-props-configuration" title="Permalink to this headline">¶</a></h3>
<p><strong>The “Splunk&gt; magic 8” are good practice configuration items to be configured in your props.conf for the best performing and the best quality sourcetype definition:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">mySourcetype</span><span class="p">]</span>

<span class="n">TIME_PREFIX</span> <span class="o">=</span> <span class="n">regex</span> <span class="n">of</span> <span class="n">the</span> <span class="n">text</span> <span class="n">that</span> <span class="n">leads</span> <span class="n">up</span> <span class="n">to</span> <span class="n">the</span> <span class="n">timestamp</span>

<span class="n">MAX_TIMESTAMP_LOOKAHEAD</span> <span class="o">=</span> <span class="n">how</span> <span class="n">many</span> <span class="n">characters</span> <span class="k">for</span> <span class="n">the</span> <span class="n">timestamp</span>

<span class="n">TIME_FORMAT</span> <span class="o">=</span> <span class="n">strftime</span> <span class="nb">format</span> <span class="n">of</span> <span class="n">the</span> <span class="n">timestamp</span>
<span class="c1"># for multiline events: SHOULD_LINEMERGE should always be set to false as LINE_BREAKER will speed up multiline events</span>

<span class="n">SHOULD_LINEMERGE</span> <span class="o">=</span> <span class="n">false</span>
<span class="c1"># Wherever the LINE_BREAKER regex matches, Splunk considers the start</span>
<span class="c1"># of the first capturing group to be the end of the previous event</span>
<span class="c1"># and considers the end of the first capturing group to be the start of the next event.</span>
<span class="c1"># Defaults to ([\r\n]+), meaning data is broken into an event for each line</span>

<span class="n">LINE_BREAKER</span> <span class="o">=</span> <span class="n">regular</span> <span class="n">expression</span> <span class="k">for</span> <span class="n">event</span> <span class="n">breaks</span>

<span class="n">TRUNCATE</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1"># Use the following attributes to handle better load balancing from UF.</span>
<span class="c1"># Please note the EVENT_BREAKER properties are applicable for Splunk Universal</span>
<span class="c1"># Forwarder instances only. Valid with forwarders &gt; 6.5.0</span>

<span class="n">EVENT_BREAKER_ENABLE</span> <span class="o">=</span> <span class="n">true</span>

<span class="n">EVENT_BREAKER</span> <span class="o">=</span> <span class="n">regular</span> <span class="n">expression</span> <span class="k">for</span> <span class="n">event</span> <span class="n">breaks</span>
</pre></div>
</div>
<p><strong>This configuration represents the ideal sourcetype definition for Splunk, combining an explicit and controled definition for a reliable event breaking and time stamp recognition, as much as it is possible you should always target this configuration.</strong></p>
</div>
</div>
<div class="section" id="connected-experience-dashboard-for-splunk-mobile-apple-tv">
<h2>Connected experience dashboard for Splunk Mobile &amp; Apple TV<a class="headerlink" href="#connected-experience-dashboard-for-splunk-mobile-apple-tv" title="Permalink to this headline">¶</a></h2>
<p><strong>TrackMe provides a connected experience dashboard for Splunk Cloud Gateway, that can be displayed on Mobile applications &amp; Apple TV:</strong></p>
<a class="with-border reference internal image-reference" href="_images/connected_dashboard.png"><img alt="connected_dashboard.png" class="with-border align-center" src="_images/connected_dashboard.png" style="width: 1200px;" /></a>
<p>This dashboard is exported to the system, to be made available to Splunk Cloud Gateway.</p>
</div>
<div class="section" id="team-working-with-trackme-alerts-and-audit-changes-flow-tracker">
<h2>Team working with trackMe alerts and audit changes flow tracker<a class="headerlink" href="#team-working-with-trackme-alerts-and-audit-changes-flow-tracker" title="Permalink to this headline">¶</a></h2>
<p><strong>Nowadays it is very convenient to have team workspaces (Slack, Webex Teams, MS-Teams…) where people and applications can interact.</strong></p>
<p>Fortunately, Splunk with alert actions and addon extensions allows interacting with any kind of platform, TrackMe makes it very handy with the following alerts:</p>
<p><em>Out of the box alerts can be communicating when potential issues data sources, hosts or metric hosts are detected:</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">-</span> <span class="pre">Alert</span> <span class="pre">on</span> <span class="pre">data</span> <span class="pre">source</span> <span class="pre">availability</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">-</span> <span class="pre">Alert</span> <span class="pre">on</span> <span class="pre">data</span> <span class="pre">host</span> <span class="pre">availability</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">-</span> <span class="pre">Alert</span> <span class="pre">on</span> <span class="pre">metric</span> <span class="pre">host</span> <span class="pre">availability</span></code></p></li>
</ul>
<p><em>In addition, the notification change tracker allows sharing automatically updates performed by administrators, which could be sent to a dedicated channel:</em></p>
<ul class="simple">
<li><p>TrackMe - Audit change notification tracker</p></li>
</ul>
<p><strong>Example in a Slack channel:</strong></p>
<a class="with-border reference internal image-reference" href="_images/slack_audit_change_flow.png"><img alt="slack_audit_change_flow.png" class="with-border align-center" src="_images/slack_audit_change_flow.png" style="width: 1200px;" /></a>
<p><em>For Slack integration, see</em></p>
<ul class="simple">
<li><p><a class="reference external" href="https://splunkbase.splunk.com/app/2878">https://splunkbase.splunk.com/app/2878</a></p></li>
</ul>
<p>Many more integration are available on Splunk Base.</p>
</div>
<div class="section" id="enrichment-tags">
<h2>Enrichment tags<a class="headerlink" href="#enrichment-tags" title="Permalink to this headline">¶</a></h2>
<div class="admonition-enrichment-tags admonition">
<p class="admonition-title">Enrichment tags</p>
<p>Enrichment tags are available for data and metric hosts to provide context for your assets based on the assets data available in your Splunk deployment.</p>
</div>
<a class="with-border reference internal image-reference" href="_images/tags_screen1.png"><img alt="tags_screen1.png" class="with-border align-center" src="_images/tags_screen1.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/tags_screen2.png"><img alt="tags_screen2.png" class="with-border align-center" src="_images/tags_screen2.png" style="width: 1200px;" /></a>
<p>Once configured, enrichment tags provides access to your assets information to help analyst identifying the entities in alert and facilitate further investigations:</p>
<a class="with-border reference internal image-reference" href="_images/tags_screen3.png"><img alt="tags_screen3.png" class="with-border align-center" src="_images/tags_screen3.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="maintenance-mode">
<h2>Maintenance mode<a class="headerlink" href="#maintenance-mode" title="Permalink to this headline">¶</a></h2>
<div class="admonition-maintenance-mode admonition">
<p class="admonition-title">Maintenance mode</p>
<p>The maintenance mode feature provides a builtin workflow to temporary silent all alerts from TrackMe for a given period of time, which can be scheduled in advance.</p>
</div>
<p>All alerts are by default driven by the status of the maintenance mode stored in a KVstore collection.</p>
<p>Shall the maintenance be enabled by an administrator, Splunk will continue to run the schedule alerts but none of them will be able to trigger during the maintenance time window.</p>
<p>When the end of maintenance time window is reached, its state will be automatically disabled and alerts will be able to trigger again.</p>
<p>A maintenance time window can start immediately, or be can be scheduled according to your selection.</p>
<div class="section" id="enabling-or-extending-the-maintenance-mode">
<h3>Enabling or extending the maintenance mode<a class="headerlink" href="#enabling-or-extending-the-maintenance-mode" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Click on the enable maintenance mode button:</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/maintenance_mode1.png"><img alt="maintenance_mode1.png" class="with-border align-center" src="_images/maintenance_mode1.png" style="width: 1200px;" /></a>
<ul class="simple">
<li><p>Within the modal configuration window, enter the date and hours of the end of the maintenance time window:</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/maintenance_mode2.png"><img alt="maintenance_mode2.png" class="with-border align-center" src="_images/maintenance_mode2.png" style="width: 1200px;" /></a>
<ul class="simple">
<li><p>When the date and hours of the maintenance time window are reached, the scheduled report “Verify Kafka alerting maintenance status” will automatically disable the maintenance mode.</p></li>
<li><p>If a start date time different than the current time is selected (default), this action will automatically schedule the maintenance time window.</p></li>
</ul>
</div>
<div class="section" id="disabling-the-maintenance-mode">
<h3>Disabling the maintenance mode<a class="headerlink" href="#disabling-the-maintenance-mode" title="Permalink to this headline">¶</a></h3>
<p>During any time of the maintenance time window, an administrator can decide to disable the maintenance mode:</p>
<a class="with-border reference internal image-reference" href="_images/maintenance_mode3.png"><img alt="maintenance_mode3.png" class="with-border align-center" src="_images/maintenance_mode3.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="scheduling-a-maintenance-window">
<h3>Scheduling a maintenance window<a class="headerlink" href="#scheduling-a-maintenance-window" title="Permalink to this headline">¶</a></h3>
<p>You can configure the maintenance mode to be automatically enabled between a specific date time that you enter in the UI.</p>
<ul class="simple">
<li><p>When the end time is reached, the maintenance mode will automatically be disable, and the alerting will return to normal operations.</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/maintenance_mode4.png"><img alt="maintenance_mode4.png" class="with-border align-center" src="_images/maintenance_mode4.png" style="width: 1200px;" /></a>
<ul class="simple">
<li><p>When a maintenance mode window has been scheduled, the UI shows a specific message with the starts / ends on dates:</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/maintenance_mode5.png"><img alt="maintenance_mode5.png" class="with-border align-center" src="_images/maintenance_mode5.png" style="width: 1200px;" /></a>
</div>
</div>
<div class="section" id="backup-and-restore">
<h2>Backup and restore<a class="headerlink" href="#backup-and-restore" title="Permalink to this headline">¶</a></h2>
<p>TrackMe stores the vaste majority of its content in multiple KVstore collections.</p>
<p>Using the <a class="reference internal" href="rest_api_reference.html#backup-and-restore-endpoints"><span class="std std-ref">Backup and Restore endpoints</span></a> from the API, backups are taken automatically on a scheduled basis, can be taken on demand and restored if necessary.</p>
<p><strong>Backups are stored in compressed tarball archives, located in the “backup” directory of the TrackMe application on the search head(s):</strong></p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">splunk</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">trackme</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">trackme</span><span class="o">-</span><span class="n">backup</span><span class="o">-</span><span class="mi">20210205</span><span class="o">-</span><span class="mf">142635.</span><span class="n">tgz</span>
</pre></div>
</div>
<p>Each archive contains a JSON file corresponding to the entire content of the KVstore collection when the backup was taken, empty collections are not backed up.</p>
<p>To perform a restore operation (see the documentation following), the relevant tarball archive needs to be located in the same directory.</p>
<p>When a backup is taken, a record with Metadata is added in a dedicated KVstore collection (kv_trackme_backup_archives_info), records are automatically purged when the archive is deleted due to retention. (any missing archive record is as well added if discovered on a search head when a get backups command runs)</p>
<p>For Splunk Cloud certification purposes, the application will never attempt to write or access a directory ouf of the application name space level.</p>
<div class="admonition-notes-about-search-head-clustering-shc admonition">
<p class="admonition-title">notes about Search Head Clustering (SHC)</p>
<ul class="simple">
<li><p>If TrackMe is deployed in a Search Head Cluster, the scheduled report is executed on a single search head, randomly</p></li>
<li><p>As such, the archive file is created on this specific instance, but not replicated to other members</p></li>
<li><p>Restoring requires to locate the server hosting the archive file using the audit dashboard or manually in the Metadata collection, and running the restore command from this node especially</p></li>
<li><p>The restore operation does not mandatory requires to be executed from the SHC / KVstore captain</p></li>
<li><p>in a SHC context, the purging part of schedule report happens only on the member running the report, therefore archive files can exist longer than the retention on other members</p></li>
</ul>
</div>
<div class="section" id="backup-and-restore-dashboard">
<h3>Backup and Restore dashboard<a class="headerlink" href="#backup-and-restore-dashboard" title="Permalink to this headline">¶</a></h3>
<p><strong>An auditing dashboard is provided in the app navigation menu “API &amp; Tooling” that provides an overview of the backup archives knowledge and statuses:</strong></p>
<a class="with-border reference internal image-reference" href="_images/dashboard_backup_and_restore.png"><img alt="dashboard_backup_and_restore.png" class="with-border align-center" src="_images/dashboard_backup_and_restore.png" style="width: 1200px;" /></a>
<p>This dashboard uses the backup archives Metadata stores in the KVstore collection <strong>trackme_backup_archives_info</strong> to show the list of backups that were taken over time per instance.</p>
</div>
<div class="section" id="automatic-backup">
<h3>Automatic backup<a class="headerlink" href="#automatic-backup" title="Permalink to this headline">¶</a></h3>
<p>A Splunk report is scheduled by default to run every day at 2h AM:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TrackMe</span> <span class="pre">-</span> <span class="pre">Backup</span> <span class="pre">KVstore</span> <span class="pre">collections</span> <span class="pre">and</span> <span class="pre">purge</span> <span class="pre">older</span> <span class="pre">backup</span> <span class="pre">files</span></code></p></li>
</ul>
<p><em>This report does the following operations:</em></p>
<ul class="simple">
<li><p>call the trackme custom command API wrapper to take a backup of all non empty KVstore collections, generating an archive file in the search head the report is executed</p></li>
<li><p>call the trackme custom command API wrapper to purge backup files older than 7 days (by default) in the search head the report is executed</p></li>
<li><p>call the trackme custom command API wrapper to list backup files, and automatically discover any missing files in the knowledge collection</p></li>
</ul>
<p><em>In SPL:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=/</span><span class="n">services</span><span class="o">/</span><span class="n">trackme</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">backup_and_restore</span><span class="o">/</span><span class="n">backup</span> <span class="n">mode</span><span class="o">=</span><span class="n">post</span>
<span class="o">|</span> <span class="n">append</span> <span class="p">[</span> <span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=/</span><span class="n">services</span><span class="o">/</span><span class="n">trackme</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">backup_and_restore</span><span class="o">/</span><span class="n">backup</span> <span class="n">mode</span><span class="o">=</span><span class="n">delete</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;{&#39;retention_days&#39;: &#39;7&#39;}&quot;</span> <span class="p">]</span>
<span class="o">|</span> <span class="n">append</span> <span class="p">[</span> <span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=/</span><span class="n">services</span><span class="o">/</span><span class="n">trackme</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">backup_and_restore</span><span class="o">/</span><span class="n">backup</span> <span class="n">mode</span><span class="o">=</span><span class="n">get</span> <span class="o">|</span> <span class="n">spath</span> <span class="o">|</span> <span class="n">eventstats</span> <span class="n">dc</span><span class="p">({}</span><span class="o">.</span><span class="n">backup_archive</span><span class="p">)</span> <span class="k">as</span> <span class="n">backup_count</span><span class="p">,</span> <span class="n">values</span><span class="p">({}</span><span class="o">.</span><span class="n">backup_archive</span><span class="p">)</span> <span class="k">as</span> <span class="n">backup_files</span>
<span class="o">|</span> <span class="nb">eval</span> <span class="n">backup_count</span><span class="o">=</span><span class="k">if</span><span class="p">(</span><span class="n">isnull</span><span class="p">(</span><span class="n">backup_count</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">backup_count</span><span class="p">),</span> <span class="n">backup_files</span><span class="o">=</span><span class="k">if</span><span class="p">(</span><span class="n">isnull</span><span class="p">(</span><span class="n">backup_files</span><span class="p">),</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="n">backup_files</span><span class="p">)</span>
<span class="o">|</span> <span class="nb">eval</span> <span class="n">report</span><span class="o">=</span><span class="s2">&quot;List of identified or known backup files (&quot;</span> <span class="o">.</span> <span class="n">backup_count</span> <span class="o">.</span> <span class="s2">&quot;)&quot;</span>
<span class="o">|</span> <span class="nb">eval</span> <span class="n">_raw</span><span class="o">=</span><span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">report</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">.</span> <span class="n">report</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">backup_files</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2"> [ &quot;</span> <span class="o">.</span> <span class="n">mvjoin</span><span class="p">(</span><span class="n">backup_files</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot; ]</span><span class="se">\&quot;</span><span class="s2">}&quot;</span> <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="on-demand-backup">
<h3>On demand backup<a class="headerlink" href="#on-demand-backup" title="Permalink to this headline">¶</a></h3>
<p><strong>You can at anytime perform a backup of the KVstore collections by running the following SPL command:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=/</span><span class="n">services</span><span class="o">/</span><span class="n">trackme</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">backup_and_restore</span><span class="o">/</span><span class="n">backup</span> <span class="n">mode</span><span class="o">=</span><span class="n">post</span>
</pre></div>
</div>
<p>This command calls the <a class="reference internal" href="rest_api_reference.html#backup-run-backup-kvstore-collections"><span class="std std-ref">backup / Run backup KVstore collections</span></a> API endpoint, and produces the following output:</p>
<a class="with-border reference internal image-reference" href="_images/backup_on_demand.png"><img alt="backup_on_demand.png" class="with-border align-center" src="_images/backup_on_demand.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="list-backup-archives-available">
<h3>List backup archives available<a class="headerlink" href="#list-backup-archives-available" title="Permalink to this headline">¶</a></h3>
<p><strong>You can list the archive files available on the search head running the command using the following SPL command:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=/</span><span class="n">services</span><span class="o">/</span><span class="n">trackme</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">backup_and_restore</span><span class="o">/</span><span class="n">backup</span> <span class="n">mode</span><span class="o">=</span><span class="n">get</span>
</pre></div>
</div>
<p>This command calls the <a class="reference internal" href="rest_api_reference.html#backup-purge-older-backup-archive-files"><span class="std std-ref">backup / Purge older backup archive files</span></a> API endpoint, and produces the following output:</p>
<a class="with-border reference internal image-reference" href="_images/backup_list.png"><img alt="backup_list.png" class="with-border align-center" src="_images/backup_list.png" style="width: 1200px;" /></a>
<p>All archive files available on the search head the command is executed are listed with their full path on the file system.</p>
</div>
<div class="section" id="purge-older-backup-archive">
<h3>Purge older backup archive<a class="headerlink" href="#purge-older-backup-archive" title="Permalink to this headline">¶</a></h3>
<p><strong>You can purge older archive files based on their creation time on the search head running the command using the following SPL command:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=/</span><span class="n">services</span><span class="o">/</span><span class="n">trackme</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">backup_and_restore</span><span class="o">/</span><span class="n">backup</span> <span class="n">mode</span><span class="o">=</span><span class="n">delete</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;{&#39;retention_days&#39;: &#39;7&#39;}&quot;</span>
</pre></div>
</div>
<p>This command calls the <a class="reference internal" href="rest_api_reference.html#backup-purge-older-backup-archive-files"><span class="std std-ref">backup / Purge older backup archive files</span></a> API endpoint, and produces the following output:</p>
<a class="with-border reference internal image-reference" href="_images/backup_purge.png"><img alt="backup_purge.png" class="with-border align-center" src="_images/backup_purge.png" style="width: 1200px;" /></a>
<p>Depending on either there are no eligible archives, the response above would appear, or the list of archives that were purged will be rendered.</p>
</div>
<div class="section" id="restoring-a-backup">
<h3>Restoring a backup<a class="headerlink" href="#restoring-a-backup" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Restoring means the content of all KVstore collections will be permanently lost and replaced by the backup, use with precautions!</strong></p>
<ul class="simple">
<li><p>Splunk API limits by default the max number of document per batch to 1000</p></li>
<li><p>trackMe uses a chunk approach that limits to 500 document per API call</p></li>
<li><p>To be able to perform a restore operation, ensure that limits.conf / kvstore / max_documents_per_batch_save is equal or superior to 500</p></li>
</ul>
</div>
<p>Restoring relies on the <a class="reference internal" href="rest_api_reference.html#restore-perform-a-restore-of-kvstore-collections"><span class="std std-ref">restore / Perform a restore of KVstore collections</span></a> API endpoint, which can be actionned via the <code class="docutils literal notranslate"><span class="pre">trackme</span></code> command, you can list the options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=/</span><span class="n">services</span><span class="o">/</span><span class="n">trackme</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">backup_and_restore</span><span class="o">/</span><span class="n">restore</span> <span class="n">mode</span><span class="o">=</span><span class="n">post</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;{&#39;describe&#39;: &#39;true&#39;}&quot;</span>
</pre></div>
</div>
<a class="with-border reference internal image-reference" href="_images/restore1.png"><img alt="restore1.png" class="with-border align-center" src="_images/restore1.png" style="width: 1200px;" /></a>
<div class="section" id="dry-run-mode">
<h4>dry_run mode<a class="headerlink" href="#dry-run-mode" title="Permalink to this headline">¶</a></h4>
<p>By default, the restore endpoint acts in dry_run mode, this means that the backend performs verifications <strong>without applying any kind of modifications</strong>:</p>
<ul class="simple">
<li><p>verify that the submitted archive tarball exists on the file system</p></li>
<li><p>verify that the archive can be uncompressed effectively</p></li>
</ul>
<p>It is actioned via the argument <code class="docutils literal notranslate"><span class="pre">dry_run</span></code> to be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> (which is the default), or <code class="docutils literal notranslate"><span class="pre">false</span></code> which invovles performing the restore operation for real.</p>
</div>
<div class="section" id="target-for-restore">
<h4>target for restore<a class="headerlink" href="#target-for-restore" title="Permalink to this headline">¶</a></h4>
<p>By default, the restore operation clears every KVstore collection, and restore collections from the JSON files contained in the backup archive.</p>
<p>This is driven by the argument <code class="docutils literal notranslate"><span class="pre">target</span></code> which accepts the following options:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">all</span></code> which is the default and means restoring all collections</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;name</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">JSON</span> <span class="pre">file</span> <span class="pre">corresponding</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">KVstore</span> <span class="pre">collection</span></code> to restore a specific KVstore collection only</p></li>
</ul>
<p>Use the <a class="reference internal" href="#dry-run-mode"><span class="std std-ref">dry_run mode</span></a> true to list the JSON file available in a given archive file.</p>
</div>
<div class="section" id="restoring-everything">
<h4>Restoring everything<a class="headerlink" href="#restoring-everything" title="Permalink to this headline">¶</a></h4>
<p><strong>The following SPL command will first perform a dry run to verify the archive, without modifying anything:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=/</span><span class="n">services</span><span class="o">/</span><span class="n">trackme</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">backup_and_restore</span><span class="o">/</span><span class="n">restore</span> <span class="n">mode</span><span class="o">=</span><span class="n">post</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;{&#39;backup_archive&#39;: &#39;trackme-backup-20210205-142635.tgz&#39;, &#39;target&#39;: &#39;all&#39;, &#39;dry_run&#39;: &#39;true&#39;}&quot;</span>
</pre></div>
</div>
<a class="with-border reference internal image-reference" href="_images/restore2.png"><img alt="restore1.png" class="with-border align-center" src="_images/restore2.png" style="width: 1200px;" /></a>
<p><strong>The following SPL command will restore all KVstore collections to a given state according to the content of that backup:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=/</span><span class="n">services</span><span class="o">/</span><span class="n">trackme</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">backup_and_restore</span><span class="o">/</span><span class="n">restore</span> <span class="n">mode</span><span class="o">=</span><span class="n">post</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;{&#39;backup_archive&#39;: &#39;trackme-backup-20210205-142635.tgz&#39;, &#39;target&#39;: &#39;all&#39;, &#39;dry_run&#39;: &#39;false&#39;}&quot;</span>
</pre></div>
</div>
<a class="with-border reference internal image-reference" href="_images/restore3.png"><img alt="restore3.png" class="with-border align-center" src="_images/restore3.png" style="width: 1200px;" /></a>
<p><strong>The following SPL command will restore a specific collection only:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">trackme</span> <span class="n">url</span><span class="o">=/</span><span class="n">services</span><span class="o">/</span><span class="n">trackme</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">backup_and_restore</span><span class="o">/</span><span class="n">restore</span> <span class="n">mode</span><span class="o">=</span><span class="n">post</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;{&#39;backup_archive&#39;: &#39;trackme-backup-20210205-142635.tgz&#39;, &#39;target&#39;: &#39;kv_trackme_data_source_monitoring.json&#39;, &#39;dry_run&#39;: &#39;false&#39;}&quot;</span>
</pre></div>
</div>
<a class="with-border reference internal image-reference" href="_images/restore4.png"><img alt="restore4.png" class="with-border align-center" src="_images/restore4.png" style="width: 1200px;" /></a>
<p><strong>Once the restore operation is finished, please reload the application, restarting the Splunk Search head(s) is not required.</strong></p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="itsi_integration.html" class="btn btn-neutral float-right" title="Splunk ITSI integration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="configuration.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018-2021, TrackMe Limited, U.K..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>