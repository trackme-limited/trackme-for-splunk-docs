

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Monitor Splunk instances forwarding &mdash; TrackMe 1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="REST API Reference Manual" href="rest_api_reference.html" />
    <link rel="prev" title="Cribl LogStream integration" href="cribl_integration.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> TrackMe
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation and configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="compatibility.html">Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment &amp; Upgrades</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="userguide.html">User guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="itsi_integration.html">Splunk ITSI integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="cribl_integration.html">Cribl LogStream integration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Monitor Splunk instances forwarding</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#splunk-forwarding-good-practices-configuration">Splunk forwarding good practices configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#trackme-allow-lists-and-block-lists">TrackMe allow lists and block lists</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-hosts-tracking">Data hosts tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metric-hosts-tracking">Metric hosts tracking</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rest_api_reference.html">REST API Reference Manual</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Troubleshoot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versioning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TrackMe</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Monitor Splunk instances forwarding</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/monitor_forwarders.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="monitor-splunk-instances-forwarding">
<h1>Monitor Splunk instances forwarding<a class="headerlink" href="#monitor-splunk-instances-forwarding" title="Permalink to this headline">¶</a></h1>
<p><strong>TrackMe monitors by default any Splunk instance forwarding to the Splunk indexing layer, this includes:</strong></p>
<ul class="simple">
<li><p>Universal Forwarder instances</p></li>
<li><p>Heavy Forwarder instances</p></li>
<li><p>All other types of instances from your Splunk infrastructure</p></li>
</ul>
<p><strong>Forwarding is monitored via:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">hosts</span></code> by tracking the <code class="docutils literal notranslate"><span class="pre">index=_internal</span> <span class="pre">sourcetype=splunkd</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metric</span> <span class="pre">hosts</span></code> by trackking the <code class="docutils literal notranslate"><span class="pre">spl</span></code> metrics stored in the <code class="docutils literal notranslate"><span class="pre">_metrics</span></code> index</p></li>
</ul>
<a class="with-border reference internal image-reference" href="_images/data_hosts.png"><img alt="data_hosts.png" class="with-border align-center" src="_images/data_hosts.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/metric_hosts.png"><img alt="metric_hosts.png" class="with-border align-center" src="_images/metric_hosts.png" style="width: 1200px;" /></a>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<div class="section" id="splunk-forwarding-good-practices-configuration">
<h3>Splunk forwarding good practices configuration<a class="headerlink" href="#splunk-forwarding-good-practices-configuration" title="Permalink to this headline">¶</a></h3>
<p><strong>Splunk good configuration practices implies that you are systematically forwarding the Splunk internals (and metrics) to the indexing layer in your outputs.conf configuration, see the Splunk PS base config apps:</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://drive.google.com/open?id=107qWrfsv17j5bLxc21ymTagjtHG0AobF">Configurations Base Apps</a></p></li>
<li><p><a class="reference external" href="https://drive.google.com/open?id=10aVQXjbgQC99b9InTvncrLFWUrXci3gz">Configurations Cluster Apps</a></p></li>
</ul>
<p><em>See: org_all_forwarder_outputs / org_cluster_forwarder_outputs</em></p>
<p>Concretely, this implies that you configure the Splunk instances (all but indexers) to have an outputs.conf sanza similar to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">tcpout</span><span class="p">]</span>
<span class="n">defaultGroup</span> <span class="o">=</span> <span class="n">primary_indexers</span>

<span class="n">forwardedindex</span><span class="mf">.2</span><span class="o">.</span><span class="n">whitelist</span> <span class="o">=</span> <span class="p">(</span><span class="n">_audit</span><span class="o">|</span><span class="n">_introspection</span><span class="o">|</span><span class="n">_internal</span><span class="o">|</span><span class="n">_metrics</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="trackme-allow-lists-and-block-lists">
<h3>TrackMe allow lists and block lists<a class="headerlink" href="#trackme-allow-lists-and-block-lists" title="Permalink to this headline">¶</a></h3>
<p><strong>The default configuration of TrackMe implies monitoring every single index including the _internal (limited to sourcetype=splunkd) and the _metrics, if you use allowlisting &amp; blocklisting, you need to make sure to include these items accordingly:</strong></p>
<p><em>For data hosts, allow the _internal</em></p>
<a class="with-border reference internal image-reference" href="_images/allow_internal.png"><img alt="allow_internal.png" class="with-border align-center" src="_images/allow_internal.png" style="width: 600px;" /></a>
<p><em>For metric hosts, allow the _metrics</em></p>
<a class="with-border reference internal image-reference" href="_images/allow_metrics.png"><img alt="allow_metrics.png" class="with-border align-center" src="_images/allow_metrics.png" style="width: 600px;" /></a>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>A Splunk instance that does not generate any data out of the internal will appear with the single _internal / splunkd combination in data hosts, and the spl metrics in metrics hosts:</strong></p>
<a class="with-border reference internal image-reference" href="_images/data_host_details.png"><img alt="data_host_details.png" class="with-border align-center" src="_images/data_host_details.png" style="width: 1200px;" /></a>
<a class="with-border reference internal image-reference" href="_images/metric_host_details.png"><img alt="metric_host_details.png" class="with-border align-center" src="_images/metric_host_details.png" style="width: 1200px;" /></a>
<p><strong>A green status basically indicates that:</strong></p>
<ul class="simple">
<li><p>Splunk service is up and running</p></li>
<li><p>The instance is able to reach the indexing layer and properly ingest data as it is forwarding effectively its own data and metrics (which validates configuration and network layers theoritically)</p></li>
<li><p>The instance is expected to be acting in a normal and sane state</p></li>
</ul>
<div class="section" id="data-hosts-tracking">
<h3>Data hosts tracking<a class="headerlink" href="#data-hosts-tracking" title="Permalink to this headline">¶</a></h3>
<p><strong>When a Splunk instance does more than just indexing its own data and the host Metadata is refering to itself, the Splunk internal data and metrics appear as part of the indexing flow:</strong></p>
<a class="with-border reference internal image-reference" href="_images/heavyforwarder1.png"><img alt="heavyforwarder1.png" class="with-border align-center" src="_images/heavyforwarder1.png" style="width: 1200px;" /></a>
<p>The default behaviour driven by the global host policy implies that as long as the Splunk instance is forwarding data, the host will remain green even if the sources monitored by and as this host runs into troubles, you can on a global basis change the <a class="reference internal" href="configuration.html#trackme-data-hosts-define-what-works-for-you"><span class="std std-ref">Data Hosts alerting policy</span></a> or selectively on a per host basis:</p>
<p><em>Global policy in TrackMe manage and configure:</em></p>
<a class="with-border reference internal image-reference" href="_images/data_hosts_allerting_policy_config.png"><img alt="data_hosts_allerting_policy_config.png" class="with-border align-center" src="_images/data_hosts_allerting_policy_config.png" style="width: 1200px;" /></a>
<p><em>Per data host policy:</em></p>
<a class="with-border reference internal image-reference" href="_images/data_host_per_host_policy.png"><img alt="data_host_per_host_policy.png" class="with-border align-center" src="_images/data_host_per_host_policy.png" style="width: 1200px;" /></a>
<p><strong>When the global policy, or the per host policy, is set to track per sourcetype, the data host will appear in a non green status if at least one sourcetype is red (for example even if Splunk internal is still going through):</strong></p>
<a class="with-border reference internal image-reference" href="_images/heavyforwarder2.png"><img alt="heavyforwarder2.png" class="with-border align-center" src="_images/heavyforwarder2.png" style="width: 1200px;" /></a>
</div>
<div class="section" id="metric-hosts-tracking">
<h3>Metric hosts tracking<a class="headerlink" href="#metric-hosts-tracking" title="Permalink to this headline">¶</a></h3>
<p><strong>Metrics tracking acts differently, if any of the metric categories does not comply with monitoring rules (including the spl metrics), the host will turn into a red state:</strong></p>
<a class="with-border reference internal image-reference" href="_images/metric_host_details2.png"><img alt="metric_host_details2.png" class="with-border align-center" src="_images/metric_host_details2.png" style="width: 1200px;" /></a>
<p>Congratulations, you have now a builtin, easy and efficient monitoring of your Splunk instances availability, enable and configure alerts up to your preferences the <a class="reference internal" href="userguide.html#alerts-tracking"><span class="std std-ref">Alerts tracking</span></a> and the job is done!</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="rest_api_reference.html" class="btn btn-neutral float-right" title="REST API Reference Manual" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="cribl_integration.html" class="btn btn-neutral float-left" title="Cribl LogStream integration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018-2021, TrackMe Limited, U.K..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>